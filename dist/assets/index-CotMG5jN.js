var RP=Object.defineProperty;var Xw=n=>{throw TypeError(n)};var NP=(n,t,e)=>t in n?RP(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var j=(n,t,e)=>NP(n,typeof t!="symbol"?t+"":t,e),v0=(n,t,e)=>t.has(n)||Xw("Cannot "+e);var c=(n,t,e)=>(v0(n,t,"read from private field"),e?e.call(n):t.get(n)),S=(n,t,e)=>t.has(n)?Xw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),v=(n,t,e,i)=>(v0(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e),E=(n,t,e)=>(v0(n,t,"access private method"),e);var Ge=(n,t,e,i)=>({set _(s){v(n,t,s,e)},get _(){return c(n,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();var qS={exports:{}},Vg={},YS={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Of=Symbol.for("react.element"),LP=Symbol.for("react.portal"),IP=Symbol.for("react.fragment"),DP=Symbol.for("react.strict_mode"),jP=Symbol.for("react.profiler"),FP=Symbol.for("react.provider"),OP=Symbol.for("react.context"),BP=Symbol.for("react.forward_ref"),zP=Symbol.for("react.suspense"),VP=Symbol.for("react.memo"),$P=Symbol.for("react.lazy"),Kw=Symbol.iterator;function HP(n){return n===null||typeof n!="object"?null:(n=Kw&&n[Kw]||n["@@iterator"],typeof n=="function"?n:null)}var QS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZS=Object.assign,JS={};function Tu(n,t,e){this.props=n,this.context=t,this.refs=JS,this.updater=e||QS}Tu.prototype.isReactComponent={};Tu.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};Tu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function tE(){}tE.prototype=Tu.prototype;function qx(n,t,e){this.props=n,this.context=t,this.refs=JS,this.updater=e||QS}var Yx=qx.prototype=new tE;Yx.constructor=qx;ZS(Yx,Tu.prototype);Yx.isPureReactComponent=!0;var qw=Array.isArray,eE=Object.prototype.hasOwnProperty,Qx={current:null},nE={key:!0,ref:!0,__self:!0,__source:!0};function iE(n,t,e){var i,s={},r=null,o=null;if(t!=null)for(i in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)eE.call(t,i)&&!nE.hasOwnProperty(i)&&(s[i]=t[i]);var a=arguments.length-2;if(a===1)s.children=e;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Of,type:n,key:r,ref:o,props:s,_owner:Qx.current}}function UP(n,t){return{$$typeof:Of,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function Zx(n){return typeof n=="object"&&n!==null&&n.$$typeof===Of}function WP(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var Yw=/\/+/g;function x0(n,t){return typeof n=="object"&&n!==null&&n.key!=null?WP(""+n.key):t.toString(36)}function Op(n,t,e,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Of:case LP:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+x0(o,0):i,qw(s)?(e="",n!=null&&(e=n.replace(Yw,"$&/")+"/"),Op(s,t,e,"",function(u){return u})):s!=null&&(Zx(s)&&(s=UP(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Yw,"$&/")+"/")+n)),t.push(s)),1;if(o=0,i=i===""?".":i+":",qw(n))for(var a=0;a<n.length;a++){r=n[a];var l=i+x0(r,a);o+=Op(r,t,e,l,s)}else if(l=HP(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=i+x0(r,a++),o+=Op(r,t,e,l,s);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function rp(n,t,e){if(n==null)return n;var i=[],s=0;return Op(n,i,"","",function(r){return t.call(e,r,s++)}),i}function GP(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var on={current:null},Bp={transition:null},XP={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Bp,ReactCurrentOwner:Qx};function sE(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:rp,forEach:function(n,t,e){rp(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return rp(n,function(){t++}),t},toArray:function(n){return rp(n,function(t){return t})||[]},only:function(n){if(!Zx(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};at.Component=Tu;at.Fragment=IP;at.Profiler=jP;at.PureComponent=qx;at.StrictMode=DP;at.Suspense=zP;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XP;at.act=sE;at.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=ZS({},n.props),s=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=Qx.current),t.key!==void 0&&(s=""+t.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in t)eE.call(t,l)&&!nE.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=e;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Of,type:n.type,key:s,ref:r,props:i,_owner:o}};at.createContext=function(n){return n={$$typeof:OP,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:FP,_context:n},n.Consumer=n};at.createElement=iE;at.createFactory=function(n){var t=iE.bind(null,n);return t.type=n,t};at.createRef=function(){return{current:null}};at.forwardRef=function(n){return{$$typeof:BP,render:n}};at.isValidElement=Zx;at.lazy=function(n){return{$$typeof:$P,_payload:{_status:-1,_result:n},_init:GP}};at.memo=function(n,t){return{$$typeof:VP,type:n,compare:t===void 0?null:t}};at.startTransition=function(n){var t=Bp.transition;Bp.transition={};try{n()}finally{Bp.transition=t}};at.unstable_act=sE;at.useCallback=function(n,t){return on.current.useCallback(n,t)};at.useContext=function(n){return on.current.useContext(n)};at.useDebugValue=function(){};at.useDeferredValue=function(n){return on.current.useDeferredValue(n)};at.useEffect=function(n,t){return on.current.useEffect(n,t)};at.useId=function(){return on.current.useId()};at.useImperativeHandle=function(n,t,e){return on.current.useImperativeHandle(n,t,e)};at.useInsertionEffect=function(n,t){return on.current.useInsertionEffect(n,t)};at.useLayoutEffect=function(n,t){return on.current.useLayoutEffect(n,t)};at.useMemo=function(n,t){return on.current.useMemo(n,t)};at.useReducer=function(n,t,e){return on.current.useReducer(n,t,e)};at.useRef=function(n){return on.current.useRef(n)};at.useState=function(n){return on.current.useState(n)};at.useSyncExternalStore=function(n,t,e){return on.current.useSyncExternalStore(n,t,e)};at.useTransition=function(){return on.current.useTransition()};at.version="18.3.1";YS.exports=at;var P=YS.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KP=P,qP=Symbol.for("react.element"),YP=Symbol.for("react.fragment"),QP=Object.prototype.hasOwnProperty,ZP=KP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JP={key:!0,ref:!0,__self:!0,__source:!0};function rE(n,t,e){var i,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)QP.call(t,i)&&!JP.hasOwnProperty(i)&&(s[i]=t[i]);if(n&&n.defaultProps)for(i in t=n.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:qP,type:n,key:r,ref:o,props:s,_owner:ZP.current}}Vg.Fragment=YP;Vg.jsx=rE;Vg.jsxs=rE;qS.exports=Vg;var g=qS.exports,oE={exports:{}},Wn={},aE={exports:{}},lE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(F,W){var K=F.length;F.push(W);t:for(;0<K;){var ut=K-1>>>1,ot=F[ut];if(0<s(ot,W))F[ut]=W,F[K]=ot,K=ut;else break t}}function e(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var W=F[0],K=F.pop();if(K!==W){F[0]=K;t:for(var ut=0,ot=F.length,St=ot>>>1;ut<St;){var ln=2*(ut+1)-1,Xn=F[ln],De=ln+1,At=F[De];if(0>s(Xn,K))De<ot&&0>s(At,Xn)?(F[ut]=At,F[De]=K,ut=De):(F[ut]=Xn,F[ln]=K,ut=ln);else if(De<ot&&0>s(At,K))F[ut]=At,F[De]=K,ut=De;else break t}}return W}function s(F,W){var K=F.sortIndex-W.sortIndex;return K!==0?K:F.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,p=!1,y=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var W=e(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=F)i(u),W.sortIndex=W.expirationTime,t(l,W);else break;W=e(u)}}function C(F){if(x=!1,b(F),!y)if(e(l)!==null)y=!0,$(k);else{var W=e(u);W!==null&&O(C,W.startTime-F)}}function k(F,W){y=!1,x&&(x=!1,m(M),M=-1),p=!0;var K=f;try{for(b(W),d=e(l);d!==null&&(!(d.expirationTime>W)||F&&!I());){var ut=d.callback;if(typeof ut=="function"){d.callback=null,f=d.priorityLevel;var ot=ut(d.expirationTime<=W);W=n.unstable_now(),typeof ot=="function"?d.callback=ot:d===e(l)&&i(l),b(W)}else i(l);d=e(l)}if(d!==null)var St=!0;else{var ln=e(u);ln!==null&&O(C,ln.startTime-W),St=!1}return St}finally{d=null,f=K,p=!1}}var _=!1,T=null,M=-1,R=5,N=-1;function I(){return!(n.unstable_now()-N<R)}function et(){if(T!==null){var F=n.unstable_now();N=F;var W=!0;try{W=T(!0,F)}finally{W?lt():(_=!1,T=null)}}else _=!1}var lt;if(typeof w=="function")lt=function(){w(et)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Yt=J.port2;J.port1.onmessage=et,lt=function(){Yt.postMessage(null)}}else lt=function(){A(et,0)};function $(F){T=F,_||(_=!0,lt())}function O(F,W){M=A(function(){F(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,$(k))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return e(l)},n.unstable_next=function(F){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var K=f;f=W;try{return F()}finally{f=K}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,W){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var K=f;f=F;try{return W()}finally{f=K}},n.unstable_scheduleCallback=function(F,W,K){var ut=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ut+K:ut):K=ut,F){case 1:var ot=-1;break;case 2:ot=250;break;case 5:ot=1073741823;break;case 4:ot=1e4;break;default:ot=5e3}return ot=K+ot,F={id:h++,callback:W,priorityLevel:F,startTime:K,expirationTime:ot,sortIndex:-1},K>ut?(F.sortIndex=K,t(u,F),e(l)===null&&F===e(u)&&(x?(m(M),M=-1):x=!0,O(C,K-ut))):(F.sortIndex=ot,t(l,F),y||p||(y=!0,$(k))),F},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(F){var W=f;return function(){var K=f;f=W;try{return F.apply(this,arguments)}finally{f=K}}}})(lE);aE.exports=lE;var tM=aE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eM=P,Un=tM;function D(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cE=new Set,Dh={};function bl(n,t){vu(n,t),vu(n+"Capture",t)}function vu(n,t){for(Dh[n]=t,n=0;n<t.length;n++)cE.add(t[n])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gy=Object.prototype.hasOwnProperty,nM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qw={},Zw={};function iM(n){return gy.call(Zw,n)?!0:gy.call(Qw,n)?!1:nM.test(n)?Zw[n]=!0:(Qw[n]=!0,!1)}function sM(n,t,e,i){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function rM(n,t,e,i){if(t===null||typeof t>"u"||sM(n,t,e,i))return!0;if(i)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function an(n,t,e,i,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ie[n]=new an(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];Ie[t]=new an(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ie[n]=new an(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ie[n]=new an(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ie[n]=new an(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ie[n]=new an(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ie[n]=new an(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ie[n]=new an(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ie[n]=new an(n,5,!1,n.toLowerCase(),null,!1,!1)});var Jx=/[\-:]([a-z])/g;function t1(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(Jx,t1);Ie[t]=new an(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(Jx,t1);Ie[t]=new an(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(Jx,t1);Ie[t]=new an(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ie[n]=new an(n,1,!1,n.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ie[n]=new an(n,1,!1,n.toLowerCase(),null,!0,!0)});function e1(n,t,e,i){var s=Ie.hasOwnProperty(t)?Ie[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(rM(t,e,s,i)&&(e=null),i||s===null?iM(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):s.mustUseProperty?n[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,i=s.attributeNamespace,e===null?n.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,i?n.setAttributeNS(i,t,e):n.setAttribute(t,e))))}var br=eM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,op=Symbol.for("react.element"),Dl=Symbol.for("react.portal"),jl=Symbol.for("react.fragment"),n1=Symbol.for("react.strict_mode"),yy=Symbol.for("react.profiler"),uE=Symbol.for("react.provider"),hE=Symbol.for("react.context"),i1=Symbol.for("react.forward_ref"),vy=Symbol.for("react.suspense"),xy=Symbol.for("react.suspense_list"),s1=Symbol.for("react.memo"),kr=Symbol.for("react.lazy"),dE=Symbol.for("react.offscreen"),Jw=Symbol.iterator;function Fu(n){return n===null||typeof n!="object"?null:(n=Jw&&n[Jw]||n["@@iterator"],typeof n=="function"?n:null)}var Vt=Object.assign,w0;function Qu(n){if(w0===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);w0=t&&t[1]||""}return`
`+w0+n}var b0=!1;function A0(n,t){if(!n||b0)return"";b0=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){i=u}n.call(t.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{b0=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?Qu(n):""}function oM(n){switch(n.tag){case 5:return Qu(n.type);case 16:return Qu("Lazy");case 13:return Qu("Suspense");case 19:return Qu("SuspenseList");case 0:case 2:case 15:return n=A0(n.type,!1),n;case 11:return n=A0(n.type.render,!1),n;case 1:return n=A0(n.type,!0),n;default:return""}}function wy(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case jl:return"Fragment";case Dl:return"Portal";case yy:return"Profiler";case n1:return"StrictMode";case vy:return"Suspense";case xy:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case hE:return(n.displayName||"Context")+".Consumer";case uE:return(n._context.displayName||"Context")+".Provider";case i1:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case s1:return t=n.displayName||null,t!==null?t:wy(n.type)||"Memo";case kr:t=n._payload,n=n._init;try{return wy(n(t))}catch{}}return null}function aM(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wy(t);case 8:return t===n1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mo(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fE(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lM(n){var t=fE(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function ap(n){n._valueTracker||(n._valueTracker=lM(n))}function pE(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=fE(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function Lm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function by(n,t){var e=t.checked;return Vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function tb(n,t){var e=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;e=Mo(t.value!=null?t.value:e),n._wrapperState={initialChecked:i,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mE(n,t){t=t.checked,t!=null&&e1(n,"checked",t,!1)}function Ay(n,t){mE(n,t);var e=Mo(t.value),i=t.type;if(e!=null)i==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?Sy(n,t.type,e):t.hasOwnProperty("defaultValue")&&Sy(n,t.type,Mo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function eb(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function Sy(n,t,e){(t!=="number"||Lm(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var Zu=Array.isArray;function ec(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Mo(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function Ey(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Vt({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nb(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(D(92));if(Zu(e)){if(1<e.length)throw Error(D(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:Mo(e)}}function gE(n,t){var e=Mo(t.value),i=Mo(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),i!=null&&(n.defaultValue=""+i)}function ib(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function yE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cy(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?yE(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var lp,vE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,i,s){MSApp.execUnsafeLocalFunction(function(){return n(t,e,i,s)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(lp=lp||document.createElement("div"),lp.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function jh(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var bh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cM=["Webkit","ms","Moz","O"];Object.keys(bh).forEach(function(n){cM.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),bh[t]=bh[n]})});function xE(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||bh.hasOwnProperty(n)&&bh[n]?(""+t).trim():t+"px"}function wE(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var i=e.indexOf("--")===0,s=xE(e,t[e],i);e==="float"&&(e="cssFloat"),i?n.setProperty(e,s):n[e]=s}}var uM=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ky(n,t){if(t){if(uM[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function _y(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ty=null;function r1(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Py=null,nc=null,ic=null;function sb(n){if(n=Vf(n)){if(typeof Py!="function")throw Error(D(280));var t=n.stateNode;t&&(t=Gg(t),Py(n.stateNode,n.type,t))}}function bE(n){nc?ic?ic.push(n):ic=[n]:nc=n}function AE(){if(nc){var n=nc,t=ic;if(ic=nc=null,sb(n),t)for(n=0;n<t.length;n++)sb(t[n])}}function SE(n,t){return n(t)}function EE(){}var S0=!1;function CE(n,t,e){if(S0)return n(t,e);S0=!0;try{return SE(n,t,e)}finally{S0=!1,(nc!==null||ic!==null)&&(EE(),AE())}}function Fh(n,t){var e=n.stateNode;if(e===null)return null;var i=Gg(e);if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(D(231,t,typeof e));return e}var My=!1;if(fr)try{var Ou={};Object.defineProperty(Ou,"passive",{get:function(){My=!0}}),window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{My=!1}function hM(n,t,e,i,s,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(h){this.onError(h)}}var Ah=!1,Im=null,Dm=!1,Ry=null,dM={onError:function(n){Ah=!0,Im=n}};function fM(n,t,e,i,s,r,o,a,l){Ah=!1,Im=null,hM.apply(dM,arguments)}function pM(n,t,e,i,s,r,o,a,l){if(fM.apply(this,arguments),Ah){if(Ah){var u=Im;Ah=!1,Im=null}else throw Error(D(198));Dm||(Dm=!0,Ry=u)}}function Al(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function kE(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function rb(n){if(Al(n)!==n)throw Error(D(188))}function mM(n){var t=n.alternate;if(!t){if(t=Al(n),t===null)throw Error(D(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return rb(s),n;if(r===i)return rb(s),t;r=r.sibling}throw Error(D(188))}if(e.return!==i.return)e=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===e){o=!0,e=s,i=r;break}if(a===i){o=!0,i=s,e=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===e){o=!0,e=r,i=s;break}if(a===i){o=!0,i=r,e=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(e.alternate!==i)throw Error(D(190))}if(e.tag!==3)throw Error(D(188));return e.stateNode.current===e?n:t}function _E(n){return n=mM(n),n!==null?TE(n):null}function TE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=TE(n);if(t!==null)return t;n=n.sibling}return null}var PE=Un.unstable_scheduleCallback,ob=Un.unstable_cancelCallback,gM=Un.unstable_shouldYield,yM=Un.unstable_requestPaint,Kt=Un.unstable_now,vM=Un.unstable_getCurrentPriorityLevel,o1=Un.unstable_ImmediatePriority,ME=Un.unstable_UserBlockingPriority,jm=Un.unstable_NormalPriority,xM=Un.unstable_LowPriority,RE=Un.unstable_IdlePriority,$g=null,hs=null;function wM(n){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot($g,n,void 0,(n.current.flags&128)===128)}catch{}}var Di=Math.clz32?Math.clz32:SM,bM=Math.log,AM=Math.LN2;function SM(n){return n>>>=0,n===0?32:31-(bM(n)/AM|0)|0}var cp=64,up=4194304;function Ju(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Fm(n,t){var e=n.pendingLanes;if(e===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var a=o&~s;a!==0?i=Ju(a):(r&=o,r!==0&&(i=Ju(r)))}else o=e&~s,o!==0?i=Ju(o):r!==0&&(i=Ju(r));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(i&4&&(i|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=i;0<t;)e=31-Di(t),s=1<<e,i|=n[e],t&=~s;return i}function EM(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CM(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-Di(r),a=1<<o,l=s[o];l===-1?(!(a&e)||a&i)&&(s[o]=EM(a,t)):l<=t&&(n.expiredLanes|=a),r&=~a}}function Ny(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function NE(){var n=cp;return cp<<=1,!(cp&4194240)&&(cp=64),n}function E0(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function Bf(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-Di(t),n[t]=e}function kM(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<e;){var s=31-Di(e),r=1<<s;t[s]=0,i[s]=-1,n[s]=-1,e&=~r}}function a1(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-Di(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}var vt=0;function LE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var IE,l1,DE,jE,FE,Ly=!1,hp=[],Ao=null,So=null,Eo=null,Oh=new Map,Bh=new Map,Tr=[],_M="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ab(n,t){switch(n){case"focusin":case"focusout":Ao=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Oh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(t.pointerId)}}function Bu(n,t,e,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Vf(t),t!==null&&l1(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function TM(n,t,e,i,s){switch(t){case"focusin":return Ao=Bu(Ao,n,t,e,i,s),!0;case"dragenter":return So=Bu(So,n,t,e,i,s),!0;case"mouseover":return Eo=Bu(Eo,n,t,e,i,s),!0;case"pointerover":var r=s.pointerId;return Oh.set(r,Bu(Oh.get(r)||null,n,t,e,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Bh.set(r,Bu(Bh.get(r)||null,n,t,e,i,s)),!0}return!1}function OE(n){var t=Jo(n.target);if(t!==null){var e=Al(t);if(e!==null){if(t=e.tag,t===13){if(t=kE(e),t!==null){n.blockedOn=t,FE(n.priority,function(){DE(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function zp(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Iy(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);Ty=i,e.target.dispatchEvent(i),Ty=null}else return t=Vf(e),t!==null&&l1(t),n.blockedOn=e,!1;t.shift()}return!0}function lb(n,t,e){zp(n)&&e.delete(t)}function PM(){Ly=!1,Ao!==null&&zp(Ao)&&(Ao=null),So!==null&&zp(So)&&(So=null),Eo!==null&&zp(Eo)&&(Eo=null),Oh.forEach(lb),Bh.forEach(lb)}function zu(n,t){n.blockedOn===t&&(n.blockedOn=null,Ly||(Ly=!0,Un.unstable_scheduleCallback(Un.unstable_NormalPriority,PM)))}function zh(n){function t(s){return zu(s,n)}if(0<hp.length){zu(hp[0],n);for(var e=1;e<hp.length;e++){var i=hp[e];i.blockedOn===n&&(i.blockedOn=null)}}for(Ao!==null&&zu(Ao,n),So!==null&&zu(So,n),Eo!==null&&zu(Eo,n),Oh.forEach(t),Bh.forEach(t),e=0;e<Tr.length;e++)i=Tr[e],i.blockedOn===n&&(i.blockedOn=null);for(;0<Tr.length&&(e=Tr[0],e.blockedOn===null);)OE(e),e.blockedOn===null&&Tr.shift()}var sc=br.ReactCurrentBatchConfig,Om=!0;function MM(n,t,e,i){var s=vt,r=sc.transition;sc.transition=null;try{vt=1,c1(n,t,e,i)}finally{vt=s,sc.transition=r}}function RM(n,t,e,i){var s=vt,r=sc.transition;sc.transition=null;try{vt=4,c1(n,t,e,i)}finally{vt=s,sc.transition=r}}function c1(n,t,e,i){if(Om){var s=Iy(n,t,e,i);if(s===null)I0(n,t,i,Bm,e),ab(n,i);else if(TM(s,n,t,e,i))i.stopPropagation();else if(ab(n,i),t&4&&-1<_M.indexOf(n)){for(;s!==null;){var r=Vf(s);if(r!==null&&IE(r),r=Iy(n,t,e,i),r===null&&I0(n,t,i,Bm,e),r===s)break;s=r}s!==null&&i.stopPropagation()}else I0(n,t,i,null,e)}}var Bm=null;function Iy(n,t,e,i){if(Bm=null,n=r1(i),n=Jo(n),n!==null)if(t=Al(n),t===null)n=null;else if(e=t.tag,e===13){if(n=kE(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return Bm=n,null}function BE(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vM()){case o1:return 1;case ME:return 4;case jm:case xM:return 16;case RE:return 536870912;default:return 16}default:return 16}}var wo=null,u1=null,Vp=null;function zE(){if(Vp)return Vp;var n,t=u1,e=t.length,i,s="value"in wo?wo.value:wo.textContent,r=s.length;for(n=0;n<e&&t[n]===s[n];n++);var o=e-n;for(i=1;i<=o&&t[e-i]===s[r-i];i++);return Vp=s.slice(n,1<i?1-i:void 0)}function $p(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function dp(){return!0}function cb(){return!1}function Gn(n){function t(e,i,s,r,o){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(e=n[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?dp:cb,this.isPropagationStopped=cb,this}return Vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=dp)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=dp)},persist:function(){},isPersistent:dp}),t}var Pu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h1=Gn(Pu),zf=Vt({},Pu,{view:0,detail:0}),NM=Gn(zf),C0,k0,Vu,Hg=Vt({},zf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:d1,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vu&&(Vu&&n.type==="mousemove"?(C0=n.screenX-Vu.screenX,k0=n.screenY-Vu.screenY):k0=C0=0,Vu=n),C0)},movementY:function(n){return"movementY"in n?n.movementY:k0}}),ub=Gn(Hg),LM=Vt({},Hg,{dataTransfer:0}),IM=Gn(LM),DM=Vt({},zf,{relatedTarget:0}),_0=Gn(DM),jM=Vt({},Pu,{animationName:0,elapsedTime:0,pseudoElement:0}),FM=Gn(jM),OM=Vt({},Pu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),BM=Gn(OM),zM=Vt({},Pu,{data:0}),hb=Gn(zM),VM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$M={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UM(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=HM[n])?!!t[n]:!1}function d1(){return UM}var WM=Vt({},zf,{key:function(n){if(n.key){var t=VM[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=$p(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?$M[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:d1,charCode:function(n){return n.type==="keypress"?$p(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?$p(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),GM=Gn(WM),XM=Vt({},Hg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),db=Gn(XM),KM=Vt({},zf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:d1}),qM=Gn(KM),YM=Vt({},Pu,{propertyName:0,elapsedTime:0,pseudoElement:0}),QM=Gn(YM),ZM=Vt({},Hg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),JM=Gn(ZM),tR=[9,13,27,32],f1=fr&&"CompositionEvent"in window,Sh=null;fr&&"documentMode"in document&&(Sh=document.documentMode);var eR=fr&&"TextEvent"in window&&!Sh,VE=fr&&(!f1||Sh&&8<Sh&&11>=Sh),fb=" ",pb=!1;function $E(n,t){switch(n){case"keyup":return tR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HE(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fl=!1;function nR(n,t){switch(n){case"compositionend":return HE(t);case"keypress":return t.which!==32?null:(pb=!0,fb);case"textInput":return n=t.data,n===fb&&pb?null:n;default:return null}}function iR(n,t){if(Fl)return n==="compositionend"||!f1&&$E(n,t)?(n=zE(),Vp=u1=wo=null,Fl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return VE&&t.locale!=="ko"?null:t.data;default:return null}}var sR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!sR[n.type]:t==="textarea"}function UE(n,t,e,i){bE(i),t=zm(t,"onChange"),0<t.length&&(e=new h1("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var Eh=null,Vh=null;function rR(n){eC(n,0)}function Ug(n){var t=zl(n);if(pE(t))return n}function oR(n,t){if(n==="change")return t}var WE=!1;if(fr){var T0;if(fr){var P0="oninput"in document;if(!P0){var gb=document.createElement("div");gb.setAttribute("oninput","return;"),P0=typeof gb.oninput=="function"}T0=P0}else T0=!1;WE=T0&&(!document.documentMode||9<document.documentMode)}function yb(){Eh&&(Eh.detachEvent("onpropertychange",GE),Vh=Eh=null)}function GE(n){if(n.propertyName==="value"&&Ug(Vh)){var t=[];UE(t,Vh,n,r1(n)),CE(rR,t)}}function aR(n,t,e){n==="focusin"?(yb(),Eh=t,Vh=e,Eh.attachEvent("onpropertychange",GE)):n==="focusout"&&yb()}function lR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ug(Vh)}function cR(n,t){if(n==="click")return Ug(t)}function uR(n,t){if(n==="input"||n==="change")return Ug(t)}function hR(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Fi=typeof Object.is=="function"?Object.is:hR;function $h(n,t){if(Fi(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!gy.call(t,s)||!Fi(n[s],t[s]))return!1}return!0}function vb(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function xb(n,t){var e=vb(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=vb(e)}}function XE(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?XE(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function KE(){for(var n=window,t=Lm();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=Lm(n.document)}return t}function p1(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function dR(n){var t=KE(),e=n.focusedElem,i=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&XE(e.ownerDocument.documentElement,e)){if(i!==null&&p1(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=xb(e,r);var o=xb(e,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var fR=fr&&"documentMode"in document&&11>=document.documentMode,Ol=null,Dy=null,Ch=null,jy=!1;function wb(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;jy||Ol==null||Ol!==Lm(i)||(i=Ol,"selectionStart"in i&&p1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ch&&$h(Ch,i)||(Ch=i,i=zm(Dy,"onSelect"),0<i.length&&(t=new h1("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Ol)))}function fp(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Bl={animationend:fp("Animation","AnimationEnd"),animationiteration:fp("Animation","AnimationIteration"),animationstart:fp("Animation","AnimationStart"),transitionend:fp("Transition","TransitionEnd")},M0={},qE={};fr&&(qE=document.createElement("div").style,"AnimationEvent"in window||(delete Bl.animationend.animation,delete Bl.animationiteration.animation,delete Bl.animationstart.animation),"TransitionEvent"in window||delete Bl.transitionend.transition);function Wg(n){if(M0[n])return M0[n];if(!Bl[n])return n;var t=Bl[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in qE)return M0[n]=t[e];return n}var YE=Wg("animationend"),QE=Wg("animationiteration"),ZE=Wg("animationstart"),JE=Wg("transitionend"),tC=new Map,bb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bo(n,t){tC.set(n,t),bl(t,[n])}for(var R0=0;R0<bb.length;R0++){var N0=bb[R0],pR=N0.toLowerCase(),mR=N0[0].toUpperCase()+N0.slice(1);Bo(pR,"on"+mR)}Bo(YE,"onAnimationEnd");Bo(QE,"onAnimationIteration");Bo(ZE,"onAnimationStart");Bo("dblclick","onDoubleClick");Bo("focusin","onFocus");Bo("focusout","onBlur");Bo(JE,"onTransitionEnd");vu("onMouseEnter",["mouseout","mouseover"]);vu("onMouseLeave",["mouseout","mouseover"]);vu("onPointerEnter",["pointerout","pointerover"]);vu("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gR=new Set("cancel close invalid load scroll toggle".split(" ").concat(th));function Ab(n,t,e){var i=n.type||"unknown-event";n.currentTarget=e,pM(i,t,void 0,n),n.currentTarget=null}function eC(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;Ab(s,a,u),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;Ab(s,a,u),r=l}}}if(Dm)throw n=Ry,Dm=!1,Ry=null,n}function _t(n,t){var e=t[Vy];e===void 0&&(e=t[Vy]=new Set);var i=n+"__bubble";e.has(i)||(nC(t,n,2,!1),e.add(i))}function L0(n,t,e){var i=0;t&&(i|=4),nC(e,n,i,t)}var pp="_reactListening"+Math.random().toString(36).slice(2);function Hh(n){if(!n[pp]){n[pp]=!0,cE.forEach(function(e){e!=="selectionchange"&&(gR.has(e)||L0(e,!1,n),L0(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[pp]||(t[pp]=!0,L0("selectionchange",!1,t))}}function nC(n,t,e,i){switch(BE(t)){case 1:var s=MM;break;case 4:s=RM;break;default:s=c1}e=s.bind(null,t,e,n),s=void 0,!My||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function I0(n,t,e,i,s){var r=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Jo(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue t}a=a.parentNode}}i=i.return}CE(function(){var u=r,h=r1(e),d=[];t:{var f=tC.get(n);if(f!==void 0){var p=h1,y=n;switch(n){case"keypress":if($p(e)===0)break t;case"keydown":case"keyup":p=GM;break;case"focusin":y="focus",p=_0;break;case"focusout":y="blur",p=_0;break;case"beforeblur":case"afterblur":p=_0;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ub;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=IM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=qM;break;case YE:case QE:case ZE:p=FM;break;case JE:p=QM;break;case"scroll":p=NM;break;case"wheel":p=JM;break;case"copy":case"cut":case"paste":p=BM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=db}var x=(t&4)!==0,A=!x&&n==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var w=u,b;w!==null;){b=w;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,m!==null&&(C=Fh(w,m),C!=null&&x.push(Uh(w,C,b)))),A)break;w=w.return}0<x.length&&(f=new p(f,y,null,e,h),d.push({event:f,listeners:x}))}}if(!(t&7)){t:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&e!==Ty&&(y=e.relatedTarget||e.fromElement)&&(Jo(y)||y[pr]))break t;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=e.relatedTarget||e.toElement,p=u,y=y?Jo(y):null,y!==null&&(A=Al(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(x=ub,C="onMouseLeave",m="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(x=db,C="onPointerLeave",m="onPointerEnter",w="pointer"),A=p==null?f:zl(p),b=y==null?f:zl(y),f=new x(C,w+"leave",p,e,h),f.target=A,f.relatedTarget=b,C=null,Jo(h)===u&&(x=new x(m,w+"enter",y,e,h),x.target=b,x.relatedTarget=A,C=x),A=C,p&&y)e:{for(x=p,m=y,w=0,b=x;b;b=kl(b))w++;for(b=0,C=m;C;C=kl(C))b++;for(;0<w-b;)x=kl(x),w--;for(;0<b-w;)m=kl(m),b--;for(;w--;){if(x===m||m!==null&&x===m.alternate)break e;x=kl(x),m=kl(m)}x=null}else x=null;p!==null&&Sb(d,f,p,x,!1),y!==null&&A!==null&&Sb(d,A,y,x,!0)}}t:{if(f=u?zl(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=oR;else if(mb(f))if(WE)k=uR;else{k=lR;var _=aR}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=cR);if(k&&(k=k(n,u))){UE(d,k,e,h);break t}_&&_(n,f,u),n==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Sy(f,"number",f.value)}switch(_=u?zl(u):window,n){case"focusin":(mb(_)||_.contentEditable==="true")&&(Ol=_,Dy=u,Ch=null);break;case"focusout":Ch=Dy=Ol=null;break;case"mousedown":jy=!0;break;case"contextmenu":case"mouseup":case"dragend":jy=!1,wb(d,e,h);break;case"selectionchange":if(fR)break;case"keydown":case"keyup":wb(d,e,h)}var T;if(f1)t:{switch(n){case"compositionstart":var M="onCompositionStart";break t;case"compositionend":M="onCompositionEnd";break t;case"compositionupdate":M="onCompositionUpdate";break t}M=void 0}else Fl?$E(n,e)&&(M="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(M="onCompositionStart");M&&(VE&&e.locale!=="ko"&&(Fl||M!=="onCompositionStart"?M==="onCompositionEnd"&&Fl&&(T=zE()):(wo=h,u1="value"in wo?wo.value:wo.textContent,Fl=!0)),_=zm(u,M),0<_.length&&(M=new hb(M,n,null,e,h),d.push({event:M,listeners:_}),T?M.data=T:(T=HE(e),T!==null&&(M.data=T)))),(T=eR?nR(n,e):iR(n,e))&&(u=zm(u,"onBeforeInput"),0<u.length&&(h=new hb("onBeforeInput","beforeinput",null,e,h),d.push({event:h,listeners:u}),h.data=T))}eC(d,t)})}function Uh(n,t,e){return{instance:n,listener:t,currentTarget:e}}function zm(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Fh(n,e),r!=null&&i.unshift(Uh(n,r,s)),r=Fh(n,t),r!=null&&i.push(Uh(n,r,s))),n=n.return}return i}function kl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Sb(n,t,e,i,s){for(var r=t._reactName,o=[];e!==null&&e!==i;){var a=e,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,s?(l=Fh(e,r),l!=null&&o.unshift(Uh(e,l,a))):s||(l=Fh(e,r),l!=null&&o.push(Uh(e,l,a)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var yR=/\r\n?/g,vR=/\u0000|\uFFFD/g;function Eb(n){return(typeof n=="string"?n:""+n).replace(yR,`
`).replace(vR,"")}function mp(n,t,e){if(t=Eb(t),Eb(n)!==t&&e)throw Error(D(425))}function Vm(){}var Fy=null,Oy=null;function By(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zy=typeof setTimeout=="function"?setTimeout:void 0,xR=typeof clearTimeout=="function"?clearTimeout:void 0,Cb=typeof Promise=="function"?Promise:void 0,wR=typeof queueMicrotask=="function"?queueMicrotask:typeof Cb<"u"?function(n){return Cb.resolve(null).then(n).catch(bR)}:zy;function bR(n){setTimeout(function(){throw n})}function D0(n,t){var e=t,i=0;do{var s=e.nextSibling;if(n.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(i===0){n.removeChild(s),zh(t);return}i--}else e!=="$"&&e!=="$?"&&e!=="$!"||i++;e=s}while(e);zh(t)}function Co(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function kb(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var Mu=Math.random().toString(36).slice(2),us="__reactFiber$"+Mu,Wh="__reactProps$"+Mu,pr="__reactContainer$"+Mu,Vy="__reactEvents$"+Mu,AR="__reactListeners$"+Mu,SR="__reactHandles$"+Mu;function Jo(n){var t=n[us];if(t)return t;for(var e=n.parentNode;e;){if(t=e[pr]||e[us]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=kb(n);n!==null;){if(e=n[us])return e;n=kb(n)}return t}n=e,e=n.parentNode}return null}function Vf(n){return n=n[us]||n[pr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function zl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(D(33))}function Gg(n){return n[Wh]||null}var $y=[],Vl=-1;function zo(n){return{current:n}}function Tt(n){0>Vl||(n.current=$y[Vl],$y[Vl]=null,Vl--)}function Ct(n,t){Vl++,$y[Vl]=n.current,n.current=t}var Ro={},We=zo(Ro),vn=zo(!1),fl=Ro;function xu(n,t){var e=n.type.contextTypes;if(!e)return Ro;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=s),s}function xn(n){return n=n.childContextTypes,n!=null}function $m(){Tt(vn),Tt(We)}function _b(n,t,e){if(We.current!==Ro)throw Error(D(168));Ct(We,t),Ct(vn,e)}function iC(n,t,e){var i=n.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return e;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(D(108,aM(n)||"Unknown",s));return Vt({},e,i)}function Hm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ro,fl=We.current,Ct(We,n),Ct(vn,vn.current),!0}function Tb(n,t,e){var i=n.stateNode;if(!i)throw Error(D(169));e?(n=iC(n,t,fl),i.__reactInternalMemoizedMergedChildContext=n,Tt(vn),Tt(We),Ct(We,n)):Tt(vn),Ct(vn,e)}var _s=null,Xg=!1,j0=!1;function sC(n){_s===null?_s=[n]:_s.push(n)}function ER(n){Xg=!0,sC(n)}function Vo(){if(!j0&&_s!==null){j0=!0;var n=0,t=vt;try{var e=_s;for(vt=1;n<e.length;n++){var i=e[n];do i=i(!0);while(i!==null)}_s=null,Xg=!1}catch(s){throw _s!==null&&(_s=_s.slice(n+1)),PE(o1,Vo),s}finally{vt=t,j0=!1}}return null}var $l=[],Hl=0,Um=null,Wm=0,oi=[],ai=0,pl=null,ar=1,lr="";function Uo(n,t){$l[Hl++]=Wm,$l[Hl++]=Um,Um=n,Wm=t}function rC(n,t,e){oi[ai++]=ar,oi[ai++]=lr,oi[ai++]=pl,pl=n;var i=ar;n=lr;var s=32-Di(i)-1;i&=~(1<<s),e+=1;var r=32-Di(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ar=1<<32-Di(t)+s|e<<s|i,lr=r+n}else ar=1<<r|e<<s|i,lr=n}function m1(n){n.return!==null&&(Uo(n,1),rC(n,1,0))}function g1(n){for(;n===Um;)Um=$l[--Hl],$l[Hl]=null,Wm=$l[--Hl],$l[Hl]=null;for(;n===pl;)pl=oi[--ai],oi[ai]=null,lr=oi[--ai],oi[ai]=null,ar=oi[--ai],oi[ai]=null}var $n=null,Vn=null,Lt=!1,Ni=null;function oC(n,t){var e=ci(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function Pb(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,$n=n,Vn=Co(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,$n=n,Vn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=pl!==null?{id:ar,overflow:lr}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=ci(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,$n=n,Vn=null,!0):!1;default:return!1}}function Hy(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Uy(n){if(Lt){var t=Vn;if(t){var e=t;if(!Pb(n,t)){if(Hy(n))throw Error(D(418));t=Co(e.nextSibling);var i=$n;t&&Pb(n,t)?oC(i,e):(n.flags=n.flags&-4097|2,Lt=!1,$n=n)}}else{if(Hy(n))throw Error(D(418));n.flags=n.flags&-4097|2,Lt=!1,$n=n}}}function Mb(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;$n=n}function gp(n){if(n!==$n)return!1;if(!Lt)return Mb(n),Lt=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!By(n.type,n.memoizedProps)),t&&(t=Vn)){if(Hy(n))throw aC(),Error(D(418));for(;t;)oC(n,t),t=Co(t.nextSibling)}if(Mb(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(D(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Vn=Co(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Vn=null}}else Vn=$n?Co(n.stateNode.nextSibling):null;return!0}function aC(){for(var n=Vn;n;)n=Co(n.nextSibling)}function wu(){Vn=$n=null,Lt=!1}function y1(n){Ni===null?Ni=[n]:Ni.push(n)}var CR=br.ReactCurrentBatchConfig;function $u(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(D(309));var i=e.stateNode}if(!i)throw Error(D(147,n));var s=i,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(D(284));if(!e._owner)throw Error(D(290,n))}return n}function yp(n,t){throw n=Object.prototype.toString.call(t),Error(D(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function Rb(n){var t=n._init;return t(n._payload)}function lC(n){function t(m,w){if(n){var b=m.deletions;b===null?(m.deletions=[w],m.flags|=16):b.push(w)}}function e(m,w){if(!n)return null;for(;w!==null;)t(m,w),w=w.sibling;return null}function i(m,w){for(m=new Map;w!==null;)w.key!==null?m.set(w.key,w):m.set(w.index,w),w=w.sibling;return m}function s(m,w){return m=Po(m,w),m.index=0,m.sibling=null,m}function r(m,w,b){return m.index=b,n?(b=m.alternate,b!==null?(b=b.index,b<w?(m.flags|=2,w):b):(m.flags|=2,w)):(m.flags|=1048576,w)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,w,b,C){return w===null||w.tag!==6?(w=H0(b,m.mode,C),w.return=m,w):(w=s(w,b),w.return=m,w)}function l(m,w,b,C){var k=b.type;return k===jl?h(m,w,b.props.children,C,b.key):w!==null&&(w.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===kr&&Rb(k)===w.type)?(C=s(w,b.props),C.ref=$u(m,w,b),C.return=m,C):(C=qp(b.type,b.key,b.props,null,m.mode,C),C.ref=$u(m,w,b),C.return=m,C)}function u(m,w,b,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=U0(b,m.mode,C),w.return=m,w):(w=s(w,b.children||[]),w.return=m,w)}function h(m,w,b,C,k){return w===null||w.tag!==7?(w=ul(b,m.mode,C,k),w.return=m,w):(w=s(w,b),w.return=m,w)}function d(m,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=H0(""+w,m.mode,b),w.return=m,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case op:return b=qp(w.type,w.key,w.props,null,m.mode,b),b.ref=$u(m,null,w),b.return=m,b;case Dl:return w=U0(w,m.mode,b),w.return=m,w;case kr:var C=w._init;return d(m,C(w._payload),b)}if(Zu(w)||Fu(w))return w=ul(w,m.mode,b,null),w.return=m,w;yp(m,w)}return null}function f(m,w,b,C){var k=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:a(m,w,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case op:return b.key===k?l(m,w,b,C):null;case Dl:return b.key===k?u(m,w,b,C):null;case kr:return k=b._init,f(m,w,k(b._payload),C)}if(Zu(b)||Fu(b))return k!==null?null:h(m,w,b,C,null);yp(m,b)}return null}function p(m,w,b,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(b)||null,a(w,m,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case op:return m=m.get(C.key===null?b:C.key)||null,l(w,m,C,k);case Dl:return m=m.get(C.key===null?b:C.key)||null,u(w,m,C,k);case kr:var _=C._init;return p(m,w,b,_(C._payload),k)}if(Zu(C)||Fu(C))return m=m.get(b)||null,h(w,m,C,k,null);yp(w,C)}return null}function y(m,w,b,C){for(var k=null,_=null,T=w,M=w=0,R=null;T!==null&&M<b.length;M++){T.index>M?(R=T,T=null):R=T.sibling;var N=f(m,T,b[M],C);if(N===null){T===null&&(T=R);break}n&&T&&N.alternate===null&&t(m,T),w=r(N,w,M),_===null?k=N:_.sibling=N,_=N,T=R}if(M===b.length)return e(m,T),Lt&&Uo(m,M),k;if(T===null){for(;M<b.length;M++)T=d(m,b[M],C),T!==null&&(w=r(T,w,M),_===null?k=T:_.sibling=T,_=T);return Lt&&Uo(m,M),k}for(T=i(m,T);M<b.length;M++)R=p(T,m,M,b[M],C),R!==null&&(n&&R.alternate!==null&&T.delete(R.key===null?M:R.key),w=r(R,w,M),_===null?k=R:_.sibling=R,_=R);return n&&T.forEach(function(I){return t(m,I)}),Lt&&Uo(m,M),k}function x(m,w,b,C){var k=Fu(b);if(typeof k!="function")throw Error(D(150));if(b=k.call(b),b==null)throw Error(D(151));for(var _=k=null,T=w,M=w=0,R=null,N=b.next();T!==null&&!N.done;M++,N=b.next()){T.index>M?(R=T,T=null):R=T.sibling;var I=f(m,T,N.value,C);if(I===null){T===null&&(T=R);break}n&&T&&I.alternate===null&&t(m,T),w=r(I,w,M),_===null?k=I:_.sibling=I,_=I,T=R}if(N.done)return e(m,T),Lt&&Uo(m,M),k;if(T===null){for(;!N.done;M++,N=b.next())N=d(m,N.value,C),N!==null&&(w=r(N,w,M),_===null?k=N:_.sibling=N,_=N);return Lt&&Uo(m,M),k}for(T=i(m,T);!N.done;M++,N=b.next())N=p(T,m,M,N.value,C),N!==null&&(n&&N.alternate!==null&&T.delete(N.key===null?M:N.key),w=r(N,w,M),_===null?k=N:_.sibling=N,_=N);return n&&T.forEach(function(et){return t(m,et)}),Lt&&Uo(m,M),k}function A(m,w,b,C){if(typeof b=="object"&&b!==null&&b.type===jl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case op:t:{for(var k=b.key,_=w;_!==null;){if(_.key===k){if(k=b.type,k===jl){if(_.tag===7){e(m,_.sibling),w=s(_,b.props.children),w.return=m,m=w;break t}}else if(_.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===kr&&Rb(k)===_.type){e(m,_.sibling),w=s(_,b.props),w.ref=$u(m,_,b),w.return=m,m=w;break t}e(m,_);break}else t(m,_);_=_.sibling}b.type===jl?(w=ul(b.props.children,m.mode,C,b.key),w.return=m,m=w):(C=qp(b.type,b.key,b.props,null,m.mode,C),C.ref=$u(m,w,b),C.return=m,m=C)}return o(m);case Dl:t:{for(_=b.key;w!==null;){if(w.key===_)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){e(m,w.sibling),w=s(w,b.children||[]),w.return=m,m=w;break t}else{e(m,w);break}else t(m,w);w=w.sibling}w=U0(b,m.mode,C),w.return=m,m=w}return o(m);case kr:return _=b._init,A(m,w,_(b._payload),C)}if(Zu(b))return y(m,w,b,C);if(Fu(b))return x(m,w,b,C);yp(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(e(m,w.sibling),w=s(w,b),w.return=m,m=w):(e(m,w),w=H0(b,m.mode,C),w.return=m,m=w),o(m)):e(m,w)}return A}var bu=lC(!0),cC=lC(!1),Gm=zo(null),Xm=null,Ul=null,v1=null;function x1(){v1=Ul=Xm=null}function w1(n){var t=Gm.current;Tt(Gm),n._currentValue=t}function Wy(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function rc(n,t){Xm=n,v1=Ul=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(gn=!0),n.firstContext=null)}function fi(n){var t=n._currentValue;if(v1!==n)if(n={context:n,memoizedValue:t,next:null},Ul===null){if(Xm===null)throw Error(D(308));Ul=n,Xm.dependencies={lanes:0,firstContext:n}}else Ul=Ul.next=n;return t}var ta=null;function b1(n){ta===null?ta=[n]:ta.push(n)}function uC(n,t,e,i){var s=t.interleaved;return s===null?(e.next=e,b1(t)):(e.next=s.next,s.next=e),t.interleaved=e,mr(n,i)}function mr(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var _r=!1;function A1(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hC(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function cr(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function ko(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ht&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,mr(n,e)}return s=i.interleaved,s===null?(t.next=t,b1(i)):(t.next=s.next,s.next=t),i.interleaved=t,mr(n,e)}function Hp(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,a1(n,e)}}function Nb(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function Km(n,t,e,i){var s=n.updateQueue;_r=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(r!==null){var d=s.baseState;o=0,h=u=l=null,a=r;do{var f=a.lane,p=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var y=n,x=a;switch(f=t,p=e,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(p,d,f);break t}d=y;break t;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break t;d=Vt({},d,f);break t;case 2:_r=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=p,l=d):h=h.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);gl|=o,n.lanes=o,n.memoizedState=d}}function Lb(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var i=n[t],s=i.callback;if(s!==null){if(i.callback=null,i=e,typeof s!="function")throw Error(D(191,s));s.call(i)}}}var $f={},ds=zo($f),Gh=zo($f),Xh=zo($f);function ea(n){if(n===$f)throw Error(D(174));return n}function S1(n,t){switch(Ct(Xh,t),Ct(Gh,n),Ct(ds,$f),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cy(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=Cy(t,n)}Tt(ds),Ct(ds,t)}function Au(){Tt(ds),Tt(Gh),Tt(Xh)}function dC(n){ea(Xh.current);var t=ea(ds.current),e=Cy(t,n.type);t!==e&&(Ct(Gh,n),Ct(ds,e))}function E1(n){Gh.current===n&&(Tt(ds),Tt(Gh))}var Ft=zo(0);function qm(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var F0=[];function C1(){for(var n=0;n<F0.length;n++)F0[n]._workInProgressVersionPrimary=null;F0.length=0}var Up=br.ReactCurrentDispatcher,O0=br.ReactCurrentBatchConfig,ml=0,Bt=null,ce=null,xe=null,Ym=!1,kh=!1,Kh=0,kR=0;function je(){throw Error(D(321))}function k1(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!Fi(n[e],t[e]))return!1;return!0}function _1(n,t,e,i,s,r){if(ml=r,Bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Up.current=n===null||n.memoizedState===null?MR:RR,n=e(i,s),kh){r=0;do{if(kh=!1,Kh=0,25<=r)throw Error(D(301));r+=1,xe=ce=null,t.updateQueue=null,Up.current=NR,n=e(i,s)}while(kh)}if(Up.current=Qm,t=ce!==null&&ce.next!==null,ml=0,xe=ce=Bt=null,Ym=!1,t)throw Error(D(300));return n}function T1(){var n=Kh!==0;return Kh=0,n}function Hi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?Bt.memoizedState=xe=n:xe=xe.next=n,xe}function pi(){if(ce===null){var n=Bt.alternate;n=n!==null?n.memoizedState:null}else n=ce.next;var t=xe===null?Bt.memoizedState:xe.next;if(t!==null)xe=t,ce=n;else{if(n===null)throw Error(D(310));ce=n,n={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},xe===null?Bt.memoizedState=xe=n:xe=xe.next=n}return xe}function qh(n,t){return typeof t=="function"?t(n):t}function B0(n){var t=pi(),e=t.queue;if(e===null)throw Error(D(311));e.lastRenderedReducer=n;var i=ce,s=i.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,u=r;do{var h=u.lane;if((ml&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Bt.lanes|=h,gl|=h}u=u.next}while(u!==null&&u!==r);l===null?o=i:l.next=a,Fi(i,t.memoizedState)||(gn=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=l,e.lastRenderedState=i}if(n=e.interleaved,n!==null){s=n;do r=s.lane,Bt.lanes|=r,gl|=r,s=s.next;while(s!==n)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function z0(n){var t=pi(),e=t.queue;if(e===null)throw Error(D(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Fi(r,t.memoizedState)||(gn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,i]}function fC(){}function pC(n,t){var e=Bt,i=pi(),s=t(),r=!Fi(i.memoizedState,s);if(r&&(i.memoizedState=s,gn=!0),i=i.queue,P1(yC.bind(null,e,i,n),[n]),i.getSnapshot!==t||r||xe!==null&&xe.memoizedState.tag&1){if(e.flags|=2048,Yh(9,gC.bind(null,e,i,s,t),void 0,null),we===null)throw Error(D(349));ml&30||mC(e,t,s)}return s}function mC(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function gC(n,t,e,i){t.value=e,t.getSnapshot=i,vC(t)&&xC(n)}function yC(n,t,e){return e(function(){vC(t)&&xC(n)})}function vC(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Fi(n,e)}catch{return!0}}function xC(n){var t=mr(n,1);t!==null&&ji(t,n,1,-1)}function Ib(n){var t=Hi();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:n},t.queue=n,n=n.dispatch=PR.bind(null,Bt,n),[t.memoizedState,n]}function Yh(n,t,e,i){return n={tag:n,create:t,destroy:e,deps:i,next:null},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n)),n}function wC(){return pi().memoizedState}function Wp(n,t,e,i){var s=Hi();Bt.flags|=n,s.memoizedState=Yh(1|t,e,void 0,i===void 0?null:i)}function Kg(n,t,e,i){var s=pi();i=i===void 0?null:i;var r=void 0;if(ce!==null){var o=ce.memoizedState;if(r=o.destroy,i!==null&&k1(i,o.deps)){s.memoizedState=Yh(t,e,r,i);return}}Bt.flags|=n,s.memoizedState=Yh(1|t,e,r,i)}function Db(n,t){return Wp(8390656,8,n,t)}function P1(n,t){return Kg(2048,8,n,t)}function bC(n,t){return Kg(4,2,n,t)}function AC(n,t){return Kg(4,4,n,t)}function SC(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function EC(n,t,e){return e=e!=null?e.concat([n]):null,Kg(4,4,SC.bind(null,t,n),e)}function M1(){}function CC(n,t){var e=pi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&k1(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function kC(n,t){var e=pi();t=t===void 0?null:t;var i=e.memoizedState;return i!==null&&t!==null&&k1(t,i[1])?i[0]:(n=n(),e.memoizedState=[n,t],n)}function _C(n,t,e){return ml&21?(Fi(e,t)||(e=NE(),Bt.lanes|=e,gl|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,gn=!0),n.memoizedState=e)}function _R(n,t){var e=vt;vt=e!==0&&4>e?e:4,n(!0);var i=O0.transition;O0.transition={};try{n(!1),t()}finally{vt=e,O0.transition=i}}function TC(){return pi().memoizedState}function TR(n,t,e){var i=To(n);if(e={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null},PC(n))MC(t,e);else if(e=uC(n,t,e,i),e!==null){var s=sn();ji(e,n,i,s),RC(e,t,i)}}function PR(n,t,e){var i=To(n),s={lane:i,action:e,hasEagerState:!1,eagerState:null,next:null};if(PC(n))MC(t,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,e);if(s.hasEagerState=!0,s.eagerState=a,Fi(a,o)){var l=t.interleaved;l===null?(s.next=s,b1(t)):(s.next=l.next,l.next=s),t.interleaved=s;return}}catch{}finally{}e=uC(n,t,s,i),e!==null&&(s=sn(),ji(e,n,i,s),RC(e,t,i))}}function PC(n){var t=n.alternate;return n===Bt||t!==null&&t===Bt}function MC(n,t){kh=Ym=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function RC(n,t,e){if(e&4194240){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,a1(n,e)}}var Qm={readContext:fi,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},MR={readContext:fi,useCallback:function(n,t){return Hi().memoizedState=[n,t===void 0?null:t],n},useContext:fi,useEffect:Db,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Wp(4194308,4,SC.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Wp(4194308,4,n,t)},useInsertionEffect:function(n,t){return Wp(4,2,n,t)},useMemo:function(n,t){var e=Hi();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var i=Hi();return t=e!==void 0?e(t):t,i.memoizedState=i.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},i.queue=n,n=n.dispatch=TR.bind(null,Bt,n),[i.memoizedState,n]},useRef:function(n){var t=Hi();return n={current:n},t.memoizedState=n},useState:Ib,useDebugValue:M1,useDeferredValue:function(n){return Hi().memoizedState=n},useTransition:function(){var n=Ib(!1),t=n[0];return n=_R.bind(null,n[1]),Hi().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var i=Bt,s=Hi();if(Lt){if(e===void 0)throw Error(D(407));e=e()}else{if(e=t(),we===null)throw Error(D(349));ml&30||mC(i,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,Db(yC.bind(null,i,r,n),[n]),i.flags|=2048,Yh(9,gC.bind(null,i,r,e,t),void 0,null),e},useId:function(){var n=Hi(),t=we.identifierPrefix;if(Lt){var e=lr,i=ar;e=(i&~(1<<32-Di(i)-1)).toString(32)+e,t=":"+t+"R"+e,e=Kh++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=kR++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},RR={readContext:fi,useCallback:CC,useContext:fi,useEffect:P1,useImperativeHandle:EC,useInsertionEffect:bC,useLayoutEffect:AC,useMemo:kC,useReducer:B0,useRef:wC,useState:function(){return B0(qh)},useDebugValue:M1,useDeferredValue:function(n){var t=pi();return _C(t,ce.memoizedState,n)},useTransition:function(){var n=B0(qh)[0],t=pi().memoizedState;return[n,t]},useMutableSource:fC,useSyncExternalStore:pC,useId:TC,unstable_isNewReconciler:!1},NR={readContext:fi,useCallback:CC,useContext:fi,useEffect:P1,useImperativeHandle:EC,useInsertionEffect:bC,useLayoutEffect:AC,useMemo:kC,useReducer:z0,useRef:wC,useState:function(){return z0(qh)},useDebugValue:M1,useDeferredValue:function(n){var t=pi();return ce===null?t.memoizedState=n:_C(t,ce.memoizedState,n)},useTransition:function(){var n=z0(qh)[0],t=pi().memoizedState;return[n,t]},useMutableSource:fC,useSyncExternalStore:pC,useId:TC,unstable_isNewReconciler:!1};function xi(n,t){if(n&&n.defaultProps){t=Vt({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function Gy(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:Vt({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var qg={isMounted:function(n){return(n=n._reactInternals)?Al(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var i=sn(),s=To(n),r=cr(i,s);r.payload=t,e!=null&&(r.callback=e),t=ko(n,r,s),t!==null&&(ji(t,n,s,i),Hp(t,n,s))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=sn(),s=To(n),r=cr(i,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=ko(n,r,s),t!==null&&(ji(t,n,s,i),Hp(t,n,s))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=sn(),i=To(n),s=cr(e,i);s.tag=2,t!=null&&(s.callback=t),t=ko(n,s,i),t!==null&&(ji(t,n,i,e),Hp(t,n,i))}};function jb(n,t,e,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):t.prototype&&t.prototype.isPureReactComponent?!$h(e,i)||!$h(s,r):!0}function NC(n,t,e){var i=!1,s=Ro,r=t.contextType;return typeof r=="object"&&r!==null?r=fi(r):(s=xn(t)?fl:We.current,i=t.contextTypes,r=(i=i!=null)?xu(n,s):Ro),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qg,n.stateNode=t,t._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),t}function Fb(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&qg.enqueueReplaceState(t,t.state,null)}function Xy(n,t,e,i){var s=n.stateNode;s.props=e,s.state=n.memoizedState,s.refs={},A1(n);var r=t.contextType;typeof r=="object"&&r!==null?s.context=fi(r):(r=xn(t)?fl:We.current,s.context=xu(n,r)),s.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Gy(n,t,r,e),s.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&qg.enqueueReplaceState(s,s.state,null),Km(n,e,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Su(n,t){try{var e="",i=t;do e+=oM(i),i=i.return;while(i);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:s,digest:null}}function V0(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function Ky(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var LR=typeof WeakMap=="function"?WeakMap:Map;function LC(n,t,e){e=cr(-1,e),e.tag=3,e.payload={element:null};var i=t.value;return e.callback=function(){Jm||(Jm=!0,sv=i),Ky(n,t)},e}function IC(n,t,e){e=cr(-1,e),e.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;e.payload=function(){return i(s)},e.callback=function(){Ky(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Ky(n,t),typeof i!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function Ob(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new LR;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(s.add(e),n=XR.bind(null,n,t,e),t.then(n,n))}function Bb(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function zb(n,t,e,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=cr(-1,1),t.tag=2,ko(e,t,1))),e.lanes|=1),n)}var IR=br.ReactCurrentOwner,gn=!1;function tn(n,t,e,i){t.child=n===null?cC(t,null,e,i):bu(t,n.child,e,i)}function Vb(n,t,e,i,s){e=e.render;var r=t.ref;return rc(t,s),i=_1(n,t,e,i,r,s),e=T1(),n!==null&&!gn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,gr(n,t,s)):(Lt&&e&&m1(t),t.flags|=1,tn(n,t,i,s),t.child)}function $b(n,t,e,i,s){if(n===null){var r=e.type;return typeof r=="function"&&!O1(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,DC(n,t,r,i,s)):(n=qp(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:$h,e(o,i)&&n.ref===t.ref)return gr(n,t,s)}return t.flags|=1,n=Po(r,i),n.ref=t.ref,n.return=t,t.child=n}function DC(n,t,e,i,s){if(n!==null){var r=n.memoizedProps;if($h(r,i)&&n.ref===t.ref)if(gn=!1,t.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(gn=!0);else return t.lanes=n.lanes,gr(n,t,s)}return qy(n,t,e,i,s)}function jC(n,t,e){var i=t.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Gl,On),On|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,Ct(Gl,On),On|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:e,Ct(Gl,On),On|=i}else r!==null?(i=r.baseLanes|e,t.memoizedState=null):i=e,Ct(Gl,On),On|=i;return tn(n,t,s,e),t.child}function FC(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function qy(n,t,e,i,s){var r=xn(e)?fl:We.current;return r=xu(t,r),rc(t,s),e=_1(n,t,e,i,r,s),i=T1(),n!==null&&!gn?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~s,gr(n,t,s)):(Lt&&i&&m1(t),t.flags|=1,tn(n,t,e,s),t.child)}function Hb(n,t,e,i,s){if(xn(e)){var r=!0;Hm(t)}else r=!1;if(rc(t,s),t.stateNode===null)Gp(n,t),NC(t,e,i),Xy(t,e,i,s),i=!0;else if(n===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=fi(u):(u=xn(e)?fl:We.current,u=xu(t,u));var h=e.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Fb(t,o,i,u),_r=!1;var f=t.memoizedState;o.state=f,Km(t,i,o,s),l=t.memoizedState,a!==i||f!==l||vn.current||_r?(typeof h=="function"&&(Gy(t,e,h,i),l=t.memoizedState),(a=_r||jb(t,e,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,hC(n,t),a=t.memoizedProps,u=t.type===t.elementType?a:xi(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=e.contextType,typeof l=="object"&&l!==null?l=fi(l):(l=xn(e)?fl:We.current,l=xu(t,l));var p=e.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Fb(t,o,i,l),_r=!1,f=t.memoizedState,o.state=f,Km(t,i,o,s);var y=t.memoizedState;a!==d||f!==y||vn.current||_r?(typeof p=="function"&&(Gy(t,e,p,i),y=t.memoizedState),(u=_r||jb(t,e,u,i,f,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),o.props=i,o.state=y,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(t.flags|=1024),i=!1)}return Yy(n,t,e,i,r,s)}function Yy(n,t,e,i,s,r){FC(n,t);var o=(t.flags&128)!==0;if(!i&&!o)return s&&Tb(t,e,!1),gr(n,t,r);i=t.stateNode,IR.current=t;var a=o&&typeof e.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,n!==null&&o?(t.child=bu(t,n.child,null,r),t.child=bu(t,null,a,r)):tn(n,t,a,r),t.memoizedState=i.state,s&&Tb(t,e,!0),t.child}function OC(n){var t=n.stateNode;t.pendingContext?_b(n,t.pendingContext,t.pendingContext!==t.context):t.context&&_b(n,t.context,!1),S1(n,t.containerInfo)}function Ub(n,t,e,i,s){return wu(),y1(s),t.flags|=256,tn(n,t,e,i),t.child}var Qy={dehydrated:null,treeContext:null,retryLane:0};function Zy(n){return{baseLanes:n,cachePool:null,transitions:null}}function BC(n,t,e){var i=t.pendingProps,s=Ft.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Ct(Ft,s&1),n===null)return Uy(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=i.children,n=i.fallback,r?(i=t.mode,r=t.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Zg(o,i,0,null),n=ul(n,i,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=Zy(e),t.memoizedState=Qy,n):R1(t,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DR(n,t,o,i,a,s,e);if(r){r=i.fallback,o=t.mode,s=n.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Po(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Po(a,r):(r=ul(r,o,e,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,o=n.child.memoizedState,o=o===null?Zy(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=Qy,i}return r=n.child,n=r.sibling,i=Po(r,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=e),i.return=t,i.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=i,t.memoizedState=null,i}function R1(n,t){return t=Zg({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function vp(n,t,e,i){return i!==null&&y1(i),bu(t,n.child,null,e),n=R1(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function DR(n,t,e,i,s,r,o){if(e)return t.flags&256?(t.flags&=-257,i=V0(Error(D(422))),vp(n,t,o,i)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=i.fallback,s=t.mode,i=Zg({mode:"visible",children:i.children},s,0,null),r=ul(r,s,o,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,t.mode&1&&bu(t,n.child,null,o),t.child.memoizedState=Zy(o),t.memoizedState=Qy,r);if(!(t.mode&1))return vp(n,t,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(D(419)),i=V0(r,i,void 0),vp(n,t,o,i)}if(a=(o&n.childLanes)!==0,gn||a){if(i=we,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,mr(n,s),ji(i,n,s,-1))}return F1(),i=V0(Error(D(421))),vp(n,t,o,i)}return s.data==="$?"?(t.flags|=128,t.child=n.child,t=KR.bind(null,n),s._reactRetry=t,null):(n=r.treeContext,Vn=Co(s.nextSibling),$n=t,Lt=!0,Ni=null,n!==null&&(oi[ai++]=ar,oi[ai++]=lr,oi[ai++]=pl,ar=n.id,lr=n.overflow,pl=t),t=R1(t,i.children),t.flags|=4096,t)}function Wb(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),Wy(n.return,t,e)}function $0(n,t,e,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=e,r.tailMode=s)}function zC(n,t,e){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(tn(n,t,i.children,e),i=Ft.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wb(n,e,t);else if(n.tag===19)Wb(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Ct(Ft,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&qm(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),$0(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&qm(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}$0(t,!0,e,null,r);break;case"together":$0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gp(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function gr(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),gl|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(D(153));if(t.child!==null){for(n=t.child,e=Po(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Po(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function jR(n,t,e){switch(t.tag){case 3:OC(t),wu();break;case 5:dC(t);break;case 1:xn(t.type)&&Hm(t);break;case 4:S1(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Ct(Gm,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ct(Ft,Ft.current&1),t.flags|=128,null):e&t.child.childLanes?BC(n,t,e):(Ct(Ft,Ft.current&1),n=gr(n,t,e),n!==null?n.sibling:null);Ct(Ft,Ft.current&1);break;case 19:if(i=(e&t.childLanes)!==0,n.flags&128){if(i)return zC(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ct(Ft,Ft.current),i)break;return null;case 22:case 23:return t.lanes=0,jC(n,t,e)}return gr(n,t,e)}var VC,Jy,$C,HC;VC=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};Jy=function(){};$C=function(n,t,e,i){var s=n.memoizedProps;if(s!==i){n=t.stateNode,ea(ds.current);var r=null;switch(e){case"input":s=by(n,s),i=by(n,i),r=[];break;case"select":s=Vt({},s,{value:void 0}),i=Vt({},i,{value:void 0}),r=[];break;case"textarea":s=Ey(n,s),i=Ey(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Vm)}ky(e,i);var o;e=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dh.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var l=i[u];if(a=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(e||(e={}),e[o]=l[o])}else e||(r||(r=[]),r.push(u,e)),e=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&_t("scroll",n),r||a===l||(r=[])):(r=r||[]).push(u,l))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};HC=function(n,t,e,i){e!==i&&(t.flags|=4)};function Hu(n,t){if(!Lt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Fe(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function FR(n,t,e){var i=t.pendingProps;switch(g1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return xn(t.type)&&$m(),Fe(t),null;case 3:return i=t.stateNode,Au(),Tt(vn),Tt(We),C1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(gp(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ni!==null&&(av(Ni),Ni=null))),Jy(n,t),Fe(t),null;case 5:E1(t);var s=ea(Xh.current);if(e=t.type,n!==null&&t.stateNode!=null)$C(n,t,e,i,s),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(D(166));return Fe(t),null}if(n=ea(ds.current),gp(t)){i=t.stateNode,e=t.type;var r=t.memoizedProps;switch(i[us]=t,i[Wh]=r,n=(t.mode&1)!==0,e){case"dialog":_t("cancel",i),_t("close",i);break;case"iframe":case"object":case"embed":_t("load",i);break;case"video":case"audio":for(s=0;s<th.length;s++)_t(th[s],i);break;case"source":_t("error",i);break;case"img":case"image":case"link":_t("error",i),_t("load",i);break;case"details":_t("toggle",i);break;case"input":tb(i,r),_t("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},_t("invalid",i);break;case"textarea":nb(i,r),_t("invalid",i)}ky(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&mp(i.textContent,a,n),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&mp(i.textContent,a,n),s=["children",""+a]):Dh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&_t("scroll",i)}switch(e){case"input":ap(i),eb(i,r,!0);break;case"textarea":ap(i),ib(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Vm)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yE(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(e,{is:i.is}):(n=o.createElement(e),e==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,e),n[us]=t,n[Wh]=i,VC(n,t,!1,!1),t.stateNode=n;t:{switch(o=_y(e,i),e){case"dialog":_t("cancel",n),_t("close",n),s=i;break;case"iframe":case"object":case"embed":_t("load",n),s=i;break;case"video":case"audio":for(s=0;s<th.length;s++)_t(th[s],n);s=i;break;case"source":_t("error",n),s=i;break;case"img":case"image":case"link":_t("error",n),_t("load",n),s=i;break;case"details":_t("toggle",n),s=i;break;case"input":tb(n,i),s=by(n,i),_t("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Vt({},i,{value:void 0}),_t("invalid",n);break;case"textarea":nb(n,i),s=Ey(n,i),_t("invalid",n);break;default:s=i}ky(e,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?wE(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vE(n,l)):r==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&jh(n,l):typeof l=="number"&&jh(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Dh.hasOwnProperty(r)?l!=null&&r==="onScroll"&&_t("scroll",n):l!=null&&e1(n,r,l,o))}switch(e){case"input":ap(n),eb(n,i,!1);break;case"textarea":ap(n),ib(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Mo(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?ec(n,!!i.multiple,r,!1):i.defaultValue!=null&&ec(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Vm)}switch(e){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break t;case"img":i=!0;break t;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fe(t),null;case 6:if(n&&t.stateNode!=null)HC(n,t,n.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(D(166));if(e=ea(Xh.current),ea(ds.current),gp(t)){if(i=t.stateNode,e=t.memoizedProps,i[us]=t,(r=i.nodeValue!==e)&&(n=$n,n!==null))switch(n.tag){case 3:mp(i.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&mp(i.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else i=(e.nodeType===9?e:e.ownerDocument).createTextNode(i),i[us]=t,t.stateNode=i}return Fe(t),null;case 13:if(Tt(Ft),i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Lt&&Vn!==null&&t.mode&1&&!(t.flags&128))aC(),wu(),t.flags|=98560,r=!1;else if(r=gp(t),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(D(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(D(317));r[us]=t}else wu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),r=!1}else Ni!==null&&(av(Ni),Ni=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(n===null||Ft.current&1?ue===0&&(ue=3):F1())),t.updateQueue!==null&&(t.flags|=4),Fe(t),null);case 4:return Au(),Jy(n,t),n===null&&Hh(t.stateNode.containerInfo),Fe(t),null;case 10:return w1(t.type._context),Fe(t),null;case 17:return xn(t.type)&&$m(),Fe(t),null;case 19:if(Tt(Ft),r=t.memoizedState,r===null)return Fe(t),null;if(i=(t.flags&128)!==0,o=r.rendering,o===null)if(i)Hu(r,!1);else{if(ue!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=qm(n),o!==null){for(t.flags|=128,Hu(r,!1),i=o.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=e,e=t.child;e!==null;)r=e,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return Ct(Ft,Ft.current&1|2),t.child}n=n.sibling}r.tail!==null&&Kt()>Eu&&(t.flags|=128,i=!0,Hu(r,!1),t.lanes=4194304)}else{if(!i)if(n=qm(o),n!==null){if(t.flags|=128,i=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Hu(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Lt)return Fe(t),null}else 2*Kt()-r.renderingStartTime>Eu&&e!==1073741824&&(t.flags|=128,i=!0,Hu(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Kt(),t.sibling=null,e=Ft.current,Ct(Ft,i?e&1|2:e&1),t):(Fe(t),null);case 22:case 23:return j1(),i=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?On&1073741824&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function OR(n,t){switch(g1(t),t.tag){case 1:return xn(t.type)&&$m(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return Au(),Tt(vn),Tt(We),C1(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return E1(t),null;case 13:if(Tt(Ft),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(D(340));wu()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Tt(Ft),null;case 4:return Au(),null;case 10:return w1(t.type._context),null;case 22:case 23:return j1(),null;case 24:return null;default:return null}}var xp=!1,He=!1,BR=typeof WeakSet=="function"?WeakSet:Set,H=null;function Wl(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(i){Ut(n,t,i)}else e.current=null}function tv(n,t,e){try{e()}catch(i){Ut(n,t,i)}}var Gb=!1;function zR(n,t){if(Fy=Om,n=KE(),p1(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,a=-1,l=-1,u=0,h=0,d=n,f=null;e:for(;;){for(var p;d!==e||s!==0&&d.nodeType!==3||(a=o+s),d!==r||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===n)break e;if(f===e&&++u===s&&(a=o),f===r&&++h===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}e=a===-1||l===-1?null:{start:a,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(Oy={focusedElem:n,selectionRange:e},Om=!1,H=t;H!==null;)if(t=H,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,H=n;else for(;H!==null;){t=H;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,A=y.memoizedState,m=t.stateNode,w=m.getSnapshotBeforeUpdate(t.elementType===t.type?x:xi(t.type,x),A);m.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(C){Ut(t,t.return,C)}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}return y=Gb,Gb=!1,y}function _h(n,t,e){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&tv(t,e,r)}s=s.next}while(s!==i)}}function Yg(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}}function ev(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function UC(n){var t=n.alternate;t!==null&&(n.alternate=null,UC(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[us],delete t[Wh],delete t[Vy],delete t[AR],delete t[SR])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function WC(n){return n.tag===5||n.tag===3||n.tag===4}function Xb(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||WC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nv(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=Vm));else if(i!==4&&(n=n.child,n!==null))for(nv(n,t,e),n=n.sibling;n!==null;)nv(n,t,e),n=n.sibling}function iv(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(iv(n,t,e),n=n.sibling;n!==null;)iv(n,t,e),n=n.sibling}var _e=null,Ri=!1;function Sr(n,t,e){for(e=e.child;e!==null;)GC(n,t,e),e=e.sibling}function GC(n,t,e){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount($g,e)}catch{}switch(e.tag){case 5:He||Wl(e,t);case 6:var i=_e,s=Ri;_e=null,Sr(n,t,e),_e=i,Ri=s,_e!==null&&(Ri?(n=_e,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):_e.removeChild(e.stateNode));break;case 18:_e!==null&&(Ri?(n=_e,e=e.stateNode,n.nodeType===8?D0(n.parentNode,e):n.nodeType===1&&D0(n,e),zh(n)):D0(_e,e.stateNode));break;case 4:i=_e,s=Ri,_e=e.stateNode.containerInfo,Ri=!0,Sr(n,t,e),_e=i,Ri=s;break;case 0:case 11:case 14:case 15:if(!He&&(i=e.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&tv(e,t,o),s=s.next}while(s!==i)}Sr(n,t,e);break;case 1:if(!He&&(Wl(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=e.memoizedProps,i.state=e.memoizedState,i.componentWillUnmount()}catch(a){Ut(e,t,a)}Sr(n,t,e);break;case 21:Sr(n,t,e);break;case 22:e.mode&1?(He=(i=He)||e.memoizedState!==null,Sr(n,t,e),He=i):Sr(n,t,e);break;default:Sr(n,t,e)}}function Kb(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new BR),t.forEach(function(i){var s=qR.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}}function gi(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i];try{var r=n,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:_e=a.stateNode,Ri=!1;break t;case 3:_e=a.stateNode.containerInfo,Ri=!0;break t;case 4:_e=a.stateNode.containerInfo,Ri=!0;break t}a=a.return}if(_e===null)throw Error(D(160));GC(r,o,s),_e=null,Ri=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Ut(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)XC(t,n),t=t.sibling}function XC(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(gi(t,n),Bi(n),i&4){try{_h(3,n,n.return),Yg(3,n)}catch(x){Ut(n,n.return,x)}try{_h(5,n,n.return)}catch(x){Ut(n,n.return,x)}}break;case 1:gi(t,n),Bi(n),i&512&&e!==null&&Wl(e,e.return);break;case 5:if(gi(t,n),Bi(n),i&512&&e!==null&&Wl(e,e.return),n.flags&32){var s=n.stateNode;try{jh(s,"")}catch(x){Ut(n,n.return,x)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&mE(s,r),_y(a,o);var u=_y(a,r);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?wE(s,d):h==="dangerouslySetInnerHTML"?vE(s,d):h==="children"?jh(s,d):e1(s,h,d,u)}switch(a){case"input":Ay(s,r);break;case"textarea":gE(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?ec(s,!!r.multiple,p,!1):f!==!!r.multiple&&(r.defaultValue!=null?ec(s,!!r.multiple,r.defaultValue,!0):ec(s,!!r.multiple,r.multiple?[]:"",!1))}s[Wh]=r}catch(x){Ut(n,n.return,x)}}break;case 6:if(gi(t,n),Bi(n),i&4){if(n.stateNode===null)throw Error(D(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(x){Ut(n,n.return,x)}}break;case 3:if(gi(t,n),Bi(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{zh(t.containerInfo)}catch(x){Ut(n,n.return,x)}break;case 4:gi(t,n),Bi(n);break;case 13:gi(t,n),Bi(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(I1=Kt())),i&4&&Kb(n);break;case 22:if(h=e!==null&&e.memoizedState!==null,n.mode&1?(He=(u=He)||h,gi(t,n),He=u):gi(t,n),Bi(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(H=n,h=n.child;h!==null;){for(d=H=h;H!==null;){switch(f=H,p=f.child,f.tag){case 0:case 11:case 14:case 15:_h(4,f,f.return);break;case 1:Wl(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,e=f.return;try{t=i,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(x){Ut(i,e,x)}}break;case 5:Wl(f,f.return);break;case 22:if(f.memoizedState!==null){Yb(d);continue}}p!==null?(p.return=f,H=p):Yb(d)}h=h.sibling}t:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=xE("display",o))}catch(x){Ut(n,n.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){Ut(n,n.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break t;for(;d.sibling===null;){if(d.return===null||d.return===n)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gi(t,n),Bi(n),i&4&&Kb(n);break;case 21:break;default:gi(t,n),Bi(n)}}function Bi(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(WC(e)){var i=e;break t}e=e.return}throw Error(D(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(jh(s,""),i.flags&=-33);var r=Xb(n);iv(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Xb(n);nv(n,a,o);break;default:throw Error(D(161))}}catch(l){Ut(n,n.return,l)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function VR(n,t,e){H=n,KC(n)}function KC(n,t,e){for(var i=(n.mode&1)!==0;H!==null;){var s=H,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||xp;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||He;a=xp;var u=He;if(xp=o,(He=l)&&!u)for(H=s;H!==null;)o=H,l=o.child,o.tag===22&&o.memoizedState!==null?Qb(s):l!==null?(l.return=o,H=l):Qb(s);for(;r!==null;)H=r,KC(r),r=r.sibling;H=s,xp=a,He=u}qb(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,H=r):qb(n)}}function qb(n){for(;H!==null;){var t=H;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||Yg(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!He)if(e===null)i.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:xi(t.type,e.memoizedProps);i.componentDidUpdate(s,e.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Lb(t,r,i);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Lb(t,o,e)}break;case 5:var a=t.stateNode;if(e===null&&t.flags&4){e=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&zh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}He||t.flags&512&&ev(t)}catch(f){Ut(t,t.return,f)}}if(t===n){H=null;break}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}}function Yb(n){for(;H!==null;){var t=H;if(t===n){H=null;break}var e=t.sibling;if(e!==null){e.return=t.return,H=e;break}H=t.return}}function Qb(n){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Yg(4,t)}catch(l){Ut(t,e,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(l){Ut(t,s,l)}}var r=t.return;try{ev(t)}catch(l){Ut(t,r,l)}break;case 5:var o=t.return;try{ev(t)}catch(l){Ut(t,o,l)}}}catch(l){Ut(t,t.return,l)}if(t===n){H=null;break}var a=t.sibling;if(a!==null){a.return=t.return,H=a;break}H=t.return}}var $R=Math.ceil,Zm=br.ReactCurrentDispatcher,N1=br.ReactCurrentOwner,ui=br.ReactCurrentBatchConfig,ht=0,we=null,ee=null,Ne=0,On=0,Gl=zo(0),ue=0,Qh=null,gl=0,Qg=0,L1=0,Th=null,mn=null,I1=0,Eu=1/0,Es=null,Jm=!1,sv=null,_o=null,wp=!1,bo=null,tg=0,Ph=0,rv=null,Xp=-1,Kp=0;function sn(){return ht&6?Kt():Xp!==-1?Xp:Xp=Kt()}function To(n){return n.mode&1?ht&2&&Ne!==0?Ne&-Ne:CR.transition!==null?(Kp===0&&(Kp=NE()),Kp):(n=vt,n!==0||(n=window.event,n=n===void 0?16:BE(n.type)),n):1}function ji(n,t,e,i){if(50<Ph)throw Ph=0,rv=null,Error(D(185));Bf(n,e,i),(!(ht&2)||n!==we)&&(n===we&&(!(ht&2)&&(Qg|=e),ue===4&&Pr(n,Ne)),wn(n,i),e===1&&ht===0&&!(t.mode&1)&&(Eu=Kt()+500,Xg&&Vo()))}function wn(n,t){var e=n.callbackNode;CM(n,t);var i=Fm(n,n===we?Ne:0);if(i===0)e!==null&&ob(e),n.callbackNode=null,n.callbackPriority=0;else if(t=i&-i,n.callbackPriority!==t){if(e!=null&&ob(e),t===1)n.tag===0?ER(Zb.bind(null,n)):sC(Zb.bind(null,n)),wR(function(){!(ht&6)&&Vo()}),e=null;else{switch(LE(i)){case 1:e=o1;break;case 4:e=ME;break;case 16:e=jm;break;case 536870912:e=RE;break;default:e=jm}e=n2(e,qC.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function qC(n,t){if(Xp=-1,Kp=0,ht&6)throw Error(D(327));var e=n.callbackNode;if(oc()&&n.callbackNode!==e)return null;var i=Fm(n,n===we?Ne:0);if(i===0)return null;if(i&30||i&n.expiredLanes||t)t=eg(n,i);else{t=i;var s=ht;ht|=2;var r=QC();(we!==n||Ne!==t)&&(Es=null,Eu=Kt()+500,cl(n,t));do try{WR();break}catch(a){YC(n,a)}while(!0);x1(),Zm.current=r,ht=s,ee!==null?t=0:(we=null,Ne=0,t=ue)}if(t!==0){if(t===2&&(s=Ny(n),s!==0&&(i=s,t=ov(n,s))),t===1)throw e=Qh,cl(n,0),Pr(n,i),wn(n,Kt()),e;if(t===6)Pr(n,i);else{if(s=n.current.alternate,!(i&30)&&!HR(s)&&(t=eg(n,i),t===2&&(r=Ny(n),r!==0&&(i=r,t=ov(n,r))),t===1))throw e=Qh,cl(n,0),Pr(n,i),wn(n,Kt()),e;switch(n.finishedWork=s,n.finishedLanes=i,t){case 0:case 1:throw Error(D(345));case 2:Wo(n,mn,Es);break;case 3:if(Pr(n,i),(i&130023424)===i&&(t=I1+500-Kt(),10<t)){if(Fm(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){sn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=zy(Wo.bind(null,n,mn,Es),t);break}Wo(n,mn,Es);break;case 4:if(Pr(n,i),(i&4194240)===i)break;for(t=n.eventTimes,s=-1;0<i;){var o=31-Di(i);r=1<<o,o=t[o],o>s&&(s=o),i&=~r}if(i=s,i=Kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*$R(i/1960))-i,10<i){n.timeoutHandle=zy(Wo.bind(null,n,mn,Es),i);break}Wo(n,mn,Es);break;case 5:Wo(n,mn,Es);break;default:throw Error(D(329))}}}return wn(n,Kt()),n.callbackNode===e?qC.bind(null,n):null}function ov(n,t){var e=Th;return n.current.memoizedState.isDehydrated&&(cl(n,t).flags|=256),n=eg(n,t),n!==2&&(t=mn,mn=e,t!==null&&av(t)),n}function av(n){mn===null?mn=n:mn.push.apply(mn,n)}function HR(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var i=0;i<e.length;i++){var s=e[i],r=s.getSnapshot;s=s.value;try{if(!Fi(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(n,t){for(t&=~L1,t&=~Qg,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-Di(t),i=1<<e;n[e]=-1,t&=~i}}function Zb(n){if(ht&6)throw Error(D(327));oc();var t=Fm(n,0);if(!(t&1))return wn(n,Kt()),null;var e=eg(n,t);if(n.tag!==0&&e===2){var i=Ny(n);i!==0&&(t=i,e=ov(n,i))}if(e===1)throw e=Qh,cl(n,0),Pr(n,t),wn(n,Kt()),e;if(e===6)throw Error(D(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Wo(n,mn,Es),wn(n,Kt()),null}function D1(n,t){var e=ht;ht|=1;try{return n(t)}finally{ht=e,ht===0&&(Eu=Kt()+500,Xg&&Vo())}}function yl(n){bo!==null&&bo.tag===0&&!(ht&6)&&oc();var t=ht;ht|=1;var e=ui.transition,i=vt;try{if(ui.transition=null,vt=1,n)return n()}finally{vt=i,ui.transition=e,ht=t,!(ht&6)&&Vo()}}function j1(){On=Gl.current,Tt(Gl)}function cl(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,xR(e)),ee!==null)for(e=ee.return;e!==null;){var i=e;switch(g1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$m();break;case 3:Au(),Tt(vn),Tt(We),C1();break;case 5:E1(i);break;case 4:Au();break;case 13:Tt(Ft);break;case 19:Tt(Ft);break;case 10:w1(i.type._context);break;case 22:case 23:j1()}e=e.return}if(we=n,ee=n=Po(n.current,null),Ne=On=t,ue=0,Qh=null,L1=Qg=gl=0,mn=Th=null,ta!==null){for(t=0;t<ta.length;t++)if(e=ta[t],i=e.interleaved,i!==null){e.interleaved=null;var s=i.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}e.pending=i}ta=null}return n}function YC(n,t){do{var e=ee;try{if(x1(),Up.current=Qm,Ym){for(var i=Bt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ym=!1}if(ml=0,xe=ce=Bt=null,kh=!1,Kh=0,N1.current=null,e===null||e.return===null){ue=1,Qh=t,ee=null;break}t:{var r=n,o=e.return,a=e,l=t;if(t=Ne,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Bb(o);if(p!==null){p.flags&=-257,zb(p,o,a,r,t),p.mode&1&&Ob(r,u,t),t=p,l=u;var y=t.updateQueue;if(y===null){var x=new Set;x.add(l),t.updateQueue=x}else y.add(l);break t}else{if(!(t&1)){Ob(r,u,t),F1();break t}l=Error(D(426))}}else if(Lt&&a.mode&1){var A=Bb(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),zb(A,o,a,r,t),y1(Su(l,a));break t}}r=l=Su(l,a),ue!==4&&(ue=2),Th===null?Th=[r]:Th.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var m=LC(r,l,t);Nb(r,m);break t;case 1:a=l;var w=r.type,b=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(_o===null||!_o.has(b)))){r.flags|=65536,t&=-t,r.lanes|=t;var C=IC(r,a,t);Nb(r,C);break t}}r=r.return}while(r!==null)}JC(e)}catch(k){t=k,ee===e&&e!==null&&(ee=e=e.return);continue}break}while(!0)}function QC(){var n=Zm.current;return Zm.current=Qm,n===null?Qm:n}function F1(){(ue===0||ue===3||ue===2)&&(ue=4),we===null||!(gl&268435455)&&!(Qg&268435455)||Pr(we,Ne)}function eg(n,t){var e=ht;ht|=2;var i=QC();(we!==n||Ne!==t)&&(Es=null,cl(n,t));do try{UR();break}catch(s){YC(n,s)}while(!0);if(x1(),ht=e,Zm.current=i,ee!==null)throw Error(D(261));return we=null,Ne=0,ue}function UR(){for(;ee!==null;)ZC(ee)}function WR(){for(;ee!==null&&!gM();)ZC(ee)}function ZC(n){var t=e2(n.alternate,n,On);n.memoizedProps=n.pendingProps,t===null?JC(n):ee=t,N1.current=null}function JC(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=OR(e,t),e!==null){e.flags&=32767,ee=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ue=6,ee=null;return}}else if(e=FR(e,t,On),e!==null){ee=e;return}if(t=t.sibling,t!==null){ee=t;return}ee=t=n}while(t!==null);ue===0&&(ue=5)}function Wo(n,t,e){var i=vt,s=ui.transition;try{ui.transition=null,vt=1,GR(n,t,e,i)}finally{ui.transition=s,vt=i}return null}function GR(n,t,e,i){do oc();while(bo!==null);if(ht&6)throw Error(D(327));e=n.finishedWork;var s=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(D(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(kM(n,r),n===we&&(ee=we=null,Ne=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||wp||(wp=!0,n2(jm,function(){return oc(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=ui.transition,ui.transition=null;var o=vt;vt=1;var a=ht;ht|=4,N1.current=null,zR(n,e),XC(e,n),dR(Oy),Om=!!Fy,Oy=Fy=null,n.current=e,VR(e),yM(),ht=a,vt=o,ui.transition=r}else n.current=e;if(wp&&(wp=!1,bo=n,tg=s),r=n.pendingLanes,r===0&&(_o=null),wM(e.stateNode),wn(n,Kt()),t!==null)for(i=n.onRecoverableError,e=0;e<t.length;e++)s=t[e],i(s.value,{componentStack:s.stack,digest:s.digest});if(Jm)throw Jm=!1,n=sv,sv=null,n;return tg&1&&n.tag!==0&&oc(),r=n.pendingLanes,r&1?n===rv?Ph++:(Ph=0,rv=n):Ph=0,Vo(),null}function oc(){if(bo!==null){var n=LE(tg),t=ui.transition,e=vt;try{if(ui.transition=null,vt=16>n?16:n,bo===null)var i=!1;else{if(n=bo,bo=null,tg=0,ht&6)throw Error(D(331));var s=ht;for(ht|=4,H=n.current;H!==null;){var r=H,o=r.child;if(H.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(H=u;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:_h(8,h,r)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var f=h.sibling,p=h.return;if(UC(h),h===u){H=null;break}if(f!==null){f.return=p,H=f;break}H=p}}}var y=r.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var A=x.sibling;x.sibling=null,x=A}while(x!==null)}}H=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,H=o;else t:for(;H!==null;){if(r=H,r.flags&2048)switch(r.tag){case 0:case 11:case 15:_h(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,H=m;break t}H=r.return}}var w=n.current;for(H=w;H!==null;){o=H;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,H=b;else t:for(o=w;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yg(9,a)}}catch(k){Ut(a,a.return,k)}if(a===o){H=null;break t}var C=a.sibling;if(C!==null){C.return=a.return,H=C;break t}H=a.return}}if(ht=s,Vo(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot($g,n)}catch{}i=!0}return i}finally{vt=e,ui.transition=t}}return!1}function Jb(n,t,e){t=Su(e,t),t=LC(n,t,1),n=ko(n,t,1),t=sn(),n!==null&&(Bf(n,1,t),wn(n,t))}function Ut(n,t,e){if(n.tag===3)Jb(n,n,e);else for(;t!==null;){if(t.tag===3){Jb(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_o===null||!_o.has(i))){n=Su(e,n),n=IC(t,n,1),t=ko(t,n,1),n=sn(),t!==null&&(Bf(t,1,n),wn(t,n));break}}t=t.return}}function XR(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),t=sn(),n.pingedLanes|=n.suspendedLanes&e,we===n&&(Ne&e)===e&&(ue===4||ue===3&&(Ne&130023424)===Ne&&500>Kt()-I1?cl(n,0):L1|=e),wn(n,t)}function t2(n,t){t===0&&(n.mode&1?(t=up,up<<=1,!(up&130023424)&&(up=4194304)):t=1);var e=sn();n=mr(n,t),n!==null&&(Bf(n,t,e),wn(n,e))}function KR(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),t2(n,e)}function qR(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(D(314))}i!==null&&i.delete(t),t2(n,e)}var e2;e2=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||vn.current)gn=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return gn=!1,jR(n,t,e);gn=!!(n.flags&131072)}else gn=!1,Lt&&t.flags&1048576&&rC(t,Wm,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Gp(n,t),n=t.pendingProps;var s=xu(t,We.current);rc(t,e),s=_1(null,t,i,n,s,e);var r=T1();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xn(i)?(r=!0,Hm(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,A1(t),s.updater=qg,t.stateNode=s,s._reactInternals=t,Xy(t,i,n,e),t=Yy(null,t,i,!0,r,e)):(t.tag=0,Lt&&r&&m1(t),tn(null,t,s,e),t=t.child),t;case 16:i=t.elementType;t:{switch(Gp(n,t),n=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=QR(i),n=xi(i,n),s){case 0:t=qy(null,t,i,n,e);break t;case 1:t=Hb(null,t,i,n,e);break t;case 11:t=Vb(null,t,i,n,e);break t;case 14:t=$b(null,t,i,xi(i.type,n),e);break t}throw Error(D(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xi(i,s),qy(n,t,i,s,e);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xi(i,s),Hb(n,t,i,s,e);case 3:t:{if(OC(t),n===null)throw Error(D(387));i=t.pendingProps,r=t.memoizedState,s=r.element,hC(n,t),Km(t,i,null,e);var o=t.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=Su(Error(D(423)),t),t=Ub(n,t,i,e,s);break t}else if(i!==s){s=Su(Error(D(424)),t),t=Ub(n,t,i,e,s);break t}else for(Vn=Co(t.stateNode.containerInfo.firstChild),$n=t,Lt=!0,Ni=null,e=cC(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(wu(),i===s){t=gr(n,t,e);break t}tn(n,t,i,e)}t=t.child}return t;case 5:return dC(t),n===null&&Uy(t),i=t.type,s=t.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,By(i,s)?o=null:r!==null&&By(i,r)&&(t.flags|=32),FC(n,t),tn(n,t,o,e),t.child;case 6:return n===null&&Uy(t),null;case 13:return BC(n,t,e);case 4:return S1(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=bu(t,null,i,e):tn(n,t,i,e),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xi(i,s),Vb(n,t,i,s,e);case 7:return tn(n,t,t.pendingProps,e),t.child;case 8:return tn(n,t,t.pendingProps.children,e),t.child;case 12:return tn(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(i=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,Ct(Gm,i._currentValue),i._currentValue=o,r!==null)if(Fi(r.value,o)){if(r.children===s.children&&!vn.current){t=gr(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=cr(-1,e&-e),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}r.lanes|=e,l=r.alternate,l!==null&&(l.lanes|=e),Wy(r.return,e,t),a.lanes|=e;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(D(341));o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),Wy(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}tn(n,t,s.children,e),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,rc(t,e),s=fi(s),i=i(s),t.flags|=1,tn(n,t,i,e),t.child;case 14:return i=t.type,s=xi(i,t.pendingProps),s=xi(i.type,s),$b(n,t,i,s,e);case 15:return DC(n,t,t.type,t.pendingProps,e);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:xi(i,s),Gp(n,t),t.tag=1,xn(i)?(n=!0,Hm(t)):n=!1,rc(t,e),NC(t,i,s),Xy(t,i,s,e),Yy(null,t,i,!0,n,e);case 19:return zC(n,t,e);case 22:return jC(n,t,e)}throw Error(D(156,t.tag))};function n2(n,t){return PE(n,t)}function YR(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(n,t,e,i){return new YR(n,t,e,i)}function O1(n){return n=n.prototype,!(!n||!n.isReactComponent)}function QR(n){if(typeof n=="function")return O1(n)?1:0;if(n!=null){if(n=n.$$typeof,n===i1)return 11;if(n===s1)return 14}return 2}function Po(n,t){var e=n.alternate;return e===null?(e=ci(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function qp(n,t,e,i,s,r){var o=2;if(i=n,typeof n=="function")O1(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case jl:return ul(e.children,s,r,t);case n1:o=8,s|=8;break;case yy:return n=ci(12,e,t,s|2),n.elementType=yy,n.lanes=r,n;case vy:return n=ci(13,e,t,s),n.elementType=vy,n.lanes=r,n;case xy:return n=ci(19,e,t,s),n.elementType=xy,n.lanes=r,n;case dE:return Zg(e,s,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case uE:o=10;break t;case hE:o=9;break t;case i1:o=11;break t;case s1:o=14;break t;case kr:o=16,i=null;break t}throw Error(D(130,n==null?n:typeof n,""))}return t=ci(o,e,t,s),t.elementType=n,t.type=i,t.lanes=r,t}function ul(n,t,e,i){return n=ci(7,n,i,t),n.lanes=e,n}function Zg(n,t,e,i){return n=ci(22,n,i,t),n.elementType=dE,n.lanes=e,n.stateNode={isHidden:!1},n}function H0(n,t,e){return n=ci(6,n,null,t),n.lanes=e,n}function U0(n,t,e){return t=ci(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function ZR(n,t,e,i,s){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E0(0),this.expirationTimes=E0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function B1(n,t,e,i,s,r,o,a,l){return n=new ZR(n,t,e,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=ci(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},A1(r),n}function JR(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dl,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}function i2(n){if(!n)return Ro;n=n._reactInternals;t:{if(Al(n)!==n||n.tag!==1)throw Error(D(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(D(171))}if(n.tag===1){var e=n.type;if(xn(e))return iC(n,e,t)}return t}function s2(n,t,e,i,s,r,o,a,l){return n=B1(e,i,!0,n,s,r,o,a,l),n.context=i2(null),e=n.current,i=sn(),s=To(e),r=cr(i,s),r.callback=t??null,ko(e,r,s),n.current.lanes=s,Bf(n,s,i),wn(n,i),n}function Jg(n,t,e,i){var s=t.current,r=sn(),o=To(s);return e=i2(e),t.context===null?t.context=e:t.pendingContext=e,t=cr(r,o),t.payload={element:n},i=i===void 0?null:i,i!==null&&(t.callback=i),n=ko(s,t,o),n!==null&&(ji(n,s,o,r),Hp(n,s,o)),o}function ng(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function tA(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function z1(n,t){tA(n,t),(n=n.alternate)&&tA(n,t)}function tN(){return null}var r2=typeof reportError=="function"?reportError:function(n){console.error(n)};function V1(n){this._internalRoot=n}t0.prototype.render=V1.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(D(409));Jg(n,t,null,null)};t0.prototype.unmount=V1.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;yl(function(){Jg(null,n,null,null)}),t[pr]=null}};function t0(n){this._internalRoot=n}t0.prototype.unstable_scheduleHydration=function(n){if(n){var t=jE();n={blockedOn:null,target:n,priority:t};for(var e=0;e<Tr.length&&t!==0&&t<Tr[e].priority;e++);Tr.splice(e,0,n),e===0&&OE(n)}};function $1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function e0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function eA(){}function eN(n,t,e,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=ng(o);r.call(u)}}var o=s2(t,i,n,0,null,!1,!1,"",eA);return n._reactRootContainer=o,n[pr]=o.current,Hh(n.nodeType===8?n.parentNode:n),yl(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var u=ng(l);a.call(u)}}var l=B1(n,0,!1,null,null,!1,!1,"",eA);return n._reactRootContainer=l,n[pr]=l.current,Hh(n.nodeType===8?n.parentNode:n),yl(function(){Jg(t,l,e,i)}),l}function n0(n,t,e,i,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=ng(o);a.call(l)}}Jg(t,o,n,s)}else o=eN(e,t,n,s,i);return ng(o)}IE=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=Ju(t.pendingLanes);e!==0&&(a1(t,e|1),wn(t,Kt()),!(ht&6)&&(Eu=Kt()+500,Vo()))}break;case 13:yl(function(){var i=mr(n,1);if(i!==null){var s=sn();ji(i,n,1,s)}}),z1(n,1)}};l1=function(n){if(n.tag===13){var t=mr(n,134217728);if(t!==null){var e=sn();ji(t,n,134217728,e)}z1(n,134217728)}};DE=function(n){if(n.tag===13){var t=To(n),e=mr(n,t);if(e!==null){var i=sn();ji(e,n,t,i)}z1(n,t)}};jE=function(){return vt};FE=function(n,t){var e=vt;try{return vt=n,t()}finally{vt=e}};Py=function(n,t,e){switch(t){case"input":if(Ay(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=Gg(i);if(!s)throw Error(D(90));pE(i),Ay(i,s)}}}break;case"textarea":gE(n,e);break;case"select":t=e.value,t!=null&&ec(n,!!e.multiple,t,!1)}};SE=D1;EE=yl;var nN={usingClientEntryPoint:!1,Events:[Vf,zl,Gg,bE,AE,D1]},Uu={findFiberByHostInstance:Jo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iN={bundleType:Uu.bundleType,version:Uu.version,rendererPackageName:Uu.rendererPackageName,rendererConfig:Uu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:br.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=_E(n),n===null?null:n.stateNode},findFiberByHostInstance:Uu.findFiberByHostInstance||tN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bp.isDisabled&&bp.supportsFiber)try{$g=bp.inject(iN),hs=bp}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nN;Wn.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$1(t))throw Error(D(200));return JR(n,t,null,e)};Wn.createRoot=function(n,t){if(!$1(n))throw Error(D(299));var e=!1,i="",s=r2;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=B1(n,1,!1,null,null,e,!1,i,s),n[pr]=t.current,Hh(n.nodeType===8?n.parentNode:n),new V1(t)};Wn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(D(188)):(n=Object.keys(n).join(","),Error(D(268,n)));return n=_E(t),n=n===null?null:n.stateNode,n};Wn.flushSync=function(n){return yl(n)};Wn.hydrate=function(n,t,e){if(!e0(t))throw Error(D(200));return n0(null,n,t,!0,e)};Wn.hydrateRoot=function(n,t,e){if(!$1(n))throw Error(D(405));var i=e!=null&&e.hydratedSources||null,s=!1,r="",o=r2;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=s2(t,null,n,1,e??null,s,!1,r,o),n[pr]=t.current,Hh(n),i)for(n=0;n<i.length;n++)e=i[n],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new t0(t)};Wn.render=function(n,t,e){if(!e0(t))throw Error(D(200));return n0(null,n,t,!1,e)};Wn.unmountComponentAtNode=function(n){if(!e0(n))throw Error(D(40));return n._reactRootContainer?(yl(function(){n0(null,null,n,!1,function(){n._reactRootContainer=null,n[pr]=null})}),!0):!1};Wn.unstable_batchedUpdates=D1;Wn.unstable_renderSubtreeIntoContainer=function(n,t,e,i){if(!e0(e))throw Error(D(200));if(n==null||n._reactInternals===void 0)throw Error(D(38));return n0(n,t,e,!1,i)};Wn.version="18.3.1-next-f1338f8080-20240426";function o2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o2)}catch(n){console.error(n)}}o2(),oE.exports=Wn;var sN=oE.exports,a2,nA=sN;a2=nA.createRoot,nA.hydrateRoot;const rN="modulepreload",oN=function(n){return"/"+n},iA={},Ap=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(e.map(l=>{if(l=oN(l),l in iA)return;iA[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":rN,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},aN=(n,t,e)=>{const i=n[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((s,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==e?". Note that variables only represent file names one level deep.":""))))})},l2=P.createContext(void 0),sA={},lN=({children:n})=>{const[t,e]=P.useState(()=>localStorage.getItem("preferred-language")||"es"),[i,s]=P.useState(!0);P.useEffect(()=>{(async()=>{const u=["es","en","fr","pt"];try{for(const h of u){const d=await aN(Object.assign({"../locales/en.json":()=>Ap(()=>import("./en-CxQe6-vh.js"),[]),"../locales/es.json":()=>Ap(()=>import("./es-BjSr2SK4.js"),[]),"../locales/fr.json":()=>Ap(()=>import("./fr-toksLmxv.js"),[]),"../locales/pt.json":()=>Ap(()=>import("./pt-CCbdhMD3.js"),[])}),`../locales/${h}.json`,3);sA[h]=d.default}s(!1)}catch(h){console.error("Error loading translations:",h),s(!1)}})()},[]);const a={currentLanguage:t,setLanguage:l=>{e(l),localStorage.setItem("preferred-language",l)},t:l=>{if(i)return l;const u=l.split(".");let h=sA[t]||{};for(const d of u)if(h=h[d],h===void 0)return console.warn(`Translation key "${l}" not found for language "${t}"`),l;return typeof h=="string"?h:l},isLoading:i};return g.jsx(l2.Provider,{value:a,children:n})},se=()=>{const n=P.useContext(l2);if(n===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return n},c2=P.createContext(void 0),Sp="lab-patagonia-cookie-consent",Ep="lab-patagonia-cookie-consent-date",cN=6*30*24*60*60*1e3,uN=({children:n})=>{const[t,e]=P.useState(null),[i,s]=P.useState(!1);P.useEffect(()=>{(()=>{const p=localStorage.getItem(Sp),y=localStorage.getItem(Ep);if(p&&y){const x=parseInt(y);Date.now()-x>cN?(localStorage.removeItem(Sp),localStorage.removeItem(Ep),s(!0)):(e(JSON.parse(p)),s(!1))}else s(!0)})()},[]);const r=f=>{e(f),localStorage.setItem(Sp,JSON.stringify(f)),localStorage.setItem(Ep,Date.now().toString()),s(!1)},d={cookiePreferences:t,showBanner:i,acceptAllCookies:()=>{r({essential:!0,analytics:!0,preferences:!0})},rejectAllCookies:()=>{r({essential:!0,analytics:!1,preferences:!1})},updateCookiePreferences:f=>{r(f)},resetCookiePreferences:()=>{localStorage.removeItem(Sp),localStorage.removeItem(Ep),e(null),s(!0)},hideBanner:()=>{s(!1)}};return g.jsx(c2.Provider,{value:d,children:n})},u2=()=>{const n=P.useContext(c2);if(n===void 0)throw new Error("useCookies must be used within a CookieProvider");return n};/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rA="popstate";function hN(n={}){function t(i,s){let{pathname:r,search:o,hash:a}=i.location;return lv("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(i,s){return typeof s=="string"?s:Zh(s)}return fN(t,e,null,n)}function zt(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function gs(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dN(){return Math.random().toString(36).substring(2,10)}function oA(n,t){return{usr:n.state,key:n.key,idx:t}}function lv(n,t,e=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?Ru(t):t,state:e,key:t&&t.key||i||dN()}}function Zh({pathname:n="/",search:t="",hash:e=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(n+=e.charAt(0)==="#"?e:"#"+e),n}function Ru(n){let t={};if(n){let e=n.indexOf("#");e>=0&&(t.hash=n.substring(e),n=n.substring(0,e));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function fN(n,t,e,i={}){let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a="POP",l=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function d(){a="POP";let A=h(),m=A==null?null:A-u;u=A,l&&l({action:a,location:x.location,delta:m})}function f(A,m){a="PUSH";let w=lv(x.location,A,m);u=h()+1;let b=oA(w,u),C=x.createHref(w);try{o.pushState(b,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(C)}r&&l&&l({action:a,location:x.location,delta:1})}function p(A,m){a="REPLACE";let w=lv(x.location,A,m);u=h();let b=oA(w,u),C=x.createHref(w);o.replaceState(b,"",C),r&&l&&l({action:a,location:x.location,delta:0})}function y(A){return pN(A)}let x={get action(){return a},get location(){return n(s,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(rA,d),l=A,()=>{s.removeEventListener(rA,d),l=null}},createHref(A){return t(s,A)},createURL:y,encodeLocation(A){let m=y(A);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(A){return o.go(A)}};return x}function pN(n,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),zt(e,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Zh(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function h2(n,t,e="/"){return mN(n,t,e,!1)}function mN(n,t,e,i){let s=typeof t=="string"?Ru(t):t,r=yr(s.pathname||"/",e);if(r==null)return null;let o=d2(n);gN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=_N(r);a=CN(o[l],u,i)}return a}function d2(n,t=[],e=[],i="",s=!1){let r=(o,a,l=s,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;zt(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let d=ur([i,h.relativePath]),f=e.concat(h);o.children&&o.children.length>0&&(zt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),d2(o.children,t,f,d,l)),!(o.path==null&&!o.index)&&t.push({path:d,score:SN(d,o.index),routesMeta:f})};return n.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))r(o,a);else for(let u of f2(o.path))r(o,a,!0,u)}),t}function f2(n){let t=n.split("/");if(t.length===0)return[];let[e,...i]=t,s=e.endsWith("?"),r=e.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=f2(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function gN(n){n.sort((t,e)=>t.score!==e.score?e.score-t.score:EN(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var yN=/^:[\w-]+$/,vN=3,xN=2,wN=1,bN=10,AN=-2,aA=n=>n==="*";function SN(n,t){let e=n.split("/"),i=e.length;return e.some(aA)&&(i+=AN),t&&(i+=xN),e.filter(s=>!aA(s)).reduce((s,r)=>s+(yN.test(r)?vN:r===""?wN:bN),i)}function EN(n,t){return n.length===t.length&&n.slice(0,-1).every((i,s)=>i===t[s])?n[n.length-1]-t[t.length-1]:0}function CN(n,t,e=!1){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=r==="/"?t:t.slice(r.length)||"/",d=ig({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d&&u&&e&&!i[i.length-1].route.index&&(d=ig({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:ur([r,d.pathname]),pathnameBase:RN(ur([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=ur([r,d.pathnameBase]))}return o}function ig(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[e,i]=kN(n.path,n.caseSensitive,n.end),s=t.match(e);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((u,{paramName:h,isOptional:d},f)=>{if(h==="*"){let y=a[f]||"";o=r.slice(0,r.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:n}}function kN(n,t=!1,e=!0){gs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function _N(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function yr(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=n.charAt(e);return i&&i!=="/"?null:n.slice(e)||"/"}function TN(n,t="/"){let{pathname:e,search:i="",hash:s=""}=typeof n=="string"?Ru(n):n;return{pathname:e?e.startsWith("/")?e:PN(e,t):t,search:NN(i),hash:LN(s)}}function PN(n,t){let e=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?e.length>1&&e.pop():s!=="."&&e.push(s)}),e.length>1?e.join("/"):"/"}function W0(n,t,e,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MN(n){return n.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function p2(n){let t=MN(n);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function m2(n,t,e,i=!1){let s;typeof n=="string"?s=Ru(n):(s={...n},zt(!s.pathname||!s.pathname.includes("?"),W0("?","pathname","search",s)),zt(!s.pathname||!s.pathname.includes("#"),W0("#","pathname","hash",s)),zt(!s.search||!s.search.includes("#"),W0("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=e;else{let d=t.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=TN(s,a),u=o&&o!=="/"&&o.endsWith("/"),h=(r||o===".")&&e.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var ur=n=>n.join("/").replace(/\/\/+/g,"/"),RN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function IN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var g2=["POST","PUT","PATCH","DELETE"];new Set(g2);var DN=["GET",...g2];new Set(DN);var Nu=P.createContext(null);Nu.displayName="DataRouter";var i0=P.createContext(null);i0.displayName="DataRouterState";P.createContext(!1);var y2=P.createContext({isTransitioning:!1});y2.displayName="ViewTransition";var jN=P.createContext(new Map);jN.displayName="Fetchers";var FN=P.createContext(null);FN.displayName="Await";var xs=P.createContext(null);xs.displayName="Navigation";var Hf=P.createContext(null);Hf.displayName="Location";var Ar=P.createContext({outlet:null,matches:[],isDataRoute:!1});Ar.displayName="Route";var H1=P.createContext(null);H1.displayName="RouteError";function ON(n,{relative:t}={}){zt(Uf(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=P.useContext(xs),{hash:s,pathname:r,search:o}=Wf(n,{relative:t}),a=r;return e!=="/"&&(a=r==="/"?e:ur([e,r])),i.createHref({pathname:a,search:o,hash:s})}function Uf(){return P.useContext(Hf)!=null}function Sl(){return zt(Uf(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Hf).location}var v2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x2(n){P.useContext(xs).static||P.useLayoutEffect(n)}function BN(){let{isDataRoute:n}=P.useContext(Ar);return n?ZN():zN()}function zN(){zt(Uf(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Nu),{basename:t,navigator:e}=P.useContext(xs),{matches:i}=P.useContext(Ar),{pathname:s}=Sl(),r=JSON.stringify(p2(i)),o=P.useRef(!1);return x2(()=>{o.current=!0}),P.useCallback((l,u={})=>{if(gs(o.current,v2),!o.current)return;if(typeof l=="number"){e.go(l);return}let h=m2(l,JSON.parse(r),s,u.relative==="path");n==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:ur([t,h.pathname])),(u.replace?e.replace:e.push)(h,u.state,u)},[t,e,r,s,n])}P.createContext(null);function Wf(n,{relative:t}={}){let{matches:e}=P.useContext(Ar),{pathname:i}=Sl(),s=JSON.stringify(p2(e));return P.useMemo(()=>m2(n,JSON.parse(s),i,t==="path"),[n,s,i,t])}function VN(n,t){return w2(n,t)}function w2(n,t,e,i){var m;zt(Uf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=P.useContext(xs),{matches:r}=P.useContext(Ar),o=r[r.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let w=h&&h.path||"";b2(l,!h||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let d=Sl(),f;if(t){let w=typeof t=="string"?Ru(t):t;zt(u==="/"||((m=w.pathname)==null?void 0:m.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=d;let p=f.pathname||"/",y=p;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=h2(n,{pathname:y});gs(h||x!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),gs(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=GN(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:ur([u,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:ur([u,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),r,e,i);return t&&A?P.createElement(Hf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},A):A}function $N(){let n=QN(),t=IN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),e=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:r},"ErrorBoundary")," or"," ",P.createElement("code",{style:r},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),e?P.createElement("pre",{style:s},e):null,o)}var HN=P.createElement($N,null),UN=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error!==void 0?P.createElement(Ar.Provider,{value:this.props.routeContext},P.createElement(H1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function WN({routeContext:n,match:t,children:e}){let i=P.useContext(Nu);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(Ar.Provider,{value:n},e)}function GN(n,t=[],e=null,i=null){if(n==null){if(!e)return null;if(e.errors)n=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)n=e.matches;else return null}let s=n,r=e==null?void 0:e.errors;if(r!=null){let l=s.findIndex(u=>u.route.id&&(r==null?void 0:r[u.route.id])!==void 0);zt(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,l+1))}let o=!1,a=-1;if(e)for(let l=0;l<s.length;l++){let u=s[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:h,errors:d}=e,f=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){o=!0,a>=0?s=s.slice(0,a+1):s=[s[0]];break}}}return s.reduceRight((l,u,h)=>{let d,f=!1,p=null,y=null;e&&(d=r&&u.route.id?r[u.route.id]:void 0,p=u.route.errorElement||HN,o&&(a<0&&h===0?(b2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):a===h&&(f=!0,y=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,h+1)),A=()=>{let m;return d?m=p:f?m=y:u.route.Component?m=P.createElement(u.route.Component,null):u.route.element?m=u.route.element:m=l,P.createElement(WN,{match:u,routeContext:{outlet:l,matches:x,isDataRoute:e!=null},children:m})};return e&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?P.createElement(UN,{location:e.location,revalidation:e.revalidation,component:p,error:d,children:A(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):A()},null)}function U1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XN(n){let t=P.useContext(Nu);return zt(t,U1(n)),t}function KN(n){let t=P.useContext(i0);return zt(t,U1(n)),t}function qN(n){let t=P.useContext(Ar);return zt(t,U1(n)),t}function W1(n){let t=qN(n),e=t.matches[t.matches.length-1];return zt(e.route.id,`${n} can only be used on routes that contain a unique "id"`),e.route.id}function YN(){return W1("useRouteId")}function QN(){var i;let n=P.useContext(H1),t=KN("useRouteError"),e=W1("useRouteError");return n!==void 0?n:(i=t.errors)==null?void 0:i[e]}function ZN(){let{router:n}=XN("useNavigate"),t=W1("useNavigate"),e=P.useRef(!1);return x2(()=>{e.current=!0}),P.useCallback(async(s,r={})=>{gs(e.current,v2),e.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:t,...r}))},[n,t])}var lA={};function b2(n,t,e){!t&&!lA[n]&&(lA[n]=!0,gs(!1,e))}P.memo(JN);function JN({routes:n,future:t,state:e}){return w2(n,void 0,e,t)}function Yn(n){zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tL({basename:n="/",children:t=null,location:e,navigationType:i="POP",navigator:s,static:r=!1}){zt(!Uf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=P.useMemo(()=>({basename:o,navigator:s,static:r,future:{}}),[o,s,r]);typeof e=="string"&&(e=Ru(e));let{pathname:l="/",search:u="",hash:h="",state:d=null,key:f="default"}=e,p=P.useMemo(()=>{let y=yr(l,o);return y==null?null:{location:{pathname:y,search:u,hash:h,state:d,key:f},navigationType:i}},[o,l,u,h,d,f,i]);return gs(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:P.createElement(xs.Provider,{value:a},P.createElement(Hf.Provider,{children:t,value:p}))}function eL({children:n,location:t}){return VN(cv(n),t)}function cv(n,t=[]){let e=[];return P.Children.forEach(n,(i,s)=>{if(!P.isValidElement(i))return;let r=[...t,s];if(i.type===P.Fragment){e.push.apply(e,cv(i.props.children,r));return}zt(i.type===Yn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),zt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=cv(i.props.children,r)),e.push(o)}),e}var Yp="get",Qp="application/x-www-form-urlencoded";function s0(n){return n!=null&&typeof n.tagName=="string"}function nL(n){return s0(n)&&n.tagName.toLowerCase()==="button"}function iL(n){return s0(n)&&n.tagName.toLowerCase()==="form"}function sL(n){return s0(n)&&n.tagName.toLowerCase()==="input"}function rL(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oL(n,t){return n.button===0&&(!t||t==="_self")&&!rL(n)}var Cp=null;function aL(){if(Cp===null)try{new FormData(document.createElement("form"),0),Cp=!1}catch{Cp=!0}return Cp}var lL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function G0(n){return n!=null&&!lL.has(n)?(gs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Qp}"`),null):n}function cL(n,t){let e,i,s,r,o;if(iL(n)){let a=n.getAttribute("action");i=a?yr(a,t):null,e=n.getAttribute("method")||Yp,s=G0(n.getAttribute("enctype"))||Qp,r=new FormData(n)}else if(nL(n)||sL(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(i=l?yr(l,t):null,e=n.getAttribute("formmethod")||a.getAttribute("method")||Yp,s=G0(n.getAttribute("formenctype"))||G0(a.getAttribute("enctype"))||Qp,r=new FormData(a,n),!aL()){let{name:u,type:h,value:d}=n;if(h==="image"){let f=u?`${u}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else u&&r.append(u,d)}}else{if(s0(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Yp,i=null,s=Qp,o=n}return r&&s==="text/plain"&&(o=r,r=void 0),{action:i,method:e.toLowerCase(),encType:s,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function G1(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function uL(n,t,e){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${e}`:t&&yr(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${e}`,i}async function hL(n,t){if(n.id in t)return t[n.id];try{let e=await import(n.module);return t[n.id]=e,e}catch(e){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dL(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function fL(n,t,e){let i=await Promise.all(n.map(async s=>{let r=t.routes[s.route.id];if(r){let o=await hL(r,e);return o.links?o.links():[]}return[]}));return yL(i.flat(1).filter(dL).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function cA(n,t,e,i,s,r){let o=(l,u)=>e[u]?l.route.id!==e[u].route.id:!0,a=(l,u)=>{var h;return e[u].pathname!==l.pathname||((h=e[u].route.path)==null?void 0:h.endsWith("*"))&&e[u].params["*"]!==l.params["*"]};return r==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):r==="data"?t.filter((l,u)=>{var d;let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=e[0])==null?void 0:d.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function pL(n,t,{includeHydrateFallback:e}={}){return mL(n.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let r=[s.module];return s.clientActionModule&&(r=r.concat(s.clientActionModule)),s.clientLoaderModule&&(r=r.concat(s.clientLoaderModule)),e&&s.hydrateFallbackModule&&(r=r.concat(s.hydrateFallbackModule)),s.imports&&(r=r.concat(s.imports)),r}).flat(1))}function mL(n){return[...new Set(n)]}function gL(n){let t={},e=Object.keys(n).sort();for(let i of e)t[i]=n[i];return t}function yL(n,t){let e=new Set;return new Set(t),n.reduce((i,s)=>{let r=JSON.stringify(gL(s));return e.has(r)||(e.add(r),i.push({key:r,link:s})),i},[])}function A2(){let n=P.useContext(Nu);return G1(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function vL(){let n=P.useContext(i0);return G1(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var X1=P.createContext(void 0);X1.displayName="FrameworkContext";function S2(){let n=P.useContext(X1);return G1(n,"You must render this element inside a <HydratedRouter> element"),n}function xL(n,t){let e=P.useContext(X1),[i,s]=P.useState(!1),[r,o]=P.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=P.useRef(null);P.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let x=m=>{m.forEach(w=>{o(w.isIntersecting)})},A=new IntersectionObserver(x,{threshold:.5});return f.current&&A.observe(f.current),()=>{A.disconnect()}}},[n]),P.useEffect(()=>{if(i){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[i]);let p=()=>{s(!0)},y=()=>{s(!1),o(!1)};return e?n!=="intent"?[r,f,{}]:[r,f,{onFocus:Wu(a,p),onBlur:Wu(l,y),onMouseEnter:Wu(u,p),onMouseLeave:Wu(h,y),onTouchStart:Wu(d,p)}]:[!1,f,{}]}function Wu(n,t){return e=>{n&&n(e),e.defaultPrevented||t(e)}}function wL({page:n,...t}){let{router:e}=A2(),i=P.useMemo(()=>h2(e.routes,n,e.basename),[e.routes,n,e.basename]);return i?P.createElement(AL,{page:n,matches:i,...t}):null}function bL(n){let{manifest:t,routeModules:e}=S2(),[i,s]=P.useState([]);return P.useEffect(()=>{let r=!1;return fL(n,t,e).then(o=>{r||s(o)}),()=>{r=!0}},[n,t,e]),i}function AL({page:n,matches:t,...e}){let i=Sl(),{manifest:s,routeModules:r}=S2(),{basename:o}=A2(),{loaderData:a,matches:l}=vL(),u=P.useMemo(()=>cA(n,t,l,s,i,"data"),[n,t,l,s,i]),h=P.useMemo(()=>cA(n,t,l,s,i,"assets"),[n,t,l,s,i]),d=P.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let y=new Set,x=!1;if(t.forEach(m=>{var b;let w=s.routes[m.route.id];!w||!w.hasLoader||(!u.some(C=>C.route.id===m.route.id)&&m.route.id in a&&((b=r[m.route.id])!=null&&b.shouldRevalidate)||w.hasClientLoader?x=!0:y.add(m.route.id))}),y.size===0)return[];let A=uL(n,o,"data");return x&&y.size>0&&A.searchParams.set("_routes",t.filter(m=>y.has(m.route.id)).map(m=>m.route.id).join(",")),[A.pathname+A.search]},[o,a,i,s,u,t,n,r]),f=P.useMemo(()=>pL(h,s),[h,s]),p=bL(h);return P.createElement(P.Fragment,null,d.map(y=>P.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...e})),f.map(y=>P.createElement("link",{key:y,rel:"modulepreload",href:y,...e})),p.map(({key:y,link:x})=>P.createElement("link",{key:y,nonce:e.nonce,...x})))}function SL(...n){return t=>{n.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var E2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E2&&(window.__reactRouterVersion="7.8.1")}catch{}function EL({basename:n,children:t,window:e}){let i=P.useRef();i.current==null&&(i.current=hN({window:e,v5Compat:!0}));let s=i.current,[r,o]=P.useState({action:s.action,location:s.location}),a=P.useCallback(l=>{P.startTransition(()=>o(l))},[o]);return P.useLayoutEffect(()=>s.listen(a),[s,a]),P.createElement(tL,{basename:n,children:t,location:r.location,navigationType:r.action,navigator:s})}var C2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k2=P.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:s,reloadDocument:r,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d,...f},p){let{basename:y}=P.useContext(xs),x=typeof u=="string"&&C2.test(u),A,m=!1;if(typeof u=="string"&&x&&(A=u,E2))try{let R=new URL(window.location.href),N=u.startsWith("//")?new URL(R.protocol+u):new URL(u),I=yr(N.pathname,y);N.origin===R.origin&&I!=null?u=I+N.search+N.hash:m=!0}catch{gs(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=ON(u,{relative:s}),[b,C,k]=xL(i,f),_=TL(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d});function T(R){t&&t(R),R.defaultPrevented||_(R)}let M=P.createElement("a",{...f,...k,href:A||w,onClick:m||r?t:T,ref:SL(p,C),target:l,"data-discover":!x&&e==="render"?"true":void 0});return b&&!x?P.createElement(P.Fragment,null,M,P.createElement(wL,{page:w})):M});k2.displayName="Link";var CL=P.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:s=!1,style:r,to:o,viewTransition:a,children:l,...u},h){let d=Wf(o,{relative:u.relative}),f=Sl(),p=P.useContext(i0),{navigator:y,basename:x}=P.useContext(xs),A=p!=null&&LL(d)&&a===!0,m=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,w=f.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;e||(w=w.toLowerCase(),b=b?b.toLowerCase():null,m=m.toLowerCase()),b&&x&&(b=yr(b,x)||b);const C=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let k=w===m||!s&&w.startsWith(m)&&w.charAt(C)==="/",_=b!=null&&(b===m||!s&&b.startsWith(m)&&b.charAt(m.length)==="/"),T={isActive:k,isPending:_,isTransitioning:A},M=k?t:void 0,R;typeof i=="function"?R=i(T):R=[i,k?"active":null,_?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let N=typeof r=="function"?r(T):r;return P.createElement(k2,{...u,"aria-current":M,className:R,ref:h,style:N,to:o,viewTransition:a},typeof l=="function"?l(T):l)});CL.displayName="NavLink";var kL=P.forwardRef(({discover:n="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:s,state:r,method:o=Yp,action:a,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:d,...f},p)=>{let y=RL(),x=NL(a,{relative:u}),A=o.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&C2.test(a),w=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let C=b.nativeEvent.submitter,k=(C==null?void 0:C.getAttribute("formmethod"))||o;y(C||b.currentTarget,{fetcherKey:t,method:k,navigate:e,replace:s,state:r,relative:u,preventScrollReset:h,viewTransition:d})};return P.createElement("form",{ref:p,method:A,action:x,onSubmit:i?l:w,...f,"data-discover":!m&&n==="render"?"true":void 0})});kL.displayName="Form";function _L(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _2(n){let t=P.useContext(Nu);return zt(t,_L(n)),t}function TL(n,{target:t,replace:e,state:i,preventScrollReset:s,relative:r,viewTransition:o}={}){let a=BN(),l=Sl(),u=Wf(n,{relative:r});return P.useCallback(h=>{if(oL(h,t)){h.preventDefault();let d=e!==void 0?e:Zh(l)===Zh(u);a(n,{replace:d,state:i,preventScrollReset:s,relative:r,viewTransition:o})}},[l,a,u,e,i,t,n,s,r,o])}var PL=0,ML=()=>`__${String(++PL)}__`;function RL(){let{router:n}=_2("useSubmit"),{basename:t}=P.useContext(xs),e=YN();return P.useCallback(async(i,s={})=>{let{action:r,method:o,encType:a,formData:l,body:u}=cL(i,t);if(s.navigate===!1){let h=s.fetcherKey||ML();await n.fetch(h,e,s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await n.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:l,body:u,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:e,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,t,e])}function NL(n,{relative:t}={}){let{basename:e}=P.useContext(xs),i=P.useContext(Ar);zt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),r={...Wf(n||".",{relative:t})},o=Sl();if(n==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let h=a.toString();r.search=h?`?${h}`:""}}return(!n||n===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(r.pathname=r.pathname==="/"?e:ur([e,r.pathname])),Zh(r)}function LL(n,{relative:t}={}){let e=P.useContext(y2);zt(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=_2("useViewTransitionState"),s=Wf(n,{relative:t});if(!e.isTransitioning)return!1;let r=yr(e.currentLocation.pathname,i)||e.currentLocation.pathname,o=yr(e.nextLocation.pathname,i)||e.nextLocation.pathname;return ig(s.pathname,o)!=null||ig(s.pathname,r)!=null}const K1=P.createContext({});function q1(n){const t=P.useRef(null);return t.current===null&&(t.current=n()),t.current}const Y1=typeof window<"u",T2=Y1?P.useLayoutEffect:P.useEffect,r0=P.createContext(null);function Q1(n,t){n.indexOf(t)===-1&&n.push(t)}function Z1(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const vr=(n,t,e)=>e>t?t:e<n?n:e;let sg=()=>{};const xr={},P2=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function M2(n){return typeof n=="object"&&n!==null}const R2=n=>/^0[^.\s]+$/u.test(n);function J1(n){let t;return()=>(t===void 0&&(t=n()),t)}const hi=n=>n,IL=(n,t)=>e=>t(n(e)),Gf=(...n)=>n.reduce(IL),Jh=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class tw{constructor(){this.subscriptions=[]}add(t){return Q1(this.subscriptions,t),()=>Z1(this.subscriptions,t)}notify(t,e,i){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,i);else for(let r=0;r<s;r++){const o=this.subscriptions[r];o&&o(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fs=n=>n*1e3,ps=n=>n/1e3;function N2(n,t){return t?n*(1e3/t):0}const L2=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,DL=1e-7,jL=12;function FL(n,t,e,i,s){let r,o,a=0;do o=t+(e-t)/2,r=L2(o,i,s)-n,r>0?e=o:t=o;while(Math.abs(r)>DL&&++a<jL);return o}function Xf(n,t,e,i){if(n===t&&e===i)return hi;const s=r=>FL(r,0,1,n,e);return r=>r===0||r===1?r:L2(s(r),t,i)}const I2=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,D2=n=>t=>1-n(1-t),j2=Xf(.33,1.53,.69,.99),ew=D2(j2),F2=I2(ew),O2=n=>(n*=2)<1?.5*ew(n):.5*(2-Math.pow(2,-10*(n-1))),nw=n=>1-Math.sin(Math.acos(n)),B2=D2(nw),z2=I2(nw),OL=Xf(.42,0,1,1),BL=Xf(0,0,.58,1),V2=Xf(.42,0,.58,1),zL=n=>Array.isArray(n)&&typeof n[0]!="number",$2=n=>Array.isArray(n)&&typeof n[0]=="number",uA={linear:hi,easeIn:OL,easeInOut:V2,easeOut:BL,circIn:nw,circInOut:z2,circOut:B2,backIn:ew,backInOut:F2,backOut:j2,anticipate:O2},VL=n=>typeof n=="string",hA=n=>{if($2(n)){sg(n.length===4);const[t,e,i,s]=n;return Xf(t,e,i,s)}else if(VL(n))return sg(uA[n]!==void 0),uA[n];return n},kp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],dA={value:null,addProjectionMetrics:null};function $L(n,t){let e=new Set,i=new Set,s=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(d){o.has(d)&&(h.schedule(d),n()),l++,d(a)}const h={schedule:(d,f=!1,p=!1)=>{const x=p&&s?e:i;return f&&o.add(d),x.has(d)||x.add(d),d},cancel:d=>{i.delete(d),o.delete(d)},process:d=>{if(a=d,s){r=!0;return}s=!0,[e,i]=[i,e],e.forEach(u),t&&dA.value&&dA.value.frameloop[t].push(l),l=0,e.clear(),s=!1,r&&(r=!1,h.process(d))}};return h}const HL=40;function H2(n,t){let e=!1,i=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,o=kp.reduce((b,C)=>(b[C]=$L(r,t?C:void 0),b),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:h,update:d,preRender:f,render:p,postRender:y}=o,x=()=>{const b=xr.useManualTiming?s.timestamp:performance.now();e=!1,xr.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(b-s.timestamp,HL),1)),s.timestamp=b,s.isProcessing=!0,a.process(s),l.process(s),u.process(s),h.process(s),d.process(s),f.process(s),p.process(s),y.process(s),s.isProcessing=!1,e&&t&&(i=!1,n(x))},A=()=>{e=!0,i=!0,s.isProcessing||n(x)};return{schedule:kp.reduce((b,C)=>{const k=o[C];return b[C]=(_,T=!1,M=!1)=>(e||A(),k.schedule(_,T,M)),b},{}),cancel:b=>{for(let C=0;C<kp.length;C++)o[kp[C]].cancel(b)},state:s,steps:o}}const{schedule:It,cancel:No,state:Te,steps:X0}=H2(typeof requestAnimationFrame<"u"?requestAnimationFrame:hi,!0);let Zp;function UL(){Zp=void 0}const yn={now:()=>(Zp===void 0&&yn.set(Te.isProcessing||xr.useManualTiming?Te.timestamp:performance.now()),Zp),set:n=>{Zp=n,queueMicrotask(UL)}},U2=n=>t=>typeof t=="string"&&t.startsWith(n),iw=U2("--"),WL=U2("var(--"),sw=n=>WL(n)?GL.test(n.split("/*")[0].trim()):!1,GL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Lu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},td={...Lu,transform:n=>vr(0,1,n)},_p={...Lu,default:1},Mh=n=>Math.round(n*1e5)/1e5,rw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XL(n){return n==null}const KL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ow=(n,t)=>e=>!!(typeof e=="string"&&KL.test(e)&&e.startsWith(n)||t&&!XL(e)&&Object.prototype.hasOwnProperty.call(e,t)),W2=(n,t,e)=>i=>{if(typeof i!="string")return i;const[s,r,o,a]=i.match(rw);return{[n]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},qL=n=>vr(0,255,n),K0={...Lu,transform:n=>Math.round(qL(n))},na={test:ow("rgb","red"),parse:W2("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+K0.transform(n)+", "+K0.transform(t)+", "+K0.transform(e)+", "+Mh(td.transform(i))+")"};function YL(n){let t="",e="",i="",s="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),s=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),s=n.substring(4,5),t+=t,e+=e,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}}const uv={test:ow("#"),parse:YL,transform:na.transform},Kf=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Er=Kf("deg"),ms=Kf("%"),Y=Kf("px"),QL=Kf("vh"),ZL=Kf("vw"),fA={...ms,parse:n=>ms.parse(n)/100,transform:n=>ms.transform(n*100)},Xl={test:ow("hsl","hue"),parse:W2("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+ms.transform(Mh(t))+", "+ms.transform(Mh(e))+", "+Mh(td.transform(i))+")"},Jt={test:n=>na.test(n)||uv.test(n)||Xl.test(n),parse:n=>na.test(n)?na.parse(n):Xl.test(n)?Xl.parse(n):uv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?na.transform(n):Xl.transform(n),getAnimatableNone:n=>{const t=Jt.parse(n);return t.alpha=0,Jt.transform(t)}},JL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tI(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(rw))==null?void 0:t.length)||0)+(((e=n.match(JL))==null?void 0:e.length)||0)>0}const G2="number",X2="color",eI="var",nI="var(",pA="${}",iI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ed(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},s=[];let r=0;const a=t.replace(iI,l=>(Jt.test(l)?(i.color.push(r),s.push(X2),e.push(Jt.parse(l))):l.startsWith(nI)?(i.var.push(r),s.push(eI),e.push(l)):(i.number.push(r),s.push(G2),e.push(parseFloat(l))),++r,pA)).split(pA);return{values:e,split:a,indexes:i,types:s}}function K2(n){return ed(n).values}function q2(n){const{split:t,types:e}=ed(n),i=t.length;return s=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],s[o]!==void 0){const a=e[o];a===G2?r+=Mh(s[o]):a===X2?r+=Jt.transform(s[o]):r+=s[o]}return r}}const sI=n=>typeof n=="number"?0:Jt.test(n)?Jt.getAnimatableNone(n):n;function rI(n){const t=K2(n);return q2(n)(t.map(sI))}const Lo={test:tI,parse:K2,createTransformer:q2,getAnimatableNone:rI};function q0(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function oI({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let s=0,r=0,o=0;if(!t)s=r=o=e;else{const a=e<.5?e*(1+t):e+t-e*t,l=2*e-a;s=q0(l,a,n+1/3),r=q0(l,a,n),o=q0(l,a,n-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:i}}function rg(n,t){return e=>e>0?t:n}const Ot=(n,t,e)=>n+(t-n)*e,Y0=(n,t,e)=>{const i=n*n,s=e*(t*t-i)+i;return s<0?0:Math.sqrt(s)},aI=[uv,na,Xl],lI=n=>aI.find(t=>t.test(n));function mA(n){const t=lI(n);if(!t)return!1;let e=t.parse(n);return t===Xl&&(e=oI(e)),e}const gA=(n,t)=>{const e=mA(n),i=mA(t);if(!e||!i)return rg(n,t);const s={...e};return r=>(s.red=Y0(e.red,i.red,r),s.green=Y0(e.green,i.green,r),s.blue=Y0(e.blue,i.blue,r),s.alpha=Ot(e.alpha,i.alpha,r),na.transform(s))},hv=new Set(["none","hidden"]);function cI(n,t){return hv.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function uI(n,t){return e=>Ot(n,t,e)}function aw(n){return typeof n=="number"?uI:typeof n=="string"?sw(n)?rg:Jt.test(n)?gA:fI:Array.isArray(n)?Y2:typeof n=="object"?Jt.test(n)?gA:hI:rg}function Y2(n,t){const e=[...n],i=e.length,s=n.map((r,o)=>aw(r)(r,t[o]));return r=>{for(let o=0;o<i;o++)e[o]=s[o](r);return e}}function hI(n,t){const e={...n,...t},i={};for(const s in e)n[s]!==void 0&&t[s]!==void 0&&(i[s]=aw(n[s])(n[s],t[s]));return s=>{for(const r in i)e[r]=i[r](s);return e}}function dI(n,t){const e=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const r=t.types[s],o=n.indexes[r][i[r]],a=n.values[o]??0;e[s]=a,i[r]++}return e}const fI=(n,t)=>{const e=Lo.createTransformer(t),i=ed(n),s=ed(t);return i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length?hv.has(n)&&!s.values.length||hv.has(t)&&!i.values.length?cI(n,t):Gf(Y2(dI(i,s),s.values),e):rg(n,t)};function Q2(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?Ot(n,t,e):aw(n)(n,t)}const pI=n=>{const t=({timestamp:e})=>n(e);return{start:(e=!0)=>It.update(t,e),stop:()=>No(t),now:()=>Te.isProcessing?Te.timestamp:yn.now()}},Z2=(n,t,e=10)=>{let i="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)i+=Math.round(n(r/(s-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},og=2e4;function lw(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<og;)t+=e,i=n.next(t);return t>=og?1/0:t}function mI(n,t=100,e){const i=e({...n,keyframes:[0,t]}),s=Math.min(lw(i),og);return{type:"keyframes",ease:r=>i.next(s*r).value/t,duration:ps(s)}}const gI=5;function J2(n,t,e){const i=Math.max(t-gI,0);return N2(e-n(i),t-i)}const Ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Q0=.001;function yI({duration:n=Ht.duration,bounce:t=Ht.bounce,velocity:e=Ht.velocity,mass:i=Ht.mass}){let s,r,o=1-t;o=vr(Ht.minDamping,Ht.maxDamping,o),n=vr(Ht.minDuration,Ht.maxDuration,ps(n)),o<1?(s=u=>{const h=u*o,d=h*n,f=h-e,p=dv(u,o),y=Math.exp(-d);return Q0-f/p*y},r=u=>{const d=u*o*n,f=d*e+e,p=Math.pow(o,2)*Math.pow(u,2)*n,y=Math.exp(-d),x=dv(Math.pow(u,2),o);return(-s(u)+Q0>0?-1:1)*((f-p)*y)/x}):(s=u=>{const h=Math.exp(-u*n),d=(u-e)*n+1;return-Q0+h*d},r=u=>{const h=Math.exp(-u*n),d=(e-u)*(n*n);return h*d});const a=5/n,l=xI(s,r,a);if(n=fs(n),isNaN(l))return{stiffness:Ht.stiffness,damping:Ht.damping,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const vI=12;function xI(n,t,e){let i=e;for(let s=1;s<vI;s++)i=i-n(i)/t(i);return i}function dv(n,t){return n*Math.sqrt(1-t*t)}const wI=["duration","bounce"],bI=["stiffness","damping","mass"];function yA(n,t){return t.some(e=>n[e]!==void 0)}function AI(n){let t={velocity:Ht.velocity,stiffness:Ht.stiffness,damping:Ht.damping,mass:Ht.mass,isResolvedFromDuration:!1,...n};if(!yA(n,bI)&&yA(n,wI))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),s=i*i,r=2*vr(.05,1,1-(n.bounce||0))*Math.sqrt(s);t={...t,mass:Ht.mass,stiffness:s,damping:r}}else{const e=yI(n);t={...t,...e,mass:Ht.mass},t.isResolvedFromDuration=!0}return t}function ag(n=Ht.visualDuration,t=Ht.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:s}=e;const r=e.keyframes[0],o=e.keyframes[e.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:u,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=AI({...e,velocity:-ps(e.velocity||0)}),y=f||0,x=u/(2*Math.sqrt(l*h)),A=o-r,m=ps(Math.sqrt(l/h)),w=Math.abs(A)<5;i||(i=w?Ht.restSpeed.granular:Ht.restSpeed.default),s||(s=w?Ht.restDelta.granular:Ht.restDelta.default);let b;if(x<1){const k=dv(m,x);b=_=>{const T=Math.exp(-x*m*_);return o-T*((y+x*m*A)/k*Math.sin(k*_)+A*Math.cos(k*_))}}else if(x===1)b=k=>o-Math.exp(-m*k)*(A+(y+m*A)*k);else{const k=m*Math.sqrt(x*x-1);b=_=>{const T=Math.exp(-x*m*_),M=Math.min(k*_,300);return o-T*((y+x*m*A)*Math.sinh(M)+k*A*Math.cosh(M))/k}}const C={calculatedDuration:p&&d||null,next:k=>{const _=b(k);if(p)a.done=k>=d;else{let T=k===0?y:0;x<1&&(T=k===0?fs(y):J2(b,k,_));const M=Math.abs(T)<=i,R=Math.abs(o-_)<=s;a.done=M&&R}return a.value=a.done?o:_,a},toString:()=>{const k=Math.min(lw(C),og),_=Z2(T=>C.next(k*T).value,k,30);return k+"ms "+_},toTransition:()=>{}};return C}ag.applyToOptions=n=>{const t=mI(n,100,ag);return n.ease=t.ease,n.duration=fs(t.duration),n.type="keyframes",n};function fv({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:h}){const d=n[0],f={done:!1,value:d},p=M=>a!==void 0&&M<a||l!==void 0&&M>l,y=M=>a===void 0?l:l===void 0||Math.abs(a-M)<Math.abs(l-M)?a:l;let x=e*t;const A=d+x,m=o===void 0?A:o(A);m!==A&&(x=m-d);const w=M=>-x*Math.exp(-M/i),b=M=>m+w(M),C=M=>{const R=w(M),N=b(M);f.done=Math.abs(R)<=u,f.value=f.done?m:N};let k,_;const T=M=>{p(f.value)&&(k=M,_=ag({keyframes:[f.value,y(f.value)],velocity:J2(b,M,f.value),damping:s,stiffness:r,restDelta:u,restSpeed:h}))};return T(0),{calculatedDuration:null,next:M=>{let R=!1;return!_&&k===void 0&&(R=!0,C(M),T(M)),k!==void 0&&M>=k?_.next(M-k):(!R&&C(M),f)}}}function SI(n,t,e){const i=[],s=e||xr.mix||Q2,r=n.length-1;for(let o=0;o<r;o++){let a=s(n[o],n[o+1]);if(t){const l=Array.isArray(t)?t[o]||hi:t;a=Gf(l,a)}i.push(a)}return i}function EI(n,t,{clamp:e=!0,ease:i,mixer:s}={}){const r=n.length;if(sg(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const o=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const a=SI(t,i,s),l=a.length,u=h=>{if(o&&h<n[0])return t[0];let d=0;if(l>1)for(;d<n.length-2&&!(h<n[d+1]);d++);const f=Jh(n[d],n[d+1],h);return a[d](f)};return e?h=>u(vr(n[0],n[r-1],h)):u}function CI(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const s=Jh(0,t,i);n.push(Ot(e,1,s))}}function kI(n){const t=[0];return CI(t,n.length-1),t}function _I(n,t){return n.map(e=>e*t)}function TI(n,t){return n.map(()=>t||V2).splice(0,n.length-1)}function Rh({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const s=zL(i)?i.map(hA):hA(i),r={done:!1,value:t[0]},o=_I(e&&e.length===t.length?e:kI(t),n),a=EI(o,t,{ease:Array.isArray(s)?s:TI(t,s)});return{calculatedDuration:n,next:l=>(r.value=a(l),r.done=l>=n,r)}}const PI=n=>n!==null;function cw(n,{repeat:t,repeatType:e="loop"},i,s=1){const r=n.filter(PI),a=s<0||t&&e!=="loop"&&t%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const MI={decay:fv,inertia:fv,tween:Rh,keyframes:Rh,spring:ag};function tk(n){typeof n.type=="string"&&(n.type=MI[n.type])}class uw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const RI=n=>n/100;class hw extends uw{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,s;const{motionValue:e}=this.options;e&&e.updatedAt!==yn.now()&&this.tick(yn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(i=this.options).onStop)==null||s.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;tk(t);const{type:e=Rh,repeat:i=0,repeatDelay:s=0,repeatType:r,velocity:o=0}=t;let{keyframes:a}=t;const l=e||Rh;l!==Rh&&typeof a[0]!="number"&&(this.mixKeyframes=Gf(RI,Q2(a[0],a[1])),a=[0,100]);const u=l({...t,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=lw(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(i+1)-s,this.generator=u}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:i,totalDuration:s,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:h,repeat:d,repeatType:f,repeatDelay:p,type:y,onUpdate:x,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const m=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?m<0:m>s;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,C=i;if(d){const M=Math.min(this.currentTime,s)/a;let R=Math.floor(M),N=M%1;!N&&M>=1&&(N=1),N===1&&R--,R=Math.min(R,d+1),!!(R%2)&&(f==="reverse"?(N=1-N,p&&(N-=p/a)):f==="mirror"&&(C=o)),b=vr(0,1,N)*a}const k=w?{done:!1,value:h[0]}:C.next(b);r&&(k.value=r(k.value));let{done:_}=k;!w&&l!==null&&(_=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return T&&y!==fv&&(k.value=cw(h,this.options,A,this.speed)),x&&x(k.value),T&&this.finish(),k}then(t,e){return this.finished.then(t,e)}get duration(){return ps(this.calculatedDuration)}get time(){return ps(this.currentTime)}set time(t){var e;t=fs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(e=this.driver)==null||e.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(yn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ps(this.currentTime))}play(){var s,r;if(this.isStopped)return;const{driver:t=pI,startTime:e}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),(r=(s=this.options).onPlay)==null||r.call(s);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=e??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(yn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,e;this.notifyFinished(),this.teardown(),this.state="finished",(e=(t=this.options).onComplete)==null||e.call(t)}cancel(){var t,e;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(e=(t=this.options).onCancel)==null||e.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var e;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(e=this.driver)==null||e.stop(),t.observe(this)}}function NI(n){for(let t=1;t<n.length;t++)n[t]??(n[t]=n[t-1])}const ia=n=>n*180/Math.PI,pv=n=>{const t=ia(Math.atan2(n[1],n[0]));return mv(t)},LI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:pv,rotateZ:pv,skewX:n=>ia(Math.atan(n[1])),skewY:n=>ia(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},mv=n=>(n=n%360,n<0&&(n+=360),n),vA=pv,xA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),wA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),II={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:xA,scaleY:wA,scale:n=>(xA(n)+wA(n))/2,rotateX:n=>mv(ia(Math.atan2(n[6],n[5]))),rotateY:n=>mv(ia(Math.atan2(-n[2],n[0]))),rotateZ:vA,rotate:vA,skewX:n=>ia(Math.atan(n[4])),skewY:n=>ia(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function gv(n){return n.includes("scale")?1:0}function yv(n,t){if(!n||n==="none")return gv(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,s;if(e)i=II,s=e;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=LI,s=a}if(!s)return gv(t);const r=i[t],o=s[1].split(",").map(jI);return typeof r=="function"?r(o):o[r]}const DI=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return yv(e,t)};function jI(n){return parseFloat(n.trim())}const Iu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Du=new Set(Iu),bA=n=>n===Lu||n===Y,FI=new Set(["x","y","z"]),OI=Iu.filter(n=>!FI.has(n));function BI(n){const t=[];return OI.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const hl={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>yv(t,"x"),y:(n,{transform:t})=>yv(t,"y")};hl.translateX=hl.x;hl.translateY=hl.y;const dl=new Set;let vv=!1,xv=!1,wv=!1;function ek(){if(xv){const n=Array.from(dl).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const s=BI(i);s.length&&(e.set(i,s),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const s=e.get(i);s&&s.forEach(([r,o])=>{var a;(a=i.getValue(r))==null||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}xv=!1,vv=!1,dl.forEach(n=>n.complete(wv)),dl.clear()}function nk(){dl.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(xv=!0)})}function zI(){wv=!0,nk(),ek(),wv=!1}class dw{constructor(t,e,i,s,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=s,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(dl.add(this),vv||(vv=!0,It.read(nk),It.resolveKeyframes(ek))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:s}=this;if(t[0]===null){const r=s==null?void 0:s.get(),o=t[t.length-1];if(r!==void 0)t[0]=r;else if(i&&e){const a=i.readValue(e,o);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=o),s&&r===void 0&&s.set(t[0])}NI(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),dl.delete(this)}cancel(){this.state==="scheduled"&&(dl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VI=n=>n.startsWith("--");function $I(n,t,e){VI(t)?n.style.setProperty(t,e):n.style[t]=e}const HI=J1(()=>window.ScrollTimeline!==void 0),UI={};function WI(n,t){const e=J1(n);return()=>UI[t]??e()}const ik=WI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),eh=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,AA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eh([0,.65,.55,1]),circOut:eh([.55,0,1,.45]),backIn:eh([.31,.01,.66,-.59]),backOut:eh([.33,1.53,.69,.99])};function sk(n,t){if(n)return typeof n=="function"?ik()?Z2(n,t):"ease-out":$2(n)?eh(n):Array.isArray(n)?n.map(e=>sk(e,t)||AA.easeOut):AA[n]}function GI(n,t,e,{delay:i=0,duration:s=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const h={[t]:e};l&&(h.offset=l);const d=sk(a,s);Array.isArray(d)&&(h.easing=d);const f={delay:i,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),n.animate(h,f)}function rk(n){return typeof n=="function"&&"applyToOptions"in n}function XI({type:n,...t}){return rk(n)&&ik()?n.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class KI extends uw{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:i,keyframes:s,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=t;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=t,sg(typeof t.type!="string");const u=XI(t);this.animation=GI(e,i,s,u,r),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const h=cw(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):$I(e,i,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,e;(e=(t=this.animation).finish)==null||e.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,e;this.isPseudoElement||(e=(t=this.animation).commitStyles)==null||e.call(t)}get duration(){var e,i;const t=((i=(e=this.animation.effect)==null?void 0:e.getComputedTiming)==null?void 0:i.call(e).duration)||0;return ps(Number(t))}get time(){return ps(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=fs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&HI()?(this.animation.timeline=t,hi):e(this)}}const ok={anticipate:O2,backInOut:F2,circInOut:z2};function qI(n){return n in ok}function YI(n){typeof n.ease=="string"&&qI(n.ease)&&(n.ease=ok[n.ease])}const SA=10;class QI extends KI{constructor(t){YI(t),tk(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:i,onComplete:s,element:r,...o}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const a=new hw({...o,autoplay:!1}),l=fs(this.finishedTime??this.time);e.setWithVelocity(a.sample(l-SA).value,a.sample(l).value,SA),a.stop()}}const EA=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Lo.test(n)||n==="0")&&!n.startsWith("url("));function ZI(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function JI(n,t,e,i){const s=n[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],o=EA(s,t),a=EA(r,t);return!o||!a?!1:ZI(n)||(e==="spring"||rk(e))&&i}function bv(n){n.duration=0,n.type}const tD=new Set(["opacity","clipPath","filter","transform"]),eD=J1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function nD(n){var h;const{motionValue:t,name:e,repeatDelay:i,repeatType:s,damping:r,type:o}=n;if(!(((h=t==null?void 0:t.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return eD()&&e&&tD.has(e)&&(e!=="transform"||!u)&&!l&&!i&&s!=="mirror"&&r!==0&&o!=="inertia"}const iD=40;class sD extends uw{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:h,...d}){var y;super(),this.stop=()=>{var x,A;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=yn.now();const f={autoplay:t,delay:e,type:i,repeat:s,repeatDelay:r,repeatType:o,name:l,motionValue:u,element:h,...d},p=(h==null?void 0:h.KeyframeResolver)||dw;this.keyframeResolver=new p(a,(x,A,m)=>this.onKeyframesResolved(x,A,f,!m),l,u,h),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,e,i,s){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:h}=i;this.resolvedAt=yn.now(),JI(t,r,o,a)||((xr.instantAnimations||!l)&&(h==null||h(cw(t,i,e))),t[0]=t[t.length-1],bv(i),i.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>iD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...i,keyframes:t},p=!u&&nD(f)?new QI({...f,element:f.motionValue.owner.current}):new hw(f);p.finished.then(()=>this.notifyFinished()).catch(hi),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),zI()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const rD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function oD(n){const t=rD.exec(n);if(!t)return[,];const[,e,i,s]=t;return[`--${e??i}`,s]}function ak(n,t,e=1){const[i,s]=oD(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const o=r.trim();return P2(o)?parseFloat(o):o}return sw(s)?ak(s,t,e+1):s}function fw(n,t){return(n==null?void 0:n[t])??(n==null?void 0:n.default)??n}const lk=new Set(["width","height","top","left","right","bottom",...Iu]),aD={test:n=>n==="auto",parse:n=>n},ck=n=>t=>t.test(n),uk=[Lu,Y,ms,Er,ZL,QL,aD],CA=n=>uk.find(ck(n));function lD(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||R2(n):!0}const cD=new Set(["brightness","contrast","saturate","opacity"]);function uD(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(rw)||[];if(!i)return n;const s=e.replace(i,"");let r=cD.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+s+")"}const hD=/\b([a-z-]*)\(.*?\)/gu,Av={...Lo,getAnimatableNone:n=>{const t=n.match(hD);return t?t.map(uD).join(" "):n}},kA={...Lu,transform:Math.round},dD={rotate:Er,rotateX:Er,rotateY:Er,rotateZ:Er,scale:_p,scaleX:_p,scaleY:_p,scaleZ:_p,skew:Er,skewX:Er,skewY:Er,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:td,originX:fA,originY:fA,originZ:Y},pw={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,backgroundPositionX:Y,backgroundPositionY:Y,...dD,zIndex:kA,fillOpacity:td,strokeOpacity:td,numOctaves:kA},fD={...pw,color:Jt,backgroundColor:Jt,outlineColor:Jt,fill:Jt,stroke:Jt,borderColor:Jt,borderTopColor:Jt,borderRightColor:Jt,borderBottomColor:Jt,borderLeftColor:Jt,filter:Av,WebkitFilter:Av},hk=n=>fD[n];function dk(n,t){let e=hk(n);return e!==Av&&(e=Lo),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const pD=new Set(["auto","none","0"]);function mD(n,t,e){let i=0,s;for(;i<n.length&&!s;){const r=n[i];typeof r=="string"&&!pD.has(r)&&ed(r).values.length&&(s=n[i]),i++}if(s&&e)for(const r of t)n[r]=dk(e,s)}class gD extends dw{constructor(t,e,i,s,r){super(t,e,i,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),sw(u))){const h=ak(u,e.current);h!==void 0&&(t[l]=h),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!lk.has(i)||t.length!==2)return;const[s,r]=t,o=CA(s),a=CA(r);if(o!==a)if(bA(o)&&bA(a))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else hl[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let s=0;s<t.length;s++)(t[s]===null||lD(t[s]))&&i.push(s);i.length&&mD(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hl[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(i,s).jump(s,!1)}measureEndState(){var a;const{element:t,name:e,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const r=i.length-1,o=i[r];i[r]=hl[e](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function yD(n,t,e){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const s=document.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}const fk=(n,t)=>t&&typeof n=="number"?t.transform(n):n;function pk(n){return M2(n)&&"offsetHeight"in n}const _A=30,vD=n=>!isNaN(parseFloat(n));class xD{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var r;const s=yn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=yn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=vD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new tw);const i=this.events[t].add(e);return t==="change"?()=>{i(),It.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_A)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,_A);return N2(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,e;(t=this.dependents)==null||t.clear(),(e=this.events.destroy)==null||e.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cu(n,t){return new xD(n,t)}const{schedule:mw,cancel:UO}=H2(queueMicrotask,!1),yi={x:!1,y:!1};function mk(){return yi.x||yi.y}function wD(n){return n==="x"||n==="y"?yi[n]?null:(yi[n]=!0,()=>{yi[n]=!1}):yi.x||yi.y?null:(yi.x=yi.y=!0,()=>{yi.x=yi.y=!1})}function gk(n,t){const e=yD(n),i=new AbortController,s={passive:!0,...t,signal:i.signal};return[e,s,()=>i.abort()]}function TA(n){return!(n.pointerType==="touch"||mk())}function bD(n,t,e={}){const[i,s,r]=gk(n,e),o=a=>{if(!TA(a))return;const{target:l}=a,u=t(l,a);if(typeof u!="function"||!l)return;const h=d=>{TA(d)&&(u(d),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,s)};return i.forEach(a=>{a.addEventListener("pointerenter",o,s)}),r}const yk=(n,t)=>t?n===t?!0:yk(n,t.parentElement):!1,gw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,AD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SD(n){return AD.has(n.tagName)||n.tabIndex!==-1}const Jp=new WeakSet;function PA(n){return t=>{t.key==="Enter"&&n(t)}}function Z0(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ED=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=PA(()=>{if(Jp.has(e))return;Z0(e,"down");const s=PA(()=>{Z0(e,"up")}),r=()=>Z0(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function MA(n){return gw(n)&&!mk()}function CD(n,t,e={}){const[i,s,r]=gk(n,e),o=a=>{const l=a.currentTarget;if(!MA(a))return;Jp.add(l);const u=t(l,a),h=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),Jp.has(l)&&Jp.delete(l),MA(p)&&typeof u=="function"&&u(p,{success:y})},d=p=>{h(p,l===window||l===document||e.useGlobalTarget||yk(l,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return i.forEach(a=>{(e.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),pk(a)&&(a.addEventListener("focus",u=>ED(u,s)),!SD(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function vk(n){return M2(n)&&"ownerSVGElement"in n}function kD(n){return vk(n)&&n.tagName==="svg"}const Ue=n=>!!(n&&n.getVelocity),_D=[...uk,Jt,Lo],TD=n=>_D.find(ck(n)),yw=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class PD extends P.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=e.offsetParent,s=pk(i)&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft,r.right=s-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function MD({children:n,isPresent:t,anchorX:e,root:i}){const s=P.useId(),r=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=P.useContext(yw);return P.useInsertionEffect(()=>{const{width:l,height:u,top:h,left:d,right:f}=o.current;if(t||!r.current||!l||!u)return;const p=e==="left"?`left: ${d}`:`right: ${f}`;r.current.dataset.motionPopId=s;const y=document.createElement("style");a&&(y.nonce=a);const x=i??document.head;return x.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${h}px !important;
          }
        `),()=>{x.contains(y)&&x.removeChild(y)}},[t]),g.jsx(PD,{isPresent:t,childRef:r,sizeRef:o,children:P.cloneElement(n,{ref:r})})}const RD=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:s,presenceAffectsLayout:r,mode:o,anchorX:a,root:l})=>{const u=q1(ND),h=P.useId();let d=!0,f=P.useMemo(()=>(d=!1,{id:h,initial:t,isPresent:e,custom:s,onExitComplete:p=>{u.set(p,!0);for(const y of u.values())if(!y)return;i&&i()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[e,u,i]);return r&&d&&(f={...f}),P.useMemo(()=>{u.forEach((p,y)=>u.set(y,!1))},[e]),P.useEffect(()=>{!e&&!u.size&&i&&i()},[e]),o==="popLayout"&&(n=g.jsx(MD,{isPresent:e,anchorX:a,root:l,children:n})),g.jsx(r0.Provider,{value:f,children:n})};function ND(){return new Map}function xk(n=!0){const t=P.useContext(r0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:s}=t,r=P.useId();P.useEffect(()=>{if(n)return s(r)},[n]);const o=P.useCallback(()=>n&&i&&i(r),[r,i,n]);return!e&&i?[!1,o]:[!0]}const Tp=n=>n.key||"";function RA(n){const t=[];return P.Children.forEach(n,e=>{P.isValidElement(e)&&t.push(e)}),t}const qf=({children:n,custom:t,initial:e=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:r="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[u,h]=xk(o),d=P.useMemo(()=>RA(n),[n]),f=o&&!u?[]:d.map(Tp),p=P.useRef(!0),y=P.useRef(d),x=q1(()=>new Map),[A,m]=P.useState(d),[w,b]=P.useState(d);T2(()=>{p.current=!1,y.current=d;for(let _=0;_<w.length;_++){const T=Tp(w[_]);f.includes(T)?x.delete(T):x.get(T)!==!0&&x.set(T,!1)}},[w,f.length,f.join("-")]);const C=[];if(d!==A){let _=[...d];for(let T=0;T<w.length;T++){const M=w[T],R=Tp(M);f.includes(R)||(_.splice(T,0,M),C.push(M))}return r==="wait"&&C.length&&(_=C),b(RA(_)),m(d),null}const{forceRender:k}=P.useContext(K1);return g.jsx(g.Fragment,{children:w.map(_=>{const T=Tp(_),M=o&&!u?!1:d===w||f.includes(T),R=()=>{if(x.has(T))x.set(T,!0);else return;let N=!0;x.forEach(I=>{I||(N=!1)}),N&&(k==null||k(),b(y.current),o&&(h==null||h()),i&&i())};return g.jsx(RD,{isPresent:M,initial:!p.current||e?void 0:!1,custom:t,presenceAffectsLayout:s,mode:r,root:l,onExitComplete:M?void 0:R,anchorX:a,children:_},T)})})},wk=P.createContext({strict:!1}),NA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ku={};for(const n in NA)ku[n]={isEnabled:t=>NA[n].some(e=>!!t[e])};function LD(n){for(const t in n)ku[t]={...ku[t],...n[t]}}const ID=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ID.has(n)}let bk=n=>!lg(n);function DD(n){typeof n=="function"&&(bk=t=>t.startsWith("on")?!lg(t):n(t))}try{DD(require("@emotion/is-prop-valid").default)}catch{}function jD(n,t,e){const i={};for(const s in n)s==="values"&&typeof n.values=="object"||(bk(s)||e===!0&&lg(s)||!t&&!lg(s)||n.draggable&&s.startsWith("onDrag"))&&(i[s]=n[s]);return i}const o0=P.createContext({});function a0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function nd(n){return typeof n=="string"||Array.isArray(n)}const vw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xw=["initial",...vw];function l0(n){return a0(n.animate)||xw.some(t=>nd(n[t]))}function Ak(n){return!!(l0(n)||n.variants)}function FD(n,t){if(l0(n)){const{initial:e,animate:i}=n;return{initial:e===!1||nd(e)?e:void 0,animate:nd(i)?i:void 0}}return n.inherit!==!1?t:{}}function OD(n){const{initial:t,animate:e}=FD(n,P.useContext(o0));return P.useMemo(()=>({initial:t,animate:e}),[LA(t),LA(e)])}function LA(n){return Array.isArray(n)?n.join(" "):n}const id={};function BD(n){for(const t in n)id[t]=n[t],iw(t)&&(id[t].isCSSVariable=!0)}function Sk(n,{layout:t,layoutId:e}){return Du.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!id[n]||n==="opacity")}const zD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},VD=Iu.length;function $D(n,t,e){let i="",s=!0;for(let r=0;r<VD;r++){const o=Iu[r],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||e){const u=fk(a,pw[o]);if(!l){s=!1;const h=zD[o]||o;i+=`${h}(${u}) `}e&&(t[o]=u)}}return i=i.trim(),e?i=e(t,s?"":i):s&&(i="none"),i}function ww(n,t,e){const{style:i,vars:s,transformOrigin:r}=n;let o=!1,a=!1;for(const l in t){const u=t[l];if(Du.has(l)){o=!0;continue}else if(iw(l)){s[l]=u;continue}else{const h=fk(u,pw[l]);l.startsWith("origin")?(a=!0,r[l]=h):i[l]=h}}if(t.transform||(o||e?i.transform=$D(t,n.transform,e):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:h=0}=r;i.transformOrigin=`${l} ${u} ${h}`}}const bw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ek(n,t,e){for(const i in t)!Ue(t[i])&&!Sk(i,e)&&(n[i]=t[i])}function HD({transformTemplate:n},t){return P.useMemo(()=>{const e=bw();return ww(e,t,n),Object.assign({},e.vars,e.style)},[t])}function UD(n,t){const e=n.style||{},i={};return Ek(i,e,n),Object.assign(i,HD(n,t)),i}function WD(n,t){const e={},i=UD(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const GD={offset:"stroke-dashoffset",array:"stroke-dasharray"},XD={offset:"strokeDashoffset",array:"strokeDasharray"};function KD(n,t,e=1,i=0,s=!0){n.pathLength=1;const r=s?GD:XD;n[r.offset]=Y.transform(-i);const o=Y.transform(t),a=Y.transform(e);n[r.array]=`${o} ${a}`}function Ck(n,{attrX:t,attrY:e,attrScale:i,pathLength:s,pathSpacing:r=1,pathOffset:o=0,...a},l,u,h){if(ww(n,a,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:f}=n;d.transform&&(f.transform=d.transform,delete d.transform),(f.transform||d.transformOrigin)&&(f.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),f.transform&&(f.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox),t!==void 0&&(d.x=t),e!==void 0&&(d.y=e),i!==void 0&&(d.scale=i),s!==void 0&&KD(d,s,r,o,!1)}const kk=()=>({...bw(),attrs:{}}),_k=n=>typeof n=="string"&&n.toLowerCase()==="svg";function qD(n,t,e,i){const s=P.useMemo(()=>{const r=kk();return Ck(r,t,_k(i),n.transformTemplate,n.style),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};Ek(r,n.style,n),s.style={...r,...s.style}}return s}const YD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Aw(n){return typeof n!="string"||n.includes("-")?!1:!!(YD.indexOf(n)>-1||/[A-Z]/u.test(n))}function QD(n,t,e,{latestValues:i},s,r=!1){const a=(Aw(n)?qD:WD)(t,i,s,n),l=jD(t,typeof n=="string",r),u=n!==P.Fragment?{...l,...a,ref:e}:{},{children:h}=t,d=P.useMemo(()=>Ue(h)?h.get():h,[h]);return P.createElement(n,{...u,children:d})}function IA(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function Sw(n,t,e,i){if(typeof t=="function"){const[s,r]=IA(i);t=t(e!==void 0?e:n.custom,s,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[s,r]=IA(i);t=t(e!==void 0?e:n.custom,s,r)}return t}function tm(n){return Ue(n)?n.get():n}function ZD({scrapeMotionValuesFromProps:n,createRenderState:t},e,i,s){return{latestValues:JD(e,i,s,n),renderState:t()}}function JD(n,t,e,i){const s={},r=i(n,{});for(const f in r)s[f]=tm(r[f]);let{initial:o,animate:a}=n;const l=l0(n),u=Ak(n);t&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=e?e.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!a0(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const y=Sw(n,f[p]);if(y){const{transitionEnd:x,transition:A,...m}=y;for(const w in m){let b=m[w];if(Array.isArray(b)){const C=h?b.length-1:0;b=b[C]}b!==null&&(s[w]=b)}for(const w in x)s[w]=x[w]}}}return s}const Tk=n=>(t,e)=>{const i=P.useContext(o0),s=P.useContext(r0),r=()=>ZD(n,t,i,s);return e?r():q1(r)};function Ew(n,t,e){var r;const{style:i}=n,s={};for(const o in i)(Ue(i[o])||t.style&&Ue(t.style[o])||Sk(o,n)||((r=e==null?void 0:e.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}const t3=Tk({scrapeMotionValuesFromProps:Ew,createRenderState:bw});function Pk(n,t,e){const i=Ew(n,t,e);for(const s in n)if(Ue(n[s])||Ue(t[s])){const r=Iu.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;i[r]=n[s]}return i}const e3=Tk({scrapeMotionValuesFromProps:Pk,createRenderState:kk}),n3=Symbol.for("motionComponentSymbol");function Kl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function i3(n,t,e){return P.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):Kl(e)&&(e.current=i))},[t])}const Cw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),s3="framerAppearId",Mk="data-"+Cw(s3),Rk=P.createContext({});function r3(n,t,e,i,s){var x,A;const{visualElement:r}=P.useContext(o0),o=P.useContext(wk),a=P.useContext(r0),l=P.useContext(yw).reducedMotion,u=P.useRef(null);i=i||o.renderer,!u.current&&i&&(u.current=i(n,{visualState:t,parent:r,props:e,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=u.current,d=P.useContext(Rk);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&o3(u.current,e,s,d);const f=P.useRef(!1);P.useInsertionEffect(()=>{h&&f.current&&h.update(e,a)});const p=e[Mk],y=P.useRef(!!p&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,p))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,p)));return T2(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),y.current&&h.animationState&&h.animationState.animateChanges())}),P.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,p)}),y.current=!1),h.enteringChildren=void 0)}),h}function o3(n,t,e,i){const{layoutId:s,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:Nk(n.parent)),n.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!o||a&&Kl(a),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:l,layoutRoot:u})}function Nk(n){if(n)return n.options.allowProjection!==!1?n.projection:Nk(n.parent)}function J0(n,{forwardMotionProps:t=!1}={},e,i){e&&LD(e);const s=Aw(n)?e3:t3;function r(a,l){let u;const h={...P.useContext(yw),...a,layoutId:a3(a)},{isStatic:d}=h,f=OD(a),p=s(a,d);if(!d&&Y1){l3();const y=c3(h);u=y.MeasureLayout,f.visualElement=r3(n,p,h,i,y.ProjectionNode)}return g.jsxs(o0.Provider,{value:f,children:[u&&f.visualElement?g.jsx(u,{visualElement:f.visualElement,...h}):null,QD(n,a,i3(p,f.visualElement,l),p,d,t)]})}r.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const o=P.forwardRef(r);return o[n3]=n,o}function a3({layoutId:n}){const t=P.useContext(K1).id;return t&&n!==void 0?t+"-"+n:n}function l3(n,t){P.useContext(wk).strict}function c3(n){const{drag:t,layout:e}=ku;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function u3(n,t){if(typeof Proxy>"u")return J0;const e=new Map,i=(r,o)=>J0(r,o,n,t),s=(r,o)=>i(r,o);return new Proxy(s,{get:(r,o)=>o==="create"?i:(e.has(o)||e.set(o,J0(o,void 0,n,t)),e.get(o))})}function Lk({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function h3({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function d3(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}function ty(n){return n===void 0||n===1}function Sv({scale:n,scaleX:t,scaleY:e}){return!ty(n)||!ty(t)||!ty(e)}function Go(n){return Sv(n)||Ik(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Ik(n){return DA(n.x)||DA(n.y)}function DA(n){return n&&n!=="0%"}function cg(n,t,e){const i=n-e,s=t*i;return e+s}function jA(n,t,e,i,s){return s!==void 0&&(n=cg(n,s,i)),cg(n,e,i)+t}function Ev(n,t=0,e=1,i,s){n.min=jA(n.min,t,e,i,s),n.max=jA(n.max,t,e,i,s)}function Dk(n,{x:t,y:e}){Ev(n.x,t.translate,t.scale,t.originPoint),Ev(n.y,e.translate,e.scale,e.originPoint)}const FA=.999999999999,OA=1.0000000000001;function f3(n,t,e,i=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,o;for(let a=0;a<s;a++){r=e[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Yl(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Dk(n,o)),i&&Go(r.latestValues)&&Yl(n,r.latestValues))}t.x<OA&&t.x>FA&&(t.x=1),t.y<OA&&t.y>FA&&(t.y=1)}function ql(n,t){n.min=n.min+t,n.max=n.max+t}function BA(n,t,e,i,s=.5){const r=Ot(n.min,n.max,s);Ev(n,t,e,r,i)}function Yl(n,t){BA(n.x,t.x,t.scaleX,t.scale,t.originX),BA(n.y,t.y,t.scaleY,t.scale,t.originY)}function jk(n,t){return Lk(d3(n.getBoundingClientRect(),t))}function p3(n,t,e){const i=jk(n,e),{scroll:s}=t;return s&&(ql(i.x,s.offset.x),ql(i.y,s.offset.y)),i}const zA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ql=()=>({x:zA(),y:zA()}),VA=()=>({min:0,max:0}),Xt=()=>({x:VA(),y:VA()}),Cv={current:null},Fk={current:!1};function m3(){if(Fk.current=!0,!!Y1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>Cv.current=n.matches;n.addEventListener("change",t),t()}else Cv.current=!1}const g3=new WeakMap;function y3(n,t,e){for(const i in t){const s=t[i],r=e[i];if(Ue(s))n.addValue(i,s);else if(Ue(r))n.addValue(i,Cu(s,{owner:n}));else if(r!==s)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=n.getStaticValue(i);n.addValue(i,Cu(o!==void 0?o:s,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const $A=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class v3{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:s,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=yn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,It.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=l0(e),this.isVariantNode=Ak(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(e,{},this);for(const f in d){const p=d[f];l[f]!==void 0&&Ue(p)&&p.set(l[f])}}mount(t){var e;this.current=t,g3.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,s)=>this.bindToMotionValue(s,i)),Fk.current||m3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cv.current,(e=this.parent)==null||e.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),No(this.notifyUpdate),No(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Du.has(t);i&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&It.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r&&r(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ku){const e=ku[t];if(!e)continue;const{isEnabled:i,Feature:s}=e;if(!this.features[t]&&s&&i(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<$A.length;i++){const s=$A[i];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,o=t[r];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=y3(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Cu(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(P2(i)||R2(i))?i=parseFloat(i):!TD(i)&&Lo.test(e)&&(i=dk(t,e)),this.setBaseTarget(t,Ue(i)?i.get():i)),Ue(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var r;const{initial:e}=this.props;let i;if(typeof e=="string"||typeof e=="object"){const o=Sw(this.props,e,(r=this.presenceContext)==null?void 0:r.custom);o&&(i=o[t])}if(e&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ue(s)?s:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new tw),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){mw.render(this.render)}}class Ok extends v3{constructor(){super(...arguments),this.KeyframeResolver=gD}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ue(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function Bk(n,{style:t,vars:e},i,s){const r=n.style;let o;for(o in t)r[o]=t[o];s==null||s.applyProjectionStyles(r,i);for(o in e)r.setProperty(o,e[o])}function x3(n){return window.getComputedStyle(n)}class w3 extends Ok{constructor(){super(...arguments),this.type="html",this.renderInstance=Bk}readValueFromInstance(t,e){var i;if(Du.has(e))return(i=this.projection)!=null&&i.isProjecting?gv(e):DI(t,e);{const s=x3(t),r=(iw(e)?s.getPropertyValue(e):s[e])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:e}){return jk(t,e)}build(t,e,i){ww(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return Ew(t,e,i)}}const zk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function b3(n,t,e,i){Bk(n,t,void 0,i);for(const s in t.attrs)n.setAttribute(zk.has(s)?s:Cw(s),t.attrs[s])}class A3 extends Ok{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xt}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Du.has(e)){const i=hk(e);return i&&i.default||0}return e=zk.has(e)?e:Cw(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return Pk(t,e,i)}build(t,e,i){Ck(t,e,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,e,i,s){b3(t,e,i,s)}mount(t){this.isSVGTag=_k(t.tagName),super.mount(t)}}const S3=(n,t)=>Aw(n)?new A3(t):new w3(t,{allowProjection:n!==P.Fragment});function ac(n,t,e){const i=n.getProps();return Sw(i,t,e!==void 0?e:i.custom,n)}const kv=n=>Array.isArray(n);function E3(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Cu(e))}function C3(n){return kv(n)?n[n.length-1]||0:n}function k3(n,t){const e=ac(n,t);let{transitionEnd:i={},transition:s={},...r}=e||{};r={...r,...i};for(const o in r){const a=C3(r[o]);E3(n,o,a)}}function _3(n){return!!(Ue(n)&&n.add)}function _v(n,t){const e=n.getValue("willChange");if(_3(e))return e.add(t);if(!e&&xr.WillChange){const i=new xr.WillChange("auto");n.addValue("willChange",i),i.add(t)}}function Vk(n){return n.props[Mk]}const T3=n=>n!==null;function P3(n,{repeat:t,repeatType:e="loop"},i){const s=n.filter(T3),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return!r||i===void 0?s[r]:i}const M3={type:"spring",stiffness:500,damping:25,restSpeed:10},R3=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),N3={type:"keyframes",duration:.8},L3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},I3=(n,{keyframes:t})=>t.length>2?N3:Du.has(n)?n.startsWith("scale")?R3(t[1]):M3:L3;function D3({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:s,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const kw=(n,t,e,i={},s,r)=>o=>{const a=fw(i,n)||{},l=a.delay||i.delay||0;let{elapsed:u=0}=i;u=u-fs(l);const h={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-u,onUpdate:f=>{t.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:t,element:r?void 0:s};D3(a)||Object.assign(h,I3(n,h)),h.duration&&(h.duration=fs(h.duration)),h.repeatDelay&&(h.repeatDelay=fs(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(bv(h),h.delay===0&&(d=!0)),(xr.instantAnimations||xr.skipAnimations)&&(d=!0,bv(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!r&&t.get()!==void 0){const f=P3(h.keyframes,a);if(f!==void 0){It.update(()=>{h.onUpdate(f),h.onComplete()});return}}return a.isSync?new hw(h):new sD(h)};function j3({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function $k(n,t,{delay:e=0,transitionOverride:i,type:s}={}){let{transition:r=n.getDefaultTransition(),transitionEnd:o,...a}=t;i&&(r=i);const l=[],u=s&&n.animationState&&n.animationState.getState()[s];for(const h in a){const d=n.getValue(h,n.latestValues[h]??null),f=a[h];if(f===void 0||u&&j3(u,h))continue;const p={delay:e,...fw(r||{},h)},y=d.get();if(y!==void 0&&!d.isAnimating&&!Array.isArray(f)&&f===y&&!p.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const m=Vk(n);if(m){const w=window.MotionHandoffAnimation(m,h,It);w!==null&&(p.startTime=w,x=!0)}}_v(n,h),d.start(kw(h,d,f,n.shouldReduceMotion&&lk.has(h)?{type:!1}:p,n,x));const A=d.animation;A&&l.push(A)}return o&&Promise.all(l).then(()=>{It.update(()=>{o&&k3(n,o)})}),l}function Hk(n,t,e,i=0,s=1){const r=Array.from(n).sort((u,h)=>u.sortNodePosition(h)).indexOf(t),o=n.size,a=(o-1)*i;return typeof e=="function"?e(r,o):s===1?r*i:a-r*i}function Tv(n,t,e={}){var l;const i=ac(n,t,e.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(s=e.transitionOverride);const r=i?()=>Promise.all($k(n,i,e)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=s;return F3(n,t,u,h,d,f,e)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,h]=a==="beforeChildren"?[r,o]:[o,r];return u().then(()=>h())}else return Promise.all([r(),o(e.delay)])}function F3(n,t,e=0,i=0,s=0,r=1,o){const a=[];for(const l of n.variantChildren)l.notify("AnimationStart",t),a.push(Tv(l,t,{...o,delay:e+(typeof i=="function"?0:i)+Hk(n.variantChildren,l,i,s,r)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(a)}function O3(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const s=t.map(r=>Tv(n,r,e));i=Promise.all(s)}else if(typeof t=="string")i=Tv(n,t,e);else{const s=typeof t=="function"?ac(n,t,e.custom):t;i=Promise.all($k(n,s,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function Uk(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const B3=xw.length;function Wk(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?Wk(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<B3;e++){const i=xw[e],s=n.props[i];(nd(s)||s===!1)&&(t[i]=s)}return t}const z3=[...vw].reverse(),V3=vw.length;function $3(n){return t=>Promise.all(t.map(({animation:e,options:i})=>O3(n,e,i)))}function H3(n){let t=$3(n),e=HA(),i=!0;const s=l=>(u,h)=>{var f;const d=ac(n,h,l==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);if(d){const{transition:p,transitionEnd:y,...x}=d;u={...u,...x,...y}}return u};function r(l){t=l(n)}function o(l){const{props:u}=n,h=Wk(n.parent)||{},d=[],f=new Set;let p={},y=1/0;for(let A=0;A<V3;A++){const m=z3[A],w=e[m],b=u[m]!==void 0?u[m]:h[m],C=nd(b),k=m===l?w.isActive:null;k===!1&&(y=A);let _=b===h[m]&&b!==u[m]&&C;if(_&&i&&n.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...p},!w.isActive&&k===null||!b&&!w.prevProp||a0(b)||typeof b=="boolean")continue;const T=U3(w.prevProp,b);let M=T||m===l&&w.isActive&&!_&&C||A>y&&C,R=!1;const N=Array.isArray(b)?b:[b];let I=N.reduce(s(m),{});k===!1&&(I={});const{prevResolvedValues:et={}}=w,lt={...et,...I},J=O=>{M=!0,f.has(O)&&(R=!0,f.delete(O)),w.needsAnimating[O]=!0;const F=n.getValue(O);F&&(F.liveStyle=!1)};for(const O in lt){const F=I[O],W=et[O];if(p.hasOwnProperty(O))continue;let K=!1;kv(F)&&kv(W)?K=!Uk(F,W):K=F!==W,K?F!=null?J(O):f.add(O):F!==void 0&&f.has(O)?J(O):w.protectedKeys[O]=!0}w.prevProp=b,w.prevResolvedValues=I,w.isActive&&(p={...p,...I}),i&&n.blockInitialAnimation&&(M=!1);const Yt=_&&T;M&&(!Yt||R)&&d.push(...N.map(O=>{const F={type:m};if(typeof O=="string"&&i&&!Yt&&n.manuallyAnimateOnMount&&n.parent){const{parent:W}=n,K=ac(W,O);if(W.enteringChildren&&K){const{delayChildren:ut}=K.transition||{};F.delay=Hk(W.enteringChildren,n,ut)}}return{animation:O,options:F}}))}if(f.size){const A={};if(typeof u.initial!="boolean"){const m=ac(n,Array.isArray(u.initial)?u.initial[0]:u.initial);m&&m.transition&&(A.transition=m.transition)}f.forEach(m=>{const w=n.getBaseTarget(m),b=n.getValue(m);b&&(b.liveStyle=!0),A[m]=w??null}),d.push({animation:A})}let x=!!d.length;return i&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(x=!1),i=!1,x?t(d):Promise.resolve()}function a(l,u){var d;if(e[l].isActive===u)return Promise.resolve();(d=n.variantChildren)==null||d.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,u)}),e[l].isActive=u;const h=o(l);for(const f in e)e[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>e,reset:()=>{e=HA(),i=!0}}}function U3(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!Uk(t,n):!1}function Ho(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HA(){return{animate:Ho(!0),whileInView:Ho(),whileHover:Ho(),whileTap:Ho(),whileDrag:Ho(),whileFocus:Ho(),exit:Ho()}}class $o{constructor(t){this.isMounted=!1,this.node=t}update(){}}class W3 extends $o{constructor(t){super(t),t.animationState||(t.animationState=H3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();a0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let G3=0;class X3 extends $o{constructor(){super(...arguments),this.id=G3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const K3={animation:{Feature:W3},exit:{Feature:X3}};function sd(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function Yf(n){return{point:{x:n.pageX,y:n.pageY}}}const q3=n=>t=>gw(t)&&n(t,Yf(t));function Nh(n,t,e,i){return sd(n,t,q3(e),i)}const Gk=1e-4,Y3=1-Gk,Q3=1+Gk,Xk=.01,Z3=0-Xk,J3=0+Xk;function en(n){return n.max-n.min}function tj(n,t,e){return Math.abs(n-t)<=e}function UA(n,t,e,i=.5){n.origin=i,n.originPoint=Ot(t.min,t.max,n.origin),n.scale=en(e)/en(t),n.translate=Ot(e.min,e.max,n.origin)-n.originPoint,(n.scale>=Y3&&n.scale<=Q3||isNaN(n.scale))&&(n.scale=1),(n.translate>=Z3&&n.translate<=J3||isNaN(n.translate))&&(n.translate=0)}function Lh(n,t,e,i){UA(n.x,t.x,e.x,i?i.originX:void 0),UA(n.y,t.y,e.y,i?i.originY:void 0)}function WA(n,t,e){n.min=e.min+t.min,n.max=n.min+en(t)}function ej(n,t,e){WA(n.x,t.x,e.x),WA(n.y,t.y,e.y)}function GA(n,t,e){n.min=t.min-e.min,n.max=n.min+en(t)}function Ih(n,t,e){GA(n.x,t.x,e.x),GA(n.y,t.y,e.y)}function Qn(n){return[n("x"),n("y")]}const Kk=({current:n})=>n?n.ownerDocument.defaultView:null,XA=(n,t)=>Math.abs(n-t);function nj(n,t){const e=XA(n.x,t.x),i=XA(n.y,t.y);return Math.sqrt(e**2+i**2)}class qk{constructor(t,e,{transformPagePoint:i,contextWindow:s=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=ny(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=nj(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:x}=f,{timestamp:A}=Te;this.history.push({...x,timestamp:A});const{onStart:m,onMove:w}=this.handlers;p||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ey(p,this.transformPagePoint),It.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=ny(f.type==="pointercancel"?this.lastMoveEventInfo:ey(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,m),x&&x(f,m)},!gw(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=s||window;const a=Yf(t),l=ey(a,this.transformPagePoint),{point:u}=l,{timestamp:h}=Te;this.history=[{...u,timestamp:h}];const{onSessionStart:d}=e;d&&d(t,ny(l,this.history)),this.removeListeners=Gf(Nh(this.contextWindow,"pointermove",this.handlePointerMove),Nh(this.contextWindow,"pointerup",this.handlePointerUp),Nh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),No(this.updatePoint)}}function ey(n,t){return t?{point:t(n.point)}:n}function KA(n,t){return{x:n.x-t.x,y:n.y-t.y}}function ny({point:n},t){return{point:n,delta:KA(n,Yk(t)),offset:KA(n,ij(t)),velocity:sj(t,.1)}}function ij(n){return n[0]}function Yk(n){return n[n.length-1]}function sj(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const s=Yk(n);for(;e>=0&&(i=n[e],!(s.timestamp-i.timestamp>fs(t)));)e--;if(!i)return{x:0,y:0};const r=ps(s.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const o={x:(s.x-i.x)/r,y:(s.y-i.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function rj(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?Ot(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?Ot(e,n,i.max):Math.min(n,e)),n}function qA(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function oj(n,{top:t,left:e,bottom:i,right:s}){return{x:qA(n.x,e,s),y:qA(n.y,t,i)}}function YA(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function aj(n,t){return{x:YA(n.x,t.x),y:YA(n.y,t.y)}}function lj(n,t){let e=.5;const i=en(n),s=en(t);return s>i?e=Jh(t.min,t.max-i,n.min):i>s&&(e=Jh(n.min,n.max-s,t.min)),vr(0,1,e)}function cj(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const Pv=.35;function uj(n=Pv){return n===!1?n=0:n===!0&&(n=Pv),{x:QA(n,"left","right"),y:QA(n,"top","bottom")}}function QA(n,t,e){return{min:ZA(n,t),max:ZA(n,e)}}function ZA(n,t){return typeof n=="number"?n:n[t]||0}const hj=new WeakMap;class dj{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:i}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Yf(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:y,onDragStart:x}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wD(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(m=>{let w=this.getAxisMotionValue(m).get()||0;if(ms.test(w)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[m];C&&(w=en(C)*(parseFloat(w)/100))}}this.originPoint[m]=w}),x&&It.postRender(()=>x(d,f)),_v(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},a=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:x,onDrag:A}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:m}=f;if(y&&this.currentDirection===null){this.currentDirection=fj(m),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),A&&A(d,f)},l=(d,f)=>{this.latestPointerEvent=d,this.latestPanInfo=f,this.stop(d,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Qn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)==null?void 0:f.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new qk(t,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:Kk(this.visualElement)})}stop(t,e){const i=t||this.latestPointerEvent,s=e||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!s||!i)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&It.postRender(()=>a(i,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:s}=this.getProps();if(!i||!Pp(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=rj(o,this.constraints[t],this.elastic[t])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:t,dragElastic:e}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,s=this.constraints;t&&Kl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=oj(i.layoutBox,t):this.constraints=!1,this.elastic=uj(e),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Qn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=cj(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Kl(t))return!1;const i=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=p3(i,s.root,this.visualElement.getTransformPagePoint());let o=aj(s.layout.layoutBox,r);if(e){const a=e(h3(o));this.hasMutatedConstraints=!!a,a&&(o=Lk(a))}return o}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:s,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Qn(h=>{if(!Pp(h,e,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,y={type:"inertia",velocity:i?t[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(h,y)});return Promise.all(u).then(a)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return _v(this.visualElement,t),i.start(kw(t,i,0,e,this.visualElement,!1))}stopAnimation(){Qn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Qn(t=>{var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)==null?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),s=i[e];return s||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Qn(e=>{const{drag:i}=this.getProps();if(!Pp(e,i,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[e];r.set(t[e]-Ot(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!Kl(e)||!i||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qn(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=lj({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Qn(o=>{if(!Pp(o,t,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Ot(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;hj.set(this.visualElement,this);const t=this.visualElement.current,e=Nh(t,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Kl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",i);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),It.read(i);const o=sd(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Qn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),e(),r(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:o=Pv,dragMomentum:a=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:s,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function Pp(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function fj(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class pj extends $o{constructor(t){super(t),this.removeGroupControls=hi,this.removeListeners=hi,this.controls=new dj(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hi}unmount(){this.removeGroupControls(),this.removeListeners()}}const JA=n=>(t,e)=>{n&&It.postRender(()=>n(t,e))};class mj extends $o{constructor(){super(...arguments),this.removePointerDownListener=hi}onPointerDown(t){this.session=new qk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Kk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:s}=this.node.getProps();return{onSessionStart:JA(t),onStart:JA(e),onMove:i,onEnd:(r,o)=>{delete this.session,s&&It.postRender(()=>s(r,o))}}}mount(){this.removePointerDownListener=Nh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const em={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tS(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const Gu={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(Y.test(n))n=parseFloat(n);else return n;const e=tS(n,t.target.x),i=tS(n,t.target.y);return`${e}% ${i}%`}},gj={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,s=Lo.parse(n);if(s.length>5)return i;const r=Lo.createTransformer(n),o=typeof s[0]!="number"?1:0,a=e.x.scale*t.x,l=e.y.scale*t.y;s[0+o]/=a,s[1+o]/=l;const u=Ot(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),r(s)}};let iy=!1;class yj extends P.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:s}=this.props,{projection:r}=t;BD(vj),r&&(e.group&&e.group.add(r),i&&i.register&&s&&i.register(r),iy&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),em.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:s,isPresent:r}=this.props,{projection:o}=i;return o&&(o.isPresent=r,iy=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==r?o.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?o.promote():o.relegate()||It.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mw.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:s}=t;iy=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),i&&i.deregister&&i.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Qk(n){const[t,e]=xk(),i=P.useContext(K1);return g.jsx(yj,{...n,layoutGroup:i,switchLayoutGroup:P.useContext(Rk),isPresent:t,safeToRemove:e})}const vj={borderRadius:{...Gu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Gu,borderTopRightRadius:Gu,borderBottomLeftRadius:Gu,borderBottomRightRadius:Gu,boxShadow:gj};function xj(n,t,e){const i=Ue(n)?n:Cu(n);return i.start(kw("",i,t,e)),i.animation}const wj=(n,t)=>n.depth-t.depth;class bj{constructor(){this.children=[],this.isDirty=!1}add(t){Q1(this.children,t),this.isDirty=!0}remove(t){Z1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(wj),this.isDirty=!1,this.children.forEach(t)}}function Aj(n,t){const e=yn.now(),i=({timestamp:s})=>{const r=s-e;r>=t&&(No(i),n(r-t))};return It.setup(i,!0),()=>No(i)}const Zk=["TopLeft","TopRight","BottomLeft","BottomRight"],Sj=Zk.length,eS=n=>typeof n=="string"?parseFloat(n):n,nS=n=>typeof n=="number"||Y.test(n);function Ej(n,t,e,i,s,r){s?(n.opacity=Ot(0,e.opacity??1,Cj(i)),n.opacityExit=Ot(t.opacity??1,0,kj(i))):r&&(n.opacity=Ot(t.opacity??1,e.opacity??1,i));for(let o=0;o<Sj;o++){const a=`border${Zk[o]}Radius`;let l=iS(t,a),u=iS(e,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||nS(l)===nS(u)?(n[a]=Math.max(Ot(eS(l),eS(u),i),0),(ms.test(u)||ms.test(l))&&(n[a]+="%")):n[a]=u}(t.rotate||e.rotate)&&(n.rotate=Ot(t.rotate||0,e.rotate||0,i))}function iS(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const Cj=Jk(0,.5,B2),kj=Jk(.5,.95,hi);function Jk(n,t,e){return i=>i<n?0:i>t?1:e(Jh(n,t,i))}function sS(n,t){n.min=t.min,n.max=t.max}function Kn(n,t){sS(n.x,t.x),sS(n.y,t.y)}function rS(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function oS(n,t,e,i,s){return n-=t,n=cg(n,1/e,i),s!==void 0&&(n=cg(n,1/s,i)),n}function _j(n,t=0,e=1,i=.5,s,r=n,o=n){if(ms.test(t)&&(t=parseFloat(t),t=Ot(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=Ot(r.min,r.max,i);n===r&&(a-=t),n.min=oS(n.min,t,e,a,s),n.max=oS(n.max,t,e,a,s)}function aS(n,t,[e,i,s],r,o){_j(n,t[e],t[i],t[s],t.scale,r,o)}const Tj=["x","scaleX","originX"],Pj=["y","scaleY","originY"];function lS(n,t,e,i){aS(n.x,t,Tj,e?e.x:void 0,i?i.x:void 0),aS(n.y,t,Pj,e?e.y:void 0,i?i.y:void 0)}function cS(n){return n.translate===0&&n.scale===1}function t_(n){return cS(n.x)&&cS(n.y)}function uS(n,t){return n.min===t.min&&n.max===t.max}function Mj(n,t){return uS(n.x,t.x)&&uS(n.y,t.y)}function hS(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function e_(n,t){return hS(n.x,t.x)&&hS(n.y,t.y)}function dS(n){return en(n.x)/en(n.y)}function fS(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class Rj{constructor(){this.members=[]}add(t){Q1(this.members,t),t.scheduleRender()}remove(t){if(Z1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let i;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Nj(n,t,e){let i="";const s=n.x.translate/t.x,r=n.y.translate/t.y,o=(e==null?void 0:e.z)||0;if((s||r||o)&&(i=`translate3d(${s}px, ${r}px, ${o}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:y}=e;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),d&&(i+=`rotateX(${d}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),y&&(i+=`skewY(${y}deg) `)}const a=n.x.scale*t.x,l=n.y.scale*t.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const sy=["","X","Y","Z"],Lj=1e3;let Ij=0;function ry(n,t,e,i){const{latestValues:s}=t;s[n]&&(e[n]=s[n],t.setStaticValue(n,0),i&&(i[n]=0))}function n_(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=Vk(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",It,!(s||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&n_(i)}function i_({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Ij++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Fj),this.nodes.forEach(Vj),this.nodes.forEach($j),this.nodes.forEach(Oj)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new bj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=vk(o)&&!kD(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let h,d=0;const f=()=>this.root.updateBlockedByResize=!1;It.read(()=>{d=window.innerWidth}),n(o,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,h&&h(),h=Aj(f,250),em.hasAnimatedSinceResize&&(em.hasAnimatedSinceResize=!1,this.nodes.forEach(gS)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||Xj,{onLayoutAnimationStart:x,onLayoutAnimationComplete:A}=u.getProps(),m=!this.targetLayout||!e_(this.targetLayout,p),w=!d&&f;if(this.options.layoutRoot||this.resumeFrom||w||d&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...fw(y,"layout"),onPlay:x,onComplete:A};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(h,w)}else d||gS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),No(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&n_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zj),this.nodes.forEach(Dj),this.nodes.forEach(jj)):this.nodes.forEach(mS),this.clearAllSnapshots();const a=yn.now();Te.delta=vr(0,1e3/60,a-Te.timestamp),Te.timestamp=a,Te.isProcessing=!0,X0.update.process(Te),X0.preRender.process(Te),X0.render.process(Te),Te.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bj),this.sharedNodes.forEach(Uj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,It.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){It.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!en(this.snapshot.measuredBox.x)&&!en(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!t_(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Go(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Kj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return Xt();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(qj))){const{scroll:h}=this.root;h&&(ql(a.x,h.offset.x),ql(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=Xt();if(Kn(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Kn(a,o),ql(a.x,d.offset.x),ql(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Xt();Kn(l,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Yl(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Go(h.latestValues)&&Yl(l,h.latestValues)}return Go(this.latestValues)&&Yl(l,this.latestValues),l}removeTransform(o){const a=Xt();Kn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Go(u.latestValues))continue;Sv(u.latestValues)&&u.updateSnapshot();const h=Xt(),d=u.measurePageBox();Kn(h,d),lS(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Go(this.latestValues)&&lS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Te.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=Te.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),Ih(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xt(),this.targetWithTransforms=Xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ej(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kn(this.target,this.layout.layoutBox),Dk(this.target,this.targetDelta)):Kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xt(),this.relativeTargetOrigin=Xt(),Ih(this.relativeTargetOrigin,this.target,p.target),Kn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Sv(this.parent.latestValues)||Ik(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Te.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Kn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,f=this.treeScale.y;f3(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Xt());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rS(this.prevProjectionDelta.x,this.projectionDelta.x),rS(this.prevProjectionDelta.y,this.projectionDelta.y)),Lh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==f||!fS(this.projectionDelta.x,this.prevProjectionDelta.x)||!fS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ql(),this.projectionDelta=Ql(),this.projectionDeltaWithTransform=Ql()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},d=Ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Xt(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=p!==y,A=this.getStack(),m=!A||A.members.length<=1,w=!!(x&&!m&&this.options.crossfade===!0&&!this.path.some(Gj));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const k=C/1e3;yS(d.x,o.x,k),yS(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ih(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Wj(this.relativeTarget,this.relativeTargetOrigin,f,k),b&&Mj(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Xt()),Kn(b,this.relativeTarget)),x&&(this.animationValues=h,Ej(h,u,this.latestValues,k,w,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(No(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=It.update(()=>{em.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cu(0)),this.currentAnimation=xj(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Lj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:h}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&s_(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Xt();const d=en(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const f=en(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Kn(a,l),Yl(a,h),Lh(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Rj),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&ry("z",o,u,this.animationValues);for(let h=0;h<sy.length;h++)ry(`rotate${sy[h]}`,o,u,this.animationValues),ry(`skew${sy[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=tm(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=tm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Go(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let d=Nj(this.projectionDeltaWithTransform,this.treeScale,h);l&&(d=l(h,d)),o.transform=d;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in id){if(h[y]===void 0)continue;const{correct:x,applyTo:A,isCSSVariable:m}=id[y],w=d==="none"?h[y]:x(h[y],u);if(A){const b=A.length;for(let C=0;C<b;C++)o[A[C]]=w}else m?this.options.visualElement.renderState.vars[y]=w:o[y]=w}this.options.layoutId&&(o.pointerEvents=u===this?tm(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(pS),this.root.sharedNodes.clear()}}}function Dj(n){n.updateLayout()}function jj(n){var e;const t=((e=n.resumeFrom)==null?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:s}=n.layout,{animationType:r}=n.options,o=t.source!==n.layout.source;r==="size"?Qn(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=en(f);f.min=i[d].min,f.max=f.min+p}):s_(r,t.layoutBox,i)&&Qn(d=>{const f=o?t.measuredBox[d]:t.layoutBox[d],p=en(i[d]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+p)});const a=Ql();Lh(a,i,t.layoutBox);const l=Ql();o?Lh(l,n.applyTransform(s,!0),t.measuredBox):Lh(l,i,t.layoutBox);const u=!t_(a);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const y=Xt();Ih(y,t.layoutBox,f.layoutBox);const x=Xt();Ih(x,i,p.layoutBox),e_(y,x)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=y,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Fj(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Oj(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Bj(n){n.clearSnapshot()}function pS(n){n.clearMeasurements()}function mS(n){n.isLayoutDirty=!1}function zj(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function gS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Vj(n){n.resolveTargetDelta()}function $j(n){n.calcProjection()}function Hj(n){n.resetSkewAndRotation()}function Uj(n){n.removeLeadSnapshot()}function yS(n,t,e){n.translate=Ot(t.translate,0,e),n.scale=Ot(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function vS(n,t,e,i){n.min=Ot(t.min,e.min,i),n.max=Ot(t.max,e.max,i)}function Wj(n,t,e,i){vS(n.x,t.x,e.x,i),vS(n.y,t.y,e.y,i)}function Gj(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Xj={duration:.45,ease:[.4,0,.1,1]},xS=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),wS=xS("applewebkit/")&&!xS("chrome/")?Math.round:hi;function bS(n){n.min=wS(n.min),n.max=wS(n.max)}function Kj(n){bS(n.x),bS(n.y)}function s_(n,t,e){return n==="position"||n==="preserve-aspect"&&!tj(dS(t),dS(e),.2)}function qj(n){var t;return n!==n.root&&((t=n.scroll)==null?void 0:t.wasRoot)}const Yj=i_({attachResizeListener:(n,t)=>sd(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),oy={current:void 0},r_=i_({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!oy.current){const n=new Yj({});n.mount(window),n.setOptions({layoutScroll:!0}),oy.current=n}return oy.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Qj={pan:{Feature:mj},drag:{Feature:pj,ProjectionNode:r_,MeasureLayout:Qk}};function AS(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=i[s];r&&It.postRender(()=>r(t,Yf(t)))}class Zj extends $o{mount(){const{current:t}=this.node;t&&(this.unmount=bD(t,(e,i)=>(AS(this.node,i,"Start"),s=>AS(this.node,s,"End"))))}unmount(){}}class Jj extends $o{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gf(sd(this.node.current,"focus",()=>this.onFocus()),sd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function SS(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=i[s];r&&It.postRender(()=>r(t,Yf(t)))}class tF extends $o{mount(){const{current:t}=this.node;t&&(this.unmount=CD(t,(e,i)=>(SS(this.node,i,"Start"),(s,{success:r})=>SS(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Mv=new WeakMap,ay=new WeakMap,eF=n=>{const t=Mv.get(n.target);t&&t(n)},nF=n=>{n.forEach(eF)};function iF({root:n,...t}){const e=n||document;ay.has(e)||ay.set(e,{});const i=ay.get(e),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(nF,{root:n,...t})),i[s]}function sF(n,t,e){const i=iF(t);return Mv.set(n,e),i.observe(n),()=>{Mv.delete(n),i.unobserve(n)}}const rF={some:0,all:1};class oF extends $o{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:s="some",once:r}=t,o={root:e?e.current:void 0,rootMargin:i,threshold:typeof s=="number"?s:rF[s]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(l)};return sF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(aF(t,e))&&this.startObserver()}unmount(){}}function aF({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const lF={inView:{Feature:oF},tap:{Feature:tF},focus:{Feature:Jj},hover:{Feature:Zj}},cF={layout:{ProjectionNode:r_,MeasureLayout:Qk}},uF={...K3,...lF,...Qj,...cF},L=u3(uF,S3);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),it=(n,t)=>{const e=P.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...u},h)=>P.createElement("svg",{ref:h,...hF,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:["lucide",`lucide-${dF(n)}`,a].join(" "),...u},[...t.map(([d,f])=>P.createElement(d,f)),...Array.isArray(l)?l:[l]]));return e.displayName=`${n}`,e};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=it("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=it("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=it("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=it("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=it("Cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=it("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=it("Dna",[["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m17 6-2.5-2.5",key:"5cdfhj"}],["path",{d:"m14 8-1-1",key:"15nbz5"}],["path",{d:"m7 18 2.5 2.5",key:"16tu1a"}],["path",{d:"m3.5 14.5.5.5",key:"hapbhd"}],["path",{d:"m20 9 .5.5",key:"1n7z02"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m10 16 1.5 1.5",key:"11lckj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ES=it("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=it("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=it("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=it("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=it("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=it("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=it("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=it("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=it("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=it("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=it("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=it("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=it("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=it("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=it("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=it("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=it("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=it("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=it("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=it("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=it("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=it("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=it("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=it("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=it("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=it("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]),CS=[{code:"es",name:"Español",flag:"es"},{code:"en",name:"English",flag:"us"},{code:"fr",name:"Français",flag:"fr"},{code:"pt",name:"Português",flag:"br"}],kS=()=>{const{currentLanguage:n,setLanguage:t}=se(),[e,i]=P.useState(!1),s=CS.find(r=>r.code===n);return g.jsx("div",{className:"flex items-center",children:g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>i(!e),className:"flex items-center space-x-2 px-3 py-2 bg-white border border-gray-200 rounded-lg hover:border-blue-300 transition-colors duration-200",children:[g.jsx(d_,{size:16,className:"text-gray-500"}),g.jsxs("span",{className:"flex items-center space-x-2",children:[g.jsx("span",{className:`fi fi-${s==null?void 0:s.flag} w-4 h-3`}),g.jsx("span",{className:"text-sm font-medium",children:s==null?void 0:s.code.toUpperCase()})]}),g.jsx(a_,{size:14,className:`text-gray-400 transition-transform duration-200 ${e?"rotate-180":""}`})]}),g.jsx(qf,{children:e&&g.jsx(L.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:CS.map(r=>g.jsx("button",{onClick:()=>{t(r.code),i(!1)},className:`w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors duration-200 first:rounded-t-lg last:rounded-b-lg ${n===r.code?"bg-blue-50 text-blue-600":""}`,children:g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("span",{className:`fi fi-${r.flag} w-5 h-4`}),g.jsx("span",{className:"font-medium",children:r.name})]})},r.code))})})]})})},RF=()=>{const{t:n}=se(),[t,e]=P.useState(!1),i=[{name:n("nav.home"),href:"#home"},{name:n("nav.about"),href:"/about"},{name:n("nav.publications"),href:"/publications"},{name:n("nav.news"),href:"/news"},{name:n("nav.team"),href:"/team"},{name:n("nav.congresses"),href:"/congresses"},{name:n("nav.outreach"),href:"/outreach"},{name:n("nav.dissemination"),href:"/dissemination"}];return g.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-600 rounded-lg",children:g.jsx(_u,{size:24,className:"text-white"})}),g.jsx("div",{className:"hidden sm:block",children:g.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Molecular Genetics Lab"})})]}),g.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:i.map(s=>g.jsx("a",{href:s.href,className:"text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200",children:s.name},s.name))}),g.jsx("div",{className:"hidden md:block",children:g.jsx(kS,{})}),g.jsx("button",{onClick:()=>e(!t),className:"md:hidden p-2 rounded-lg text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200",children:t?g.jsx(Zf,{size:24}):g.jsx(bF,{size:24})})]}),t&&g.jsxs(L.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden py-4 border-t border-gray-200",children:[g.jsx("nav",{className:"flex flex-col space-y-4",children:i.map(s=>g.jsx("a",{href:s.href,onClick:()=>e(!1),className:"text-gray-600 hover:text-blue-600 font-medium transition-colors duration-200 py-2",children:s.name},s.name))}),g.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:g.jsx("div",{className:"flex justify-center",children:g.jsx(kS,{})})})]})]})})},NF=()=>{const{t:n}=se();return g.jsxs("section",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-slate-900 to-teal-900 relative overflow-hidden flex items-center",children:[g.jsxs("div",{className:"absolute inset-0",children:[g.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),g.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-teal-500/10 rounded-full blur-2xl animate-pulse delay-1000"}),g.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-cyan-500/5 rounded-full blur-xl animate-pulse delay-500"})]}),g.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:g.jsxs("div",{className:"text-center",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-3xl mb-8",children:g.jsx(_u,{size:48,className:"text-white"})}),g.jsx(L.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight",children:n("hero.title")}),g.jsx(L.p,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"text-xl md:text-2xl text-blue-100 mb-12 max-w-4xl mx-auto leading-relaxed",children:n("hero.subtitle")}),g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"flex flex-col sm:flex-row gap-6 justify-center items-center",children:[g.jsx(L.a,{href:"#research",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"bg-gradient-to-r from-teal-500 to-cyan-500 text-white px-8 py-4 rounded-2xl font-semibold text-lg shadow-xl hover:shadow-2xl transition-all duration-300",children:n("hero.cta.primary")}),g.jsx(L.a,{href:"#publications",whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"border-2 border-white/30 text-white px-8 py-4 rounded-2xl font-semibold text-lg backdrop-blur-sm hover:bg-white/10 transition-all duration-300",children:n("hero.cta.secondary")})]})]})}),g.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:1},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:g.jsx(L.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},className:"text-white/70 cursor-pointer",children:g.jsx(a_,{size:32})})})]})},LF=()=>{const{t:n}=se(),t=[{id:"1",icon:c_,color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-500/10",borderColor:"border-blue-500/20"},{id:"2",icon:vF,color:"from-green-500 to-emerald-500",bgColor:"bg-green-500/10",borderColor:"border-green-500/20"},{id:"3",icon:Mw,color:"from-emerald-500 to-teal-500",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/20"},{id:"4",icon:pF,color:"from-purple-500 to-pink-500",bgColor:"bg-purple-500/10",borderColor:"border-purple-500/20"},{id:"5",icon:SF,color:"from-orange-500 to-red-500",bgColor:"bg-orange-500/10",borderColor:"border-orange-500/20"},{id:"6",icon:gF,color:"from-cyan-500 to-blue-500",bgColor:"bg-cyan-500/10",borderColor:"border-cyan-500/20"}];return g.jsxs("section",{id:"research",className:"py-20 bg-gradient-to-b from-slate-50 to-blue-50 relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-5",children:g.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Ccircle cx='7' cy='7' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16 relative z-10",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8,delay:.2},viewport:{once:!0},className:"inline-block p-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl mb-6",children:g.jsx(_u,{size:32,className:"text-white"})}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-slate-800 to-blue-800 bg-clip-text text-transparent mb-4",children:n("priority.title")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-cyan-500 mx-auto rounded-full"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 relative z-10",children:t.map((e,i)=>{const s=e.icon;return g.jsxs(L.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},viewport:{once:!0},whileHover:{y:-8,scale:1.02},className:`${e.bgColor} backdrop-blur-sm border ${e.borderColor} rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 group relative overflow-hidden`,children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),g.jsx(L.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.6},className:`inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br ${e.color} rounded-2xl mb-6 shadow-lg relative z-10`,children:g.jsx(s,{size:28,className:"text-white"})}),g.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2 relative z-10 group-hover:text-slate-900 transition-colors duration-300",children:n(`priority.${e.id}`)})]},e.id)})})]})]})},IF=()=>{const{t:n}=se(),t=["1","2","3","4"];return g.jsxs("section",{id:"publications",className:"py-20 bg-gradient-to-b from-slate-900 to-blue-900 relative overflow-hidden",children:[g.jsxs("div",{className:"absolute inset-0",children:[g.jsx("div",{className:"absolute top-10 left-1/4 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl animate-pulse"}),g.jsx("div",{className:"absolute bottom-10 right-1/4 w-48 h-48 bg-cyan-500/5 rounded-full blur-2xl animate-pulse delay-1000"})]}),g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16 relative z-10",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8,delay:.2},viewport:{once:!0},className:"inline-block p-3 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-2xl mb-6",children:g.jsx(o_,{size:32,className:"text-white"})}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:n("publications.title")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-cyan-400 to-blue-400 mx-auto rounded-full"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 relative z-10",children:t.map((e,i)=>g.jsx(L.a,{href:n(`publications.${e}.link`),target:"_blank",rel:"noopener noreferrer",initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},viewport:{once:!0},whileHover:{y:-5,scale:1.02},className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 group hover:bg-white/15",children:g.jsxs("div",{className:"flex items-start space-x-4",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx(L.div,{whileHover:{rotate:5,scale:1.1},className:"inline-flex items-center justify-center w-14 h-14 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl shadow-lg",children:g.jsx(u_,{size:26,className:"text-white"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold text-white mb-3 group-hover:text-cyan-300 transition-colors duration-300",children:n(`publications.${e}.title`)}),g.jsxs("div",{className:"flex items-center text-cyan-300 group-hover:text-cyan-200 transition-colors duration-300",children:[g.jsx("span",{className:"text-sm font-semibold",children:n("publications.readMore")}),g.jsx(L.div,{whileHover:{x:3},transition:{duration:.2},children:g.jsx(ES,{size:16,className:"ml-2"})})]})]})]})},e))}),g.jsx(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.4},viewport:{once:!0},className:"text-center mt-12",children:g.jsxs(L.a,{href:n("publications.link"),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},className:"inline-flex items-center space-x-2 px-8 py-4 bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-300",children:[g.jsx("span",{children:n("publications.viewAll")}),g.jsx(ES,{size:20})]})})]})]})},DF=()=>{const{t:n}=se(),t=[{id:"1",icon:f_,image:"https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg?auto=compress&cs=tinysrgb&w=800",gradient:"from-blue-500 to-purple-600"},{id:"2",icon:h_,image:"https://images.pexels.com/photos/2280549/pexels-photo-2280549.jpeg?auto=compress&cs=tinysrgb&w=800",gradient:"from-green-500 to-teal-600"},{id:"3",icon:m_,image:"https://images.pexels.com/photos/256490/pexels-photo-256490.jpeg?auto=compress&cs=tinysrgb&w=800",gradient:"from-orange-500 to-red-600"},{id:"4",icon:Qf,image:"https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=800",gradient:"from-cyan-500 to-blue-600"}];return g.jsxs("section",{className:"py-20 bg-gradient-to-b from-blue-50 to-slate-100 relative",children:[g.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[g.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-200/30 to-cyan-200/30 rounded-full blur-3xl"}),g.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-teal-200/30 to-emerald-200/30 rounded-full blur-3xl"})]}),g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16 relative z-10",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8,delay:.2},viewport:{once:!0},className:"inline-block p-3 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-2xl mb-6",children:g.jsx(CF,{size:32,className:"text-white"})}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-slate-800 to-teal-800 bg-clip-text text-transparent mb-4",children:n("labdimensions.title")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-teal-500 to-cyan-500 mx-auto rounded-full"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 relative z-10",children:t.map((e,i)=>{const s=e.icon;return g.jsxs(L.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},viewport:{once:!0},whileHover:{y:-8,scale:1.03},className:"bg-white/80 backdrop-blur-sm border border-white/50 rounded-2xl overflow-hidden shadow-xl hover:shadow-2xl transition-all duration-500 group",children:[g.jsxs("div",{className:"aspect-w-16 aspect-h-9 h-48 overflow-hidden relative",children:[g.jsx("img",{src:e.image,alt:n(`labdimensions.${e.id}.title`),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),g.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${e.gradient} opacity-20 group-hover:opacity-30 transition-opacity duration-500`}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]}),g.jsxs("div",{className:"p-8",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[g.jsx(L.div,{whileHover:{rotate:360,scale:1.2},transition:{duration:.6},className:`inline-flex items-center justify-center w-12 h-12 bg-gradient-to-br ${e.gradient} rounded-xl shadow-lg`,children:g.jsx(s,{size:22,className:"text-white"})}),g.jsx("h3",{className:"text-lg font-bold text-slate-800 group-hover:text-slate-900 transition-colors duration-300",children:n(`labdimensions.${e.id}.title`)})]}),g.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:n(`labdimensions.${e.id}.description`)})]})]},e.id)})})]})]})},jF=()=>{const{t:n}=se(),t=["1","2","3"];return g.jsxs("section",{id:"news",className:"py-20 bg-gradient-to-b from-slate-100 to-white relative",children:[g.jsx("div",{className:"absolute inset-0 opacity-5",children:g.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23000000' fill-opacity='1' fill-rule='evenodd'%3E%3Cpath d='m0 40l40-40h-40v40zm40 0v-40h-40l40 40z'/%3E%3C/g%3E%3C/svg%3E")`}})}),g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"text-center mb-16 relative z-10",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},whileInView:{scale:1,opacity:1},transition:{duration:.8,delay:.2},viewport:{once:!0},className:"inline-block p-3 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl mb-6",children:g.jsx(g_,{size:32,className:"text-white"})}),g.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-slate-800 to-emerald-800 bg-clip-text text-transparent mb-4",children:n("news.title")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 mx-auto rounded-full"})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10",children:t.map((e,i)=>g.jsxs(L.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},viewport:{once:!0},whileHover:{y:-8,scale:1.02},onClick:()=>window.location.href="/news",className:"bg-white border border-gray-200/50 rounded-2xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 cursor-pointer group relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-50/50 to-teal-50/50 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),g.jsxs("div",{className:"relative z-10",children:[g.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 mb-3",children:[g.jsx("div",{className:"p-1 bg-emerald-100 rounded-lg",children:g.jsx(_w,{size:14,className:"text-emerald-600"})}),g.jsx("span",{children:n(`news.${e}.date`)})]}),g.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-6 group-hover:text-emerald-700 transition-colors duration-300 leading-tight",children:n(`news.${e}.title`)}),g.jsxs("div",{className:"flex items-center text-emerald-600 group-hover:text-emerald-700 transition-colors duration-300",children:[g.jsx("span",{className:"text-sm font-semibold",children:"Read more"}),g.jsx(L.div,{whileHover:{x:4},transition:{duration:.2},children:g.jsx(fF,{size:16,className:"ml-2"})})]})]})]},e))})]})]})},FF=()=>{const{t:n}=se(),t=[{icon:_F,href:"#",label:"Twitter"},{icon:yF,href:"#",label:"Instagram"},{icon:wF,href:"#",label:"LinkedIn"},{icon:MF,href:"#",label:"YouTube"}],e=[{name:n("footer.sections.research"),href:"#research"},{name:n("footer.sections.team"),href:"#team"},{name:n("footer.sections.facilities"),href:"#facilities"}],i=[{name:n("footer.legal.privacy"),href:"/privacy"},{name:n("footer.legal.terms"),href:"/terms"},{name:"Cookies",href:"/cookies"}];return g.jsxs("footer",{className:"bg-gradient-to-b from-slate-900 via-blue-900 to-slate-900 text-white relative overflow-hidden",children:[g.jsxs("div",{className:"absolute inset-0",children:[g.jsx("div",{className:"absolute top-0 left-1/4 w-64 h-64 bg-blue-500/5 rounded-full blur-3xl"}),g.jsx("div",{className:"absolute bottom-0 right-1/4 w-48 h-48 bg-cyan-500/5 rounded-full blur-2xl"})]}),g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16 relative z-10",children:[g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},className:"lg:col-span-2",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[g.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg",children:g.jsx(_u,{size:24,className:"text-white"})}),g.jsx("h3",{className:"text-2xl font-bold",children:"Molecular Genetics Lab"})]}),g.jsx("p",{className:"text-gray-300 mb-6 max-w-md",children:n("description.subtitle")}),g.jsx("div",{className:"flex space-x-4",children:t.map((s,r)=>{const o=s.icon;return g.jsx(L.a,{href:s.href,whileHover:{scale:1.2,rotate:5},whileTap:{scale:.9},className:"flex items-center justify-center w-12 h-12 bg-gray-800/50 backdrop-blur-sm rounded-xl hover:bg-gradient-to-br hover:from-blue-500 hover:to-cyan-500 transition-all duration-300 shadow-lg hover:shadow-xl","aria-label":s.label,children:g.jsx(o,{size:18})},s.label)})})]}),g.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},children:[g.jsx("h4",{className:"text-lg font-bold mb-6 text-cyan-300",children:"Quick Links"}),g.jsx("ul",{className:"space-y-2",children:e.map(s=>g.jsx("li",{children:g.jsx("a",{href:s.href,className:"text-gray-300 hover:text-cyan-300 transition-colors duration-300 hover:translate-x-1 inline-block",children:s.name})},s.name))})]}),g.jsxs(L.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[g.jsx("h4",{className:"text-lg font-bold mb-6 text-cyan-300",children:n("footer.contact.title")}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"p-2 bg-gray-800/50 rounded-lg",children:g.jsx(ug,{size:14,className:"text-cyan-400 flex-shrink-0"})}),g.jsx("span",{className:"text-gray-300 text-sm",children:n("footer.contact.address")})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"p-2 bg-gray-800/50 rounded-lg",children:g.jsx(p_,{size:14,className:"text-cyan-400 flex-shrink-0"})}),g.jsx("a",{href:`mailto:${n("footer.contact.email")}`,className:"text-gray-300 hover:text-cyan-300 transition-colors duration-300 text-sm",children:n("footer.contact.email")})]}),g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"p-2 bg-gray-800/50 rounded-lg",children:g.jsx(y_,{size:14,className:"text-cyan-400 flex-shrink-0"})}),g.jsx("a",{href:`tel:${n("footer.contact.phone")}`,className:"text-gray-300 hover:text-cyan-300 transition-colors duration-300 text-sm",children:n("footer.contact.phone")})]})]})]})]}),g.jsx(L.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:.3},viewport:{once:!0},className:"border-t border-gray-700/50 mt-12 pt-8",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[g.jsx("p",{className:"text-gray-400 text-sm",children:"© 2025 moleculargeneticslab.cl. All rights reserved."}),g.jsx("div",{className:"flex space-x-6",children:i.map(s=>g.jsx("a",{href:s.href,className:"text-gray-400 hover:text-cyan-300 transition-colors duration-300 text-sm",children:s.name},s.name))})]})})]})]})},OF=()=>{const{t:n}=se(),{showBanner:t,acceptAllCookies:e,rejectAllCookies:i,hideBanner:s}=u2(),r=()=>{window.open("/cookies","_blank")};return g.jsx(qf,{children:t&&g.jsx(L.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{duration:.3},className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md border-t border-gray-200 shadow-2xl",children:g.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:g.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[g.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg",children:g.jsx(l_,{size:24,className:"text-white"})})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:n("cookies.banner.title")}),g.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:n("cookies.banner.message")})]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full lg:w-auto",children:[g.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"px-4 py-2 text-blue-600 hover:text-blue-700 font-medium text-sm border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors duration-200",children:n("cookies.banner.readMore")}),g.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:i,className:"px-4 py-2 text-gray-600 hover:text-gray-700 font-medium text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:n("cookies.banner.reject")}),g.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-semibold text-sm rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:n("cookies.banner.accept")})]}),g.jsx("button",{onClick:s,className:"absolute top-4 right-4 lg:relative lg:top-0 lg:right-0 p-2 text-gray-400 hover:text-gray-600 transition-colors duration-200",children:g.jsx(Zf,{size:20})})]})})})})},BF=()=>g.jsxs("div",{className:"min-h-screen",children:[g.jsx(RF,{}),g.jsxs("main",{children:[g.jsx(NF,{}),g.jsx(LF,{}),g.jsx(IF,{}),g.jsx(DF,{}),g.jsx(jF,{})]}),g.jsx(FF,{}),g.jsx(OF,{})]}),zF=()=>{const{t:n}=se(),t=[{title:n("privacy.introduction"),content:n("privacy.introText")},{title:n("privacy.dataCollection"),content:n("privacy.dataCollectionText")},{title:n("privacy.dataUse"),content:n("privacy.dataUseText")},{title:n("privacy.dataProtection"),content:n("privacy.dataProtectionText")},{title:n("privacy.contact"),content:n("privacy.contactText")}];return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:g.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-3 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-2xl mb-6",children:g.jsx(EF,{size:32,className:"text-white"})}),g.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-slate-800 to-blue-800 bg-clip-text text-transparent mb-4",children:n("privacy.title")}),g.jsx("p",{className:"text-gray-600 mb-4",children:n("privacy.lastUpdated")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-cyan-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-12",children:t.map((e,i)=>g.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+i*.1},className:"mb-8 last:mb-0",children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:e.title}),g.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.content})]},i))})]})})})},VF=()=>{const{t:n}=se(),t=[{title:n("terms.acceptance"),content:n("terms.acceptanceText")},{title:n("terms.useOfSite"),content:n("terms.useOfSiteText")},{title:n("terms.intellectualProperty"),content:n("terms.intellectualPropertyText")},{title:n("terms.liability"),content:n("terms.liabilityText")},{title:n("terms.modifications"),content:n("terms.modificationsText")}];return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:g.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-3 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl mb-6",children:g.jsx(u_,{size:32,className:"text-white"})}),g.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-slate-800 to-emerald-800 bg-clip-text text-transparent mb-4",children:n("terms.title")}),g.jsx("p",{className:"text-gray-600 mb-4",children:n("terms.lastUpdated")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-12",children:t.map((e,i)=>g.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+i*.1},className:"mb-8 last:mb-0",children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:e.title}),g.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.content})]},i))})]})})})},$F=()=>{const{t:n}=se(),{resetCookiePreferences:t}=u2(),e=()=>{t(),alert("Las preferencias de cookies han sido restablecidas. El banner aparecerá nuevamente.")};return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:g.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-3 bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl mb-6",children:g.jsx(l_,{size:32,className:"text-white"})}),g.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-slate-800 to-orange-800 bg-clip-text text-transparent mb-4",children:n("cookies.page.title")}),g.jsx("p",{className:"text-gray-600 mb-4",children:n("cookies.page.description")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-orange-500 to-red-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-orange-600 hover:text-orange-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[g.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:n("cookies.page.whatAreCookies")}),g.jsx("p",{className:"text-gray-600 leading-relaxed",children:n("cookies.page.whatAreCookiesText")})]}),g.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mb-8",children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-6",children:n("cookies.page.typesOfCookies")}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:n("cookies.page.essential")}),g.jsx("p",{className:"text-green-700",children:n("cookies.page.essentialText")})]}),g.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:n("cookies.page.analytics")}),g.jsx("p",{className:"text-blue-700",children:n("cookies.page.analyticsText")})]}),g.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:[g.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-2",children:n("cookies.page.preferences")}),g.jsx("p",{className:"text-purple-700",children:n("cookies.page.preferencesText")})]})]})]}),g.jsxs(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-8",children:[g.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4",children:n("cookies.page.resetCookies")}),g.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:n("cookies.page.resetText")}),g.jsxs(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,className:"flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-red-500 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-300",children:[g.jsx(AF,{size:20}),g.jsx("span",{children:n("cookies.page.resetButton")})]})]})]})]})})})},HF=()=>{const{t:n}=se(),t=[{icon:c_,title:"Genomics",description:"Advanced genomic analysis of unique Patagonian yeasts",gradient:"from-blue-500 to-cyan-500"},{icon:h_,title:"Biotechnology",description:"Innovative biotechnological applications and solutions",gradient:"from-green-500 to-emerald-500"},{icon:kF,title:"Experimental Evolution",description:"Targeted generation of hybrid strains for specialized applications",gradient:"from-purple-500 to-pink-500"},{icon:Mw,title:"Nothofagus Research",description:"Specialized study of yeasts from temperate forest bark",gradient:"from-emerald-500 to-teal-500"},{icon:xF,title:"Innovation",description:"Custom yeasts for brewing and whisky production",gradient:"from-orange-500 to-red-500"},{icon:_u,title:"Applied Research",description:"Bridging fundamental research with practical solutions",gradient:"from-cyan-500 to-blue-500"}];return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-16",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-3xl mb-8",children:g.jsx(_u,{size:48,className:"text-white"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-slate-800 to-blue-800 bg-clip-text text-transparent mb-6",children:n("about.title")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-cyan-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},onClick:()=>window.history.back(),children:[g.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-full blur-3xl opacity-50"}),g.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-full blur-2xl opacity-50"}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 mb-8 text-center",children:n("about.mission.title")}),g.jsx("p",{className:"text-lg text-gray-700 leading-relaxed text-center max-w-4xl mx-auto",children:n("about.mission.description")})]})]}),g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-16",children:[g.jsx("h2",{className:"text-3xl font-bold text-center text-slate-800 mb-12",children:n("about.expertise.title")}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,i)=>{const s=e.icon;return g.jsxs(L.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5+i*.1},whileHover:{y:-8,scale:1.02},className:"bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 group border border-gray-100",children:[g.jsx(L.div,{whileHover:{rotate:360,scale:1.1},transition:{duration:.6},className:`inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br ${e.gradient} rounded-2xl mb-6 shadow-lg`,children:g.jsx(s,{size:28,className:"text-white"})}),g.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-3 group-hover:text-slate-900 transition-colors duration-300",children:e.title}),g.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description})]},e.title)})})]}),g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"bg-gradient-to-br from-blue-900 via-slate-900 to-teal-900 rounded-3xl p-8 md:p-12 text-white relative overflow-hidden",children:[g.jsxs("div",{className:"absolute inset-0",children:[g.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-blue-500/10 rounded-full blur-3xl"}),g.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-48 h-48 bg-cyan-500/10 rounded-full blur-2xl"})]}),g.jsxs("div",{className:"relative z-10 text-center",children:[g.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-6",children:n("about.vision.title")}),g.jsx("p",{className:"text-lg text-blue-100 leading-relaxed max-w-4xl mx-auto",children:n("about.vision.description")})]})]})]})]})})},UF=()=>{const{t:n}=se(),t=[{id:1,date:"2025-03-15",author:"Dr. María González",readTime:"5 min",image:"https://images.pexels.com/photos/2280549/pexels-photo-2280549.jpeg?auto=compress&cs=tinysrgb&w=800"},{id:2,date:"2025-03-08",author:"Dr. Carlos Mendoza",readTime:"3 min",image:"https://images.pexels.com/photos/3735747/pexels-photo-3735747.jpeg?auto=compress&cs=tinysrgb&w=800"},{id:3,date:"2025-03-01",author:"Dr. Ana Silva",readTime:"7 min",image:"https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg?auto=compress&cs=tinysrgb&w=800"},{id:4,date:"2025-02-22",author:"Dr. Roberto Fernández",readTime:"4 min",image:"https://images.pexels.com/photos/256490/pexels-photo-256490.jpeg?auto=compress&cs=tinysrgb&w=800"},{id:5,date:"2025-02-15",author:"Dr. Laura Martínez",readTime:"6 min",image:"https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=800"},{id:6,date:"2025-02-08",author:"Dr. Diego Ramírez",readTime:"5 min",image:"https://images.pexels.com/photos/2280571/pexels-photo-2280571.jpeg?auto=compress&cs=tinysrgb&w=800"}];return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-16",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-3xl mb-8",children:g.jsx(g_,{size:48,className:"text-white"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-slate-800 to-emerald-800 bg-clip-text text-transparent mb-6",children:n("news.title")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,i)=>g.jsxs(L.article,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+i*.1},whileHover:{y:-8,scale:1.02},className:"bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden group cursor-pointer",children:[g.jsxs("div",{className:"aspect-w-16 aspect-h-9 h-48 overflow-hidden relative",children:[g.jsx("img",{src:e.image,alt:n(`newsPage.articles.${e.id}.title`),className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]}),g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(_w,{size:14}),g.jsx("span",{children:e.date})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(mF,{size:14}),g.jsx("span",{children:e.readTime})]})]}),g.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-3 group-hover:text-emerald-700 transition-colors duration-300 line-clamp-2",children:n(`newsPage.articles.${e.id}.title`)}),g.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3",children:n(`newsPage.articles.${e.id}.excerpt`)}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[g.jsx(TF,{size:14}),g.jsx("span",{children:e.author})]}),g.jsx("button",{className:"text-emerald-600 hover:text-emerald-700 font-semibold text-sm transition-colors duration-200",children:n("newsPage.readMore")})]})]})]},e.id))})]})})},WF=()=>{const{t:n}=se(),t=[{id:1,name:"Dr. María González",position:"Director de Laboratorio",education:"PhD en Genética Molecular",email:"maria.gonzalez@lab.cl",phone:"+56 9 1234 5678",image:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Genómica de Levaduras"},{id:2,name:"Dr. Carlos Mendoza",position:"Investigador Senior",education:"PhD en Biotecnología",email:"carlos.mendoza@lab.cl",phone:"+56 9 2345 6789",image:"https://images.pexels.com/photos/2182970/pexels-photo-2182970.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Evolución Experimental"},{id:3,name:"Dr. Ana Silva",position:"Investigadora Senior",education:"PhD en Microbiología",email:"ana.silva@lab.cl",phone:"+56 9 3456 7890",image:"https://images.pexels.com/photos/3184338/pexels-photo-3184338.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Ecología Microbiana"},{id:4,name:"Dr. Roberto Fernández",position:"Investigador Asociado",education:"PhD en Biología Molecular",email:"roberto.fernandez@lab.cl",phone:"+56 9 4567 8901",image:"https://images.pexels.com/photos/2182975/pexels-photo-2182975.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Fermentación Industrial"},{id:5,name:"Dr. Laura Martínez",position:"Investigadora Asociada",education:"PhD en Bioquímica",email:"laura.martinez@lab.cl",phone:"+56 9 5678 9012",image:"https://images.pexels.com/photos/3184339/pexels-photo-3184339.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Metabolismo de Levaduras"},{id:6,name:"Dr. Diego Ramírez",position:"Investigador Postdoctoral",education:"PhD en Genética",email:"diego.ramirez@lab.cl",phone:"+56 9 6789 0123",image:"https://images.pexels.com/photos/2182969/pexels-photo-2182969.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Análisis Genómico"},{id:7,name:"Dra. Patricia López",position:"Investigadora Postdoctoral",education:"PhD en Biotecnología Ambiental",email:"patricia.lopez@lab.cl",phone:"+56 9 7890 1234",image:"https://images.pexels.com/photos/3184340/pexels-photo-3184340.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Biodiversidad Microbiana"},{id:8,name:"MSc. Andrés Torres",position:"Técnico de Laboratorio Senior",education:"Magíster en Biotecnología",email:"andres.torres@lab.cl",phone:"+56 9 8901 2345",image:"https://images.pexels.com/photos/2182973/pexels-photo-2182973.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Cultivo de Microorganismos"},{id:9,name:"MSc. Valentina Herrera",position:"Técnica de Laboratorio Senior",education:"Magíster en Microbiología",email:"valentina.herrera@lab.cl",phone:"+56 9 9012 3456",image:"https://images.pexels.com/photos/3184341/pexels-photo-3184341.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Análisis Molecular"},{id:10,name:"Ing. Sebastián Morales",position:"Especialista en Bioinformática",education:"Ingeniería en Biotecnología",email:"sebastian.morales@lab.cl",phone:"+56 9 0123 4567",image:"https://images.pexels.com/photos/2182974/pexels-photo-2182974.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Análisis de Datos Genómicos"},{id:11,name:"MSc. Camila Vega",position:"Coordinadora de Proyectos",education:"Magíster en Gestión de Proyectos",email:"camila.vega@lab.cl",phone:"+56 9 1234 5670",image:"https://images.pexels.com/photos/3184342/pexels-photo-3184342.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Gestión de Investigación"},{id:12,name:"Lic. Joaquín Castro",position:"Técnico de Laboratorio",education:"Licenciatura en Biología",email:"joaquin.castro@lab.cl",phone:"+56 9 2345 6781",image:"https://images.pexels.com/photos/2182976/pexels-photo-2182976.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Preparación de Muestras"},{id:13,name:"Lic. Francisca Rojas",position:"Técnica de Laboratorio",education:"Licenciatura en Biotecnología",email:"francisca.rojas@lab.cl",phone:"+56 9 3456 7892",image:"https://images.pexels.com/photos/3184343/pexels-photo-3184343.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Control de Calidad"},{id:14,name:"Est. Matías Sánchez",position:"Estudiante de Doctorado",education:"Estudiante PhD Genética",email:"matias.sanchez@lab.cl",phone:"+56 9 4567 8903",image:"https://images.pexels.com/photos/2182977/pexels-photo-2182977.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Hibridación de Levaduras"},{id:15,name:"Est. Isidora Muñoz",position:"Estudiante de Doctorado",education:"Estudiante PhD Biotecnología",email:"isidora.munoz@lab.cl",phone:"+56 9 5678 9014",image:"https://images.pexels.com/photos/3184344/pexels-photo-3184344.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Aplicaciones Industriales"},{id:16,name:"Est. Nicolás Vargas",position:"Estudiante de Magíster",education:"Estudiante MSc Microbiología",email:"nicolas.vargas@lab.cl",phone:"+56 9 6789 0125",image:"https://images.pexels.com/photos/2182978/pexels-photo-2182978.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Caracterización Fenotípica"},{id:17,name:"Est. Sofía Espinoza",position:"Estudiante de Magíster",education:"Estudiante MSc Biología Molecular",email:"sofia.espinoza@lab.cl",phone:"+56 9 7890 1236",image:"https://images.pexels.com/photos/3184345/pexels-photo-3184345.jpeg?auto=compress&cs=tinysrgb&w=400",specialization:"Expresión Génica"}];return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-16",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-3xl mb-8",children:g.jsx(Qf,{size:48,className:"text-white"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-slate-800 to-blue-800 bg-clip-text text-transparent mb-6",children:n("team.title")}),g.jsx("p",{className:"text-xl text-gray-600 mb-6 max-w-3xl mx-auto",children:n("team.subtitle")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-cyan-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:t.map((e,i)=>g.jsxs(L.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+i*.05},whileHover:{y:-8,scale:1.02},className:"bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden group",children:[g.jsxs("div",{className:"aspect-w-1 aspect-h-1 h-64 overflow-hidden relative",children:[g.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),g.jsxs("div",{className:"p-6",children:[g.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2 group-hover:text-blue-700 transition-colors duration-300",children:e.name}),g.jsxs("div",{className:"space-y-2 mb-4",children:[g.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[g.jsx(ug,{size:14,className:"text-blue-500 flex-shrink-0"}),g.jsx("span",{className:"font-medium",children:e.position})]}),g.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[g.jsx(f_,{size:14,className:"text-emerald-500 flex-shrink-0"}),g.jsx("span",{children:e.education})]}),g.jsx("div",{className:"text-sm text-blue-600 font-medium",children:e.specialization})]}),g.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-100",children:[g.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-blue-600 transition-colors duration-200",children:[g.jsx(p_,{size:14,className:"flex-shrink-0"}),g.jsx("span",{className:"truncate",children:e.email})]}),g.jsxs("a",{href:`tel:${e.phone}`,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-blue-600 transition-colors duration-200",children:[g.jsx(y_,{size:14,className:"flex-shrink-0"}),g.jsx("span",{children:e.phone})]})]})]})]},e.id))})]})})},Ze=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Rv=[.001,0,0,.001,0,0],ly=1.35,Fn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Mr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},v_="pdfjs_internal_editor_",Q={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101,COMMENT:102},ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},GF={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Oe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},nm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Zt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},_l={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},c0={ERRORS:0,WARNINGS:1,INFOS:5},hg={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Mp={moveTo:0,lineTo:1,curveTo:2,closePath:3},XF={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let u0=c0.WARNINGS;function KF(n){Number.isInteger(n)&&(u0=n)}function qF(){return u0}function h0(n){u0>=c0.INFOS&&console.log(`Info: ${n}`)}function Z(n){u0>=c0.WARNINGS&&console.log(`Warning: ${n}`)}function bt(n){throw new Error(n)}function ne(n,t){n||bt(t)}function YF(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function x_(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=e4(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return YF(i)?i:null}function w_(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&x_(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function rt(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const El=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class _S extends El{constructor(t,e){super(t,"PasswordException"),this.code=e}}class cy extends El{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Nv extends El{constructor(t){super(t,"InvalidPDFException")}}class dg extends El{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class QF extends El{constructor(t){super(t,"FormatError")}}class Io extends El{constructor(t){super(t,"AbortException")}}function b_(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&bt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Jf(n){typeof n!="string"&&bt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function ZF(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function JF(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function t4(){try{return new Function(""),!0}catch{return!1}}class Le{static get isLittleEndian(){return rt(this,"isLittleEndian",JF())}static get isEvalSupported(){return rt(this,"isEvalSupported",t4())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return rt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return rt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return rt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const uy=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var hr,im,Lv;class X{static makeHexColor(t,e,i){return`#${uy[t]}${uy[e]}${uy[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,i=0){const s=t[i],r=t[i+1];t[i]=s*e[0]+r*e[2]+e[4],t[i+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],r=e[1],o=e[2],a=e[3],l=e[4],u=e[5];for(let h=0;h<6;h+=2){const d=t[i+h],f=t[i+h+1];t[i+h]=d*s+f*o+l,t[i+h+1]=d*r+f*a+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,i){const s=e[0],r=e[1],o=e[2],a=e[3],l=e[4],u=e[5],h=t[0],d=t[1],f=t[2],p=t[3];let y=s*h+l,x=y,A=s*f+l,m=A,w=a*d+u,b=w,C=a*p+u,k=C;if(r!==0||o!==0){const _=r*h,T=r*f,M=o*d,R=o*p;y+=M,m+=M,A+=R,x+=R,w+=_,k+=_,C+=T,b+=T}i[0]=Math.min(i[0],y,A,x,m),i[1]=Math.min(i[1],w,C,b,k),i[2]=Math.max(i[2],y,A,x,m),i[3]=Math.max(i[3],w,C,b,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],r=t[2],o=t[3],a=i**2+s**2,l=i*r+s*o,u=r**2+o**2,h=(a+u)/2,d=Math.sqrt(h**2-(a*u-l**2));e[0]=Math.sqrt(h+d||1),e[1]=Math.sqrt(h-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[i,r,s,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,r){r[0]=Math.min(r[0],t,i),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,i),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,i,s,r,o,a,l,u){u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,l),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,l),E(this,hr,Lv).call(this,t,i,r,a,e,s,o,l,3*(-t+3*(i-r)+a),6*(t-2*i+r),3*(i-t),u),E(this,hr,Lv).call(this,t,i,r,a,e,s,o,l,3*(-e+3*(s-o)+l),6*(e-2*s+o),3*(s-e),u)}}hr=new WeakSet,im=function(t,e,i,s,r,o,a,l,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,p=f*u,y=d*(d*(d*t+3*u*e)+3*f*i)+p*s,x=d*(d*(d*r+3*u*o)+3*f*a)+p*l;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],x),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],x)},Lv=function(t,e,i,s,r,o,a,l,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&E(this,hr,im).call(this,t,e,i,s,r,o,a,l,-d/h,f);return}const p=h**2-4*d*u;if(p<0)return;const y=Math.sqrt(p),x=2*u;E(this,hr,im).call(this,t,e,i,s,r,o,a,l,(-h+y)/x,f),E(this,hr,im).call(this,t,e,i,s,r,o,a,l,(-h-y)/x,f)},S(X,hr);function e4(n){return decodeURIComponent(escape(n))}let hy=null,TS=null;function n4(n){return hy||(hy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,TS=new Map([["ﬅ","ſt"]])),n.replaceAll(hy,(t,e,i)=>e?e.normalize("NFKC"):TS.get(i))}function A_(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),b_(n)}const Rw="pdfjs_internal_id_";function i4(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...r]=e;if(!n(i)&&!Number.isInteger(i)||!t(s))return!1;const o=r.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of r)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Je(n,t,e){return Math.min(Math.max(n,t),e)}function S_(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(b_(n))}function s4(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Jf(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const bs="http://www.w3.org/2000/svg",Yo=class Yo{};j(Yo,"CSS",96),j(Yo,"PDF",72),j(Yo,"PDF_TO_CSS_UNITS",Yo.CSS/Yo.PDF);let Do=Yo;async function tp(n,t="text"){if(nh(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class ep{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=e;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,d,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,p=1;break;case 90:h=0,d=1,f=1,p=0;break;case 270:h=0,d=-1,f=-1,p=0;break;case 0:h=1,d=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let y,x,A,m;h===0?(y=Math.abs(u-t[1])*i+r,x=Math.abs(l-t[0])*i+o,A=(t[3]-t[1])*i,m=(t[2]-t[0])*i):(y=Math.abs(l-t[0])*i+r,x=Math.abs(u-t[1])*i+o,A=(t[2]-t[0])*i,m=(t[3]-t[1])*i),this.transform=[h*i,d*i,f*i,p*i,y-h*i*l-f*i*u,x-d*i*l-p*i*u],this.width=A,this.height=m}get rawDims(){const t=this.viewBox;return rt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new ep({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const i=[t,e];return X.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];X.applyTransform(e,this.transform);const i=[t[2],t[3]];return X.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return X.applyInverseTransform(i,this.transform),i}}class Nw extends El{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function d0(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function Lw(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function r4(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function o4(n,t="document.pdf"){if(typeof n!="string")return t;if(d0(n))return Z('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const s=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},r=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(r.test(o))return s(o);if(i.searchParams.size>0){const a=Array.from(i.searchParams.values()).reverse();for(const u of a)if(r.test(u))return s(u);const l=Array.from(i.searchParams.keys()).reverse();for(const u of l)if(r.test(u))return s(u)}if(i.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(l)return s(l[0])}return t}class PS{constructor(){j(this,"started",Object.create(null));j(this,"times",[])}time(t){t in this.started&&Z(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Z(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:r}of this.times)t.push(`${i.padEnd(e)} ${r-s}ms
`);return t.join("")}}function nh(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function mi(n){n.preventDefault()}function te(n){n.preventDefault(),n.stopPropagation()}function a4(n){console.log("Deprecated API usage: "+n)}var ld;class fg{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;c(this,ld)||v(this,ld,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,ld).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,a+=d):u==="+"&&(o-=h,a-=d),new Date(Date.UTC(i,s,r,o,a,l))}}ld=new WeakMap,S(fg,ld);function l4(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new ep({viewBox:r,userUnit:1,scale:t,rotation:e})}function f0(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Z(`Not a valid color format: "${n}"`),[0,0,0])}function c4(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,f0(i))}t.remove()}function jt(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform();return[t,e,i,s,r,o]}function zi(n){const{a:t,b:e,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[t,e,i,s,r,o]}function vl(n,t,e=!1,i=!0){if(t instanceof ep){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=n,a=Le.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${r}px`,h=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class ys{constructor(){const{pixelRatio:t}=ys;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,r=-1){let o=1/0,a=1/0,l=1/0;i=ys.capPixels(i,r),i>0&&(o=Math.sqrt(i/(t*e))),s!==-1&&(a=s/t,l=s/e);const u=Math.min(o,a,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Iv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Rr,Nr,Zn,Ts,cd,cc,uc,ud,Ag,E_,Re,C_,k_,Tl,ih;const Cs=class Cs{constructor(t){S(this,Re);S(this,Rr,null);S(this,Nr,null);S(this,Zn);S(this,Ts,null);S(this,cd,null);S(this,cc,null);S(this,uc,null);v(this,Zn,t),c(Cs,ud)||v(Cs,ud,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=v(this,Rr,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,Zn)._uiManager._signal;t.addEventListener("contextmenu",mi,{signal:e}),t.addEventListener("pointerdown",E(Cs,Ag,E_),{signal:e});const i=v(this,Ts,document.createElement("div"));i.className="buttons",t.append(i);const s=c(this,Zn).toolbarPosition;if(s){const{style:r}=t,o=c(this,Zn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return c(this,Rr)}hide(){var t;c(this,Rr).classList.add("hidden"),(t=c(this,Nr))==null||t.hideDropdown()}show(){var t,e;c(this,Rr).classList.remove("hidden"),(t=c(this,cd))==null||t.shown(),(e=c(this,cc))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=c(this,Zn),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",c(Cs,ud)[t]),E(this,Re,Tl).call(this,i),i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),c(this,Ts).append(i)}async addAltText(t){const e=await t.render();E(this,Re,Tl).call(this,e),c(this,Ts).append(e,c(this,Re,ih)),v(this,cd,t)}addComment(t){if(c(this,cc))return;const e=t.render();e&&(E(this,Re,Tl).call(this,e),c(this,Ts).prepend(e,c(this,Re,ih)),v(this,cc,t),t.toolbar=this)}addColorPicker(t){if(c(this,Nr))return;v(this,Nr,t);const e=t.renderButton();E(this,Re,Tl).call(this,e),c(this,Ts).append(e,c(this,Re,ih))}async addEditSignatureButton(t){const e=v(this,uc,await t.renderEditButton(c(this,Zn)));E(this,Re,Tl).call(this,e),c(this,Ts).append(e,c(this,Re,ih))}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){c(this,uc)&&(c(this,uc).title=t)}remove(){var t;c(this,Rr).remove(),(t=c(this,Nr))==null||t.destroy(),v(this,Nr,null)}};Rr=new WeakMap,Nr=new WeakMap,Zn=new WeakMap,Ts=new WeakMap,cd=new WeakMap,cc=new WeakMap,uc=new WeakMap,ud=new WeakMap,Ag=new WeakSet,E_=function(t){t.stopPropagation()},Re=new WeakSet,C_=function(t){c(this,Zn)._focusEventsAllowed=!1,te(t)},k_=function(t){c(this,Zn)._focusEventsAllowed=!0,te(t)},Tl=function(t){const e=c(this,Zn)._uiManager._signal;t.addEventListener("focusin",E(this,Re,C_).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",E(this,Re,k_).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",mi,{signal:e})},ih=function(){const t=document.createElement("div");return t.className="divider",t},S(Cs,Ag),S(Cs,ud,null);let Dv=Cs;var hd,sa,ra,jo,__,T_,P_;class u4{constructor(t){S(this,jo);S(this,hd,null);S(this,sa,null);S(this,ra);v(this,ra,t)}show(t,e,i){const[s,r]=E(this,jo,T_).call(this,e,i),{style:o}=c(this,sa)||v(this,sa,E(this,jo,__).call(this));t.append(c(this,sa)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,sa).remove()}}hd=new WeakMap,sa=new WeakMap,ra=new WeakMap,jo=new WeakSet,__=function(){const t=v(this,sa,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",mi,{signal:c(this,ra)._signal});const e=v(this,hd,document.createElement("div"));return e.className="buttons",t.append(e),E(this,jo,P_).call(this),t},T_=function(t,e){let i=0,s=0;for(const r of t){const o=r.y+r.height;if(o<i)continue;const a=r.x+(e?r.width:0);if(o>i){s=a,i=o;continue}e?a>s&&(s=a):a<s&&(s=a)}return[e?1-s:s,i]},P_=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=c(this,ra)._signal;t.addEventListener("contextmenu",mi,{signal:i}),t.addEventListener("click",()=>{c(this,ra).highlightSelection("floating_button")},{signal:i}),c(this,hd).append(t)};function M_(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var Sg;class h4{constructor(){S(this,Sg,0)}get id(){return`${v_}${Ge(this,Sg)._++}`}}Sg=new WeakMap;var hc,dd,ze,dc,sm;const Vw=class Vw{constructor(){S(this,dc);S(this,hc,A_());S(this,dd,0);S(this,ze,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return rt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:r}=t;return E(this,dc,sm).call(this,`${e}_${i}_${s}_${r}`,t)}async getFromUrl(t){return E(this,dc,sm).call(this,t,t)}async getFromBlob(t,e){const i=await e;return E(this,dc,sm).call(this,t,i)}async getFromId(t){c(this,ze)||v(this,ze,new Map);const e=c(this,ze).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,ze)||v(this,ze,new Map);let i=c(this,ze).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${c(this,hc)}_${Ge(this,dd)._++}`,refCounter:1,isSvg:!1},c(this,ze).set(t,i),c(this,ze).set(i.id,i),i}getSvgUrl(t){const e=c(this,ze).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;c(this,ze)||v(this,ze,new Map);const e=c(this,ze).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,hc)}_`)}};hc=new WeakMap,dd=new WeakMap,ze=new WeakMap,dc=new WeakSet,sm=async function(t,e){c(this,ze)||v(this,ze,new Map);let i=c(this,ze).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${c(this,hc)}_${Ge(this,dd)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await tp(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=Vw._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,h)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=h});o.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){Z(s),i=null}return c(this,ze).set(t,i),i&&c(this,ze).set(i.id,i),i};let jv=Vw;var Wt,Lr,fd,Dt;class d4{constructor(t=128){S(this,Wt,[]);S(this,Lr,!1);S(this,fd);S(this,Dt,-1);v(this,fd,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&t(),c(this,Lr))return;const l={cmd:t,undo:e,post:i,type:r};if(c(this,Dt)===-1){c(this,Wt).length>0&&(c(this,Wt).length=0),v(this,Dt,0),c(this,Wt).push(l);return}if(o&&c(this,Wt)[c(this,Dt)].type===r){a&&(l.undo=c(this,Wt)[c(this,Dt)].undo),c(this,Wt)[c(this,Dt)]=l;return}const u=c(this,Dt)+1;u===c(this,fd)?c(this,Wt).splice(0,1):(v(this,Dt,u),u<c(this,Wt).length&&c(this,Wt).splice(u)),c(this,Wt).push(l)}undo(){if(c(this,Dt)===-1)return;v(this,Lr,!0);const{undo:t,post:e}=c(this,Wt)[c(this,Dt)];t(),e==null||e(),v(this,Lr,!1),v(this,Dt,c(this,Dt)-1)}redo(){if(c(this,Dt)<c(this,Wt).length-1){v(this,Dt,c(this,Dt)+1),v(this,Lr,!0);const{cmd:t,post:e}=c(this,Wt)[c(this,Dt)];t(),e==null||e(),v(this,Lr,!1)}}hasSomethingToUndo(){return c(this,Dt)!==-1}hasSomethingToRedo(){return c(this,Dt)<c(this,Wt).length-1}cleanType(t){if(c(this,Dt)!==-1){for(let e=c(this,Dt);e>=0;e--)if(c(this,Wt)[e].type!==t){c(this,Wt).splice(e+1,c(this,Dt)-e),v(this,Dt,e);return}c(this,Wt).length=0,v(this,Dt,-1)}}destroy(){v(this,Wt,null)}}Wt=new WeakMap,Lr=new WeakMap,fd=new WeakMap,Dt=new WeakMap;var Eg,R_;class np{constructor(t){S(this,Eg);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Le.platform;for(const[i,s,r={}]of t)for(const o of i){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(E(this,Eg,R_).call(this,e));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(t,e)||(s.bind(t,...o,e)(),r||te(e))}}Eg=new WeakSet,R_=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Cg=class Cg{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return c4(t),rt(this,"_colors",t)}convert(t){const e=f0(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((r,o)=>r===e[o]))return Cg._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?X.makeHexColor(...e):t}};j(Cg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Fv=Cg;var fc,An,ae,be,pc,Ps,mc,Jn,oa,Ir,Dr,gc,aa,Ui,wi,la,pd,md,yc,gd,Wi,jr,vc,Fr,Gi,kg,Or,yd,Br,ca,xc,zr,vd,de,yt,Ms,Vr,$r,xd,wd,Hr,Xi,Rs,bd,Ad,ti,B,rm,Ov,N_,L_,om,I_,D_,j_,Bv,F_,zv,Vv,O_,Xe,As,B_,z_,$v,V_,sh,Hv;const Jl=class Jl{constructor(t,e,i,s,r,o,a,l,u,h,d,f,p,y,x,A){S(this,B);S(this,fc,new AbortController);S(this,An,null);S(this,ae,new Map);S(this,be,new Map);S(this,pc,null);S(this,Ps,null);S(this,mc,null);S(this,Jn,new d4);S(this,oa,null);S(this,Ir,null);S(this,Dr,null);S(this,gc,0);S(this,aa,new Set);S(this,Ui,null);S(this,wi,null);S(this,la,new Set);j(this,"_editorUndoBar",null);S(this,pd,!1);S(this,md,!1);S(this,yc,!1);S(this,gd,null);S(this,Wi,null);S(this,jr,null);S(this,vc,null);S(this,Fr,!1);S(this,Gi,null);S(this,kg,new h4);S(this,Or,!1);S(this,yd,!1);S(this,Br,null);S(this,ca,null);S(this,xc,null);S(this,zr,null);S(this,vd,null);S(this,de,Q.NONE);S(this,yt,new Set);S(this,Ms,null);S(this,Vr,null);S(this,$r,null);S(this,xd,null);S(this,wd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,Hr,[0,0]);S(this,Xi,null);S(this,Rs,null);S(this,bd,null);S(this,Ad,null);S(this,ti,null);const m=this._signal=c(this,fc).signal;v(this,Rs,t),v(this,bd,e),v(this,Ad,i),v(this,pc,s),v(this,oa,r),v(this,Vr,o),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:m}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),a._on("setpreference",this.onSetPreference.bind(this),{signal:m}),a._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:m}),E(this,B,I_).call(this),E(this,B,O_).call(this),E(this,B,Bv).call(this),v(this,Ps,l.annotationStorage),v(this,gd,l.filterFactory),v(this,$r,u),v(this,vc,h||null),v(this,pd,d),v(this,md,f),v(this,yc,p),v(this,vd,y||null),this.viewParameters={realScale:Do.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const t=Jl.prototype,e=o=>c(o,Rs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return rt(this,"_keyboardManager",new np([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,Rs).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,Rs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,i,s,r,o,a,l,u;(t=c(this,ti))==null||t.resolve(),v(this,ti,null),(e=c(this,fc))==null||e.abort(),v(this,fc,null),this._signal=null;for(const h of c(this,be).values())h.destroy();c(this,be).clear(),c(this,ae).clear(),c(this,la).clear(),(i=c(this,zr))==null||i.clear(),v(this,An,null),c(this,yt).clear(),c(this,Jn).destroy(),(s=c(this,pc))==null||s.destroy(),(r=c(this,oa))==null||r.destroy(),(o=c(this,Vr))==null||o.destroy(),(a=c(this,Gi))==null||a.hide(),v(this,Gi,null),(l=c(this,xc))==null||l.destroy(),v(this,xc,null),c(this,Wi)&&(clearTimeout(c(this,Wi)),v(this,Wi,null)),c(this,Xi)&&(clearTimeout(c(this,Xi)),v(this,Xi,null)),(u=this._editorUndoBar)==null||u.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,vd)}get useNewAltTextFlow(){return c(this,md)}get useNewAltTextWhenAddingImage(){return c(this,yc)}get hcmFilter(){return rt(this,"hcmFilter",c(this,$r)?c(this,gd).addHCMFilter(c(this,$r).foreground,c(this,$r).background):"none")}get direction(){return rt(this,"direction",getComputedStyle(c(this,Rs)).direction)}get _highlightColors(){return rt(this,"_highlightColors",c(this,vc)?new Map(c(this,vc).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return rt(this,"highlightColors",null);const e=new Map,i=!!c(this,$r);for(const[s,r]of t){const o=s.endsWith("_HCM");if(i&&o){e.set(s.replace("_HCM",""),r);continue}!i&&!o&&e.set(s,r)}return rt(this,"highlightColors",e)}get highlightColorNames(){return rt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),v(this,Dr,t)}setMainHighlightColorPicker(t){v(this,xc,t)}editAltText(t,e=!1){var i;(i=c(this,pc))==null||i.editAltText(this,t,e)}hasCommentManager(){return!!c(this,oa)}editComment(t,e){var i;(i=c(this,oa))==null||i.open(this,t,e)}getSignature(t){var e;(e=c(this,Vr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return c(this,Vr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":v(this,yc,e);break}}onPageChanging({pageNumber:t}){v(this,gc,t-1)}focusMainContainer(){c(this,Rs).focus()}findParent(t,e){for(const i of c(this,be).values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+a)return i}return null}disableUserSelect(t=!1){c(this,bd).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,la).add(t)}removeShouldRescale(t){c(this,la).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Do.PDF_TO_CSS_UNITS;for(const i of c(this,la))i.onScaleChanging();(e=c(this,Dr))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=e,a=e.toString(),u=E(this,B,rm).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const d=E(this,B,Ov).call(this,u),f=c(this,de)===Q.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(Q.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Ps)&&!c(this,Ps).has(t.id)&&c(this,Ps).setValue(t.id,t)}a11yAlert(t,e=null){const i=c(this,Ad);i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Fr)&&(v(this,Fr,!1),E(this,B,om).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,yt))if(e.div.contains(t)){v(this,ca,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,ca))return;const[t,e]=c(this,ca);v(this,ca,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){E(this,B,Bv).call(this),E(this,B,zv).call(this)}removeEditListeners(){E(this,B,F_).call(this),E(this,B,Vv).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of c(this,wi))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of c(this,wi))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=c(this,An))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of c(this,yt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of c(this,wi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){Z(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of i){const u=await s.deserialize(l);if(!u)return;r.push(u)}const o=()=>{for(const l of r)E(this,B,$v).call(this,l);E(this,B,Hv).call(this,r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){Z(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,de)!==Q.NONE&&!this.isEditorHandlingKeyboard&&Jl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Fr)&&(v(this,Fr,!1),E(this,B,om).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(E(this,B,D_).call(this),E(this,B,zv).call(this),E(this,B,Xe).call(this,{isEditing:c(this,de)!==Q.NONE,isEmpty:E(this,B,sh).call(this),hasSomethingToUndo:c(this,Jn).hasSomethingToUndo(),hasSomethingToRedo:c(this,Jn).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,B,j_).call(this),E(this,B,Vv).call(this),E(this,B,Xe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,wi)){v(this,wi,t);for(const e of c(this,wi))E(this,B,As).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,kg).id}get currentLayer(){return c(this,be).get(c(this,gc))}getLayer(t){return c(this,be).get(t)}get currentPageIndex(){return c(this,gc)}addLayer(t){c(this,be).set(t.pageIndex,t),c(this,Or)?t.enable():t.disable()}removeLayer(t){c(this,be).delete(t.pageIndex)}async updateMode(t,e=null,i=!1,s=!1,r=!1){var o,a,l;if(c(this,de)!==t&&!(c(this,ti)&&(await c(this,ti).promise,!c(this,ti)))){if(v(this,ti,Promise.withResolvers()),(o=c(this,Dr))==null||o.commitOrRemove(),v(this,de,t),t===Q.NONE){this.setEditingState(!1),E(this,B,z_).call(this),(a=this._editorUndoBar)==null||a.hide(),c(this,ti).resolve();return}t===Q.SIGNATURE&&await((l=c(this,Vr))==null?void 0:l.loadSignatures()),this.setEditingState(!0),await E(this,B,B_).call(this),this.unselectAll();for(const u of c(this,be).values())u.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),c(this,ti).resolve();return}for(const u of c(this,ae).values())u.annotationElementId===e||u.id===e?(this.setSelected(u),r?u.editComment():s&&u.enterInEditMode()):u.unselect();c(this,ti).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==c(this,de)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(c(this,wi)){switch(t){case ct.CREATE:this.currentLayer.addNewEditor(e);return;case ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,xd)||v(this,xd,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of c(this,yt))i.updateParams(t,e);else for(const i of c(this,wi))i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var r;for(const o of c(this,ae).values())o.editorType===t&&o.show(e);(((r=c(this,xd))==null?void 0:r.get(ct.HIGHLIGHT_SHOW_ALL))??!0)!==e&&E(this,B,As).call(this,[[ct.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,yd)!==t){v(this,yd,t);for(const e of c(this,be).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of c(this,ae).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return c(this,ae).get(t)}addEditor(t){c(this,ae).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(c(this,Wi)&&clearTimeout(c(this,Wi)),v(this,Wi,setTimeout(()=>{this.focusMainContainer(),v(this,Wi,null)},0))),c(this,ae).delete(t.id),t.annotationElementId&&((e=c(this,zr))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!c(this,aa).has(t.annotationElementId))&&((i=c(this,Ps))==null||i.remove(t.id))}addDeletedAnnotationElement(t){c(this,aa).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,aa).has(t)}removeDeletedAnnotationElement(t){c(this,aa).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,An)!==t&&(v(this,An,t),t&&E(this,B,As).call(this,t.propertiesToUpdate))}updateUI(t){c(this,B,V_)===t&&E(this,B,As).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){E(this,B,As).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(c(this,yt).has(t)){c(this,yt).delete(t),t.unselect(),E(this,B,Xe).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,yt).add(t),t.select(),E(this,B,As).call(this,t.propertiesToUpdate),E(this,B,Xe).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=c(this,Dr))==null||e.commitOrRemove();for(const i of c(this,yt))i!==t&&i.unselect();c(this,yt).clear(),c(this,yt).add(t),t.select(),E(this,B,As).call(this,t.propertiesToUpdate),E(this,B,Xe).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,yt).has(t)}get firstSelectedEditor(){return c(this,yt).values().next().value}unselect(t){t.unselect(),c(this,yt).delete(t),E(this,B,Xe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,yt).size!==0}get isEnterHandled(){return c(this,yt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;c(this,Jn).undo(),E(this,B,Xe).call(this,{hasSomethingToUndo:c(this,Jn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,B,sh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){c(this,Jn).redo(),E(this,B,Xe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Jn).hasSomethingToRedo(),isEmpty:E(this,B,sh).call(this)})}addCommands(t){c(this,Jn).add(t),E(this,B,Xe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,B,sh).call(this)})}cleanUndoStack(t){c(this,Jn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...c(this,yt)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},s=()=>{for(const o of e)E(this,B,$v).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=c(this,An))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,An)||this.hasSelection}selectAll(){for(const t of c(this,yt))t.commit();E(this,B,Hv).call(this,c(this,ae).values())}unselectAll(){var t;if(!(c(this,An)&&(c(this,An).commitOrRemove(),c(this,de)!==Q.NONE))&&!((t=c(this,Dr))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of c(this,yt))e.unselect();c(this,yt).clear(),E(this,B,Xe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;c(this,Hr)[0]+=t,c(this,Hr)[1]+=e;const[s,r]=c(this,Hr),o=[...c(this,yt)],a=1e3;c(this,Xi)&&clearTimeout(c(this,Xi)),v(this,Xi,setTimeout(()=>{v(this,Xi,null),c(this,Hr)[0]=c(this,Hr)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,ae).has(l.id)&&(l.translateInPage(s,r),l.translationDone())},undo:()=>{for(const l of o)c(this,ae).has(l.id)&&(l.translateInPage(-s,-r),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,Ui,new Map);for(const t of c(this,yt))c(this,Ui).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Ui))return!1;this.disableUserSelect(!1);const t=c(this,Ui);v(this,Ui,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},a]of t)a.newX=s,a.newY=r,a.newPageIndex=o,e||(e=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const i=(s,r,o,a)=>{if(c(this,ae).has(s.id)){const l=c(this,be).get(a);l?s._setParentAndPosition(l,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of t)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of t)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,Ui))for(const i of c(this,Ui).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,yt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,An)===t}getActive(){return c(this,An)}getMode(){return c(this,de)}get imageManager(){return rt(this,"imageManager",new jv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":a=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":a=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:a=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const l=[];for(let u=0,h=e.rangeCount;u<h;u++){const d=e.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:p,width:y,height:x}of d.getClientRects())y===0||x===0||l.push(a(f,p,y,x))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,mc)||v(this,mc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,mc))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=c(this,mc))==null?void 0:s.get(t.data.id);if(!e)return;const i=c(this,Ps).getRawValue(e);i&&(c(this,de)===Q.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var r;const s=(r=c(this,zr))==null?void 0:r.get(t);s&&(s.setCanvas(e,i),c(this,zr).delete(t))}addMissingCanvas(t,e){(c(this,zr)||v(this,zr,new Map)).set(t,e)}};fc=new WeakMap,An=new WeakMap,ae=new WeakMap,be=new WeakMap,pc=new WeakMap,Ps=new WeakMap,mc=new WeakMap,Jn=new WeakMap,oa=new WeakMap,Ir=new WeakMap,Dr=new WeakMap,gc=new WeakMap,aa=new WeakMap,Ui=new WeakMap,wi=new WeakMap,la=new WeakMap,pd=new WeakMap,md=new WeakMap,yc=new WeakMap,gd=new WeakMap,Wi=new WeakMap,jr=new WeakMap,vc=new WeakMap,Fr=new WeakMap,Gi=new WeakMap,kg=new WeakMap,Or=new WeakMap,yd=new WeakMap,Br=new WeakMap,ca=new WeakMap,xc=new WeakMap,zr=new WeakMap,vd=new WeakMap,de=new WeakMap,yt=new WeakMap,Ms=new WeakMap,Vr=new WeakMap,$r=new WeakMap,xd=new WeakMap,wd=new WeakMap,Hr=new WeakMap,Xi=new WeakMap,Rs=new WeakMap,bd=new WeakMap,Ad=new WeakMap,ti=new WeakMap,B=new WeakSet,rm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Ov=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of c(this,be).values())if(i.hasTextLayer(t))return i;return null},N_=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=E(this,B,rm).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(c(this,Gi)||v(this,Gi,new u4(this)),c(this,Gi).show(i,s,this.direction==="ltr"))},L_=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){c(this,Ms)&&((r=c(this,Gi))==null||r.hide(),v(this,Ms,null),E(this,B,Xe).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,Ms))return;const s=E(this,B,rm).call(this,t).closest(".textLayer");if(!s){c(this,Ms)&&((o=c(this,Gi))==null||o.hide(),v(this,Ms,null),E(this,B,Xe).call(this,{hasSelectedText:!1}));return}if((a=c(this,Gi))==null||a.hide(),v(this,Ms,e),E(this,B,Xe).call(this,{hasSelectedText:!0}),!(c(this,de)!==Q.HIGHLIGHT&&c(this,de)!==Q.NONE)&&(c(this,de)===Q.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,Fr,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,de)===Q.HIGHLIGHT?E(this,B,Ov).call(this,s):null;l==null||l.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&E(this,B,om).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}},om=function(t=""){c(this,de)===Q.HIGHLIGHT?this.highlightSelection(t):c(this,pd)&&E(this,B,N_).call(this)},I_=function(){document.addEventListener("selectionchange",E(this,B,L_).bind(this),{signal:this._signal})},D_=function(){if(c(this,jr))return;v(this,jr,new AbortController);const t=this.combinedSignal(c(this,jr));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},j_=function(){var t;(t=c(this,jr))==null||t.abort(),v(this,jr,null)},Bv=function(){if(c(this,Br))return;v(this,Br,new AbortController);const t=this.combinedSignal(c(this,Br));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},F_=function(){var t;(t=c(this,Br))==null||t.abort(),v(this,Br,null)},zv=function(){if(c(this,Ir))return;v(this,Ir,new AbortController);const t=this.combinedSignal(c(this,Ir));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Vv=function(){var t;(t=c(this,Ir))==null||t.abort(),v(this,Ir,null)},O_=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Xe=function(t){Object.entries(t).some(([i,s])=>c(this,wd)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,wd),t)}),c(this,de)===Q.HIGHLIGHT&&t.hasSelectedEditor===!1&&E(this,B,As).call(this,[[ct.HIGHLIGHT_FREE,!0]]))},As=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},B_=async function(){if(!c(this,Or)){v(this,Or,!0);const t=[];for(const e of c(this,be).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,ae).values())e.enable()}},z_=function(){if(this.unselectAll(),c(this,Or)){v(this,Or,!1);for(const t of c(this,be).values())t.disable();for(const t of c(this,ae).values())t.disable()}},$v=function(t){const e=c(this,be).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},V_=function(){let t=null;for(t of c(this,yt));return t},sh=function(){if(c(this,ae).size===0)return!0;if(c(this,ae).size===1)for(const t of c(this,ae).values())return t.isEmpty();return!1},Hv=function(t){for(const e of c(this,yt))e.unselect();c(this,yt).clear();for(const e of t)e.isEmpty()||(c(this,yt).add(e),e.select());E(this,B,Xe).call(this,{hasSelectedEditor:this.hasSelection})},j(Jl,"TRANSLATE_SMALL",1),j(Jl,"TRANSLATE_BIG",10);let xl=Jl;var fe,Ki,bi,wc,qi,Sn,bc,Yi,hn,Ns,ua,Qi,Ur,Ii,rh,am;const Ke=class Ke{constructor(t){S(this,Ii);S(this,fe,null);S(this,Ki,!1);S(this,bi,null);S(this,wc,null);S(this,qi,null);S(this,Sn,null);S(this,bc,!1);S(this,Yi,null);S(this,hn,null);S(this,Ns,null);S(this,ua,null);S(this,Qi,!1);v(this,hn,t),v(this,Qi,t._uiManager.useNewAltTextFlow),c(Ke,Ur)||v(Ke,Ur,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ke._l10n??(Ke._l10n=t)}async render(){const t=v(this,bi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=v(this,wc,document.createElement("span"));t.append(e),c(this,Qi)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(Ke,Ur).missing),e.setAttribute("data-l10n-id",c(Ke,Ur)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=c(this,hn)._uiManager._signal;t.addEventListener("contextmenu",mi,{signal:i}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),c(this,hn)._uiManager.editAltText(c(this,hn)),c(this,Qi)&&c(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Ii,rh)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(v(this,bc,!0),s(r))},{signal:i}),await E(this,Ii,am).call(this),t}finish(){c(this,bi)&&(c(this,bi).focus({focusVisible:c(this,bc)}),v(this,bc,!1))}isEmpty(){return c(this,Qi)?c(this,fe)===null:!c(this,fe)&&!c(this,Ki)}hasData(){return c(this,Qi)?c(this,fe)!==null||!!c(this,Ns):this.isEmpty()}get guessedText(){return c(this,Ns)}async setGuessedText(t){c(this,fe)===null&&(v(this,Ns,t),v(this,ua,await Ke._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),E(this,Ii,am).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,Qi)||c(this,fe)){(e=c(this,Yi))==null||e.remove(),v(this,Yi,null);return}if(!c(this,Yi)){const i=v(this,Yi,document.createElement("div"));i.className="noAltTextBadge",c(this,hn).div.append(i)}c(this,Yi).classList.toggle("hidden",!t)}serialize(t){let e=c(this,fe);return!t&&c(this,Ns)===e&&(e=c(this,ua)),{altText:e,decorative:c(this,Ki),guessedText:c(this,Ns),textWithDisclaimer:c(this,ua)}}get data(){return{altText:c(this,fe),decorative:c(this,Ki)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(v(this,Ns,i),v(this,ua,s)),!(c(this,fe)===t&&c(this,Ki)===e)&&(r||(v(this,fe,t),v(this,Ki,e)),E(this,Ii,am).call(this))}toggle(t=!1){c(this,bi)&&(!t&&c(this,Sn)&&(clearTimeout(c(this,Sn)),v(this,Sn,null)),c(this,bi).disabled=!t)}shown(){c(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Ii,rh)}})}destroy(){var t,e;(t=c(this,bi))==null||t.remove(),v(this,bi,null),v(this,wc,null),v(this,qi,null),(e=c(this,Yi))==null||e.remove(),v(this,Yi,null)}};fe=new WeakMap,Ki=new WeakMap,bi=new WeakMap,wc=new WeakMap,qi=new WeakMap,Sn=new WeakMap,bc=new WeakMap,Yi=new WeakMap,hn=new WeakMap,Ns=new WeakMap,ua=new WeakMap,Qi=new WeakMap,Ur=new WeakMap,Ii=new WeakSet,rh=function(){return c(this,fe)&&"added"||c(this,fe)===null&&this.guessedText&&"review"||"missing"},am=async function(){var s,r,o;const t=c(this,bi);if(!t)return;if(c(this,Qi)){if(t.classList.toggle("done",!!c(this,fe)),t.setAttribute("data-l10n-id",c(Ke,Ur)[c(this,Ii,rh)]),(s=c(this,wc))==null||s.setAttribute("data-l10n-id",c(Ke,Ur)[`${c(this,Ii,rh)}-label`]),!c(this,fe)){(r=c(this,qi))==null||r.remove();return}}else{if(!c(this,fe)&&!c(this,Ki)){t.classList.remove("done"),(o=c(this,qi))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,qi);if(!e){v(this,qi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,hn).id}`;const a=100,l=c(this,hn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Sn)),v(this,Sn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{v(this,Sn,setTimeout(()=>{v(this,Sn,null),c(this,qi).classList.add("show"),c(this,hn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var u;c(this,Sn)&&(clearTimeout(c(this,Sn)),v(this,Sn,null)),(u=c(this,qi))==null||u.classList.remove("show")},{signal:l})}c(this,Ki)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,fe)),e.parentNode||t.append(e);const i=c(this,hn).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},S(Ke,Ur,null),j(Ke,"_l10n",null);let pg=Ke;var Zi,ha,Ai,Sd,Ls,Ac,Wr;class Rp{constructor(t){S(this,Zi,null);S(this,ha,!1);S(this,Ai,null);S(this,Sd,null);S(this,Ls,null);S(this,Ac,null);S(this,Wr,!1);v(this,Ai,t),this.toolbar=null}render(){if(!c(this,Ai)._uiManager.hasCommentManager())return null;const t=v(this,Zi,document.createElement("button"));t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=c(this,Ai)._uiManager._signal;t.addEventListener("contextmenu",mi,{signal:e}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:e});const i=s=>{s.preventDefault(),this.edit()};return t.addEventListener("click",i,{capture:!0,signal:e}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(v(this,ha,!0),i(s))},{signal:e}),t}edit(){const{bottom:t,left:e,right:i}=c(this,Ai).getClientDimensions(),s={top:t};c(this,Ai)._uiManager.direction==="ltr"?s.right=i:s.left=e,c(this,Ai)._uiManager.editComment(c(this,Ai),s)}finish(){c(this,Zi)&&(c(this,Zi).focus({focusVisible:c(this,ha)}),v(this,ha,!1))}isDeleted(){return c(this,Wr)||c(this,Ls)===""}hasBeenEdited(){return this.isDeleted()||c(this,Ls)!==c(this,Sd)}serialize(){return this.data}get data(){return{text:c(this,Ls),date:c(this,Ac),deleted:c(this,Wr)}}set data(t){if(t===null){v(this,Ls,""),v(this,Wr,!0);return}v(this,Ls,t),v(this,Ac,new Date),v(this,Wr,!1)}setInitialText(t){v(this,Sd,t),this.data=t}toggle(t=!1){c(this,Zi)&&(c(this,Zi).disabled=!t)}shown(){}destroy(){var t;(t=c(this,Zi))==null||t.remove(),v(this,Zi,null),v(this,Ls,""),v(this,Ac,null),v(this,Ai,null),v(this,ha,!1),v(this,Wr,!1)}}Zi=new WeakMap,ha=new WeakMap,Ai=new WeakMap,Sd=new WeakMap,Ls=new WeakMap,Ac=new WeakMap,Wr=new WeakMap;var Sc,da,Ed,Cd,kd,_d,Td,Is,fa,Ds,pa,js,Fo,$_,H_,U_;const $w=class $w{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){S(this,Fo);S(this,Sc);S(this,da,!1);S(this,Ed,null);S(this,Cd);S(this,kd);S(this,_d);S(this,Td);S(this,Is,null);S(this,fa);S(this,Ds,null);S(this,pa);S(this,js,null);v(this,Sc,t),v(this,Ed,i),v(this,Cd,e),v(this,kd,s),v(this,_d,r),v(this,Td,o),v(this,pa,new AbortController),v(this,fa,AbortSignal.any([a,c(this,pa).signal])),t.addEventListener("touchstart",E(this,Fo,$_).bind(this),{passive:!1,signal:c(this,fa)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ys.pixelRatio}destroy(){var t,e;(t=c(this,pa))==null||t.abort(),v(this,pa,null),(e=c(this,Is))==null||e.abort(),v(this,Is,null)}};Sc=new WeakMap,da=new WeakMap,Ed=new WeakMap,Cd=new WeakMap,kd=new WeakMap,_d=new WeakMap,Td=new WeakMap,Is=new WeakMap,fa=new WeakMap,Ds=new WeakMap,pa=new WeakMap,js=new WeakMap,Fo=new WeakSet,$_=function(t){var s,r,o;if((s=c(this,Cd))!=null&&s.call(this))return;if(t.touches.length===1){if(c(this,Is))return;const a=v(this,Is,new AbortController),l=AbortSignal.any([c(this,fa),a.signal]),u=c(this,Sc),h={capture:!0,signal:l,passive:!1},d=f=>{var p;f.pointerType==="touch"&&((p=c(this,Is))==null||p.abort(),v(this,Is,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(te(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!c(this,js)){v(this,js,new AbortController);const a=AbortSignal.any([c(this,fa),c(this,js).signal]),l=c(this,Sc),u={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",E(this,Fo,H_).bind(this),u);const h=E(this,Fo,U_).bind(this);l.addEventListener("touchend",h,u),l.addEventListener("touchcancel",h,u),u.capture=!0,l.addEventListener("pointerdown",te,u),l.addEventListener("pointermove",te,u),l.addEventListener("pointercancel",te,u),l.addEventListener("pointerup",te,u),(r=c(this,kd))==null||r.call(this)}if(te(t),t.touches.length!==2||(o=c(this,Ed))!=null&&o.call(this)){v(this,Ds,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),v(this,Ds,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},H_=function(t){var C;if(!c(this,Ds)||t.touches.length!==2)return;te(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:a}=i,l=c(this,Ds),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=l,p=d-u,y=f-h,x=o-s,A=a-r,m=Math.hypot(x,A)||1,w=Math.hypot(p,y)||1;if(!c(this,da)&&Math.abs(w-m)<=$w.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,!c(this,da)){v(this,da,!0);return}const b=[(s+o)/2,(r+a)/2];(C=c(this,_d))==null||C.call(this,b,w,m)},U_=function(t){var e;t.touches.length>=2||(c(this,js)&&(c(this,js).abort(),v(this,js,null),(e=c(this,Td))==null||e.call(this)),c(this,Ds)&&(te(t),v(this,Ds,null),v(this,da,!1)))};let mg=$w;var ma,Si,Mt,Ae,Ec,Gr,Pd,ga,Se,ya,Fs,Xr,Md,va,En,Rd,xa,Os,Ji,Cc,kc,ei,wa,Nd,_g,q,Uv,Ld,Wv,lm,W_,G_,Gv,cm,Xv,X_,K_,q_,Kv,Y_,qv,Q_,Z_,J_,Yv,oh;const nt=class nt{constructor(t){S(this,q);S(this,ma,null);S(this,Si,null);S(this,Mt,null);S(this,Ae,null);S(this,Ec,!1);S(this,Gr,null);S(this,Pd,"");S(this,ga,!1);S(this,Se,null);S(this,ya,null);S(this,Fs,null);S(this,Xr,null);S(this,Md,"");S(this,va,!1);S(this,En,null);S(this,Rd,!1);S(this,xa,!1);S(this,Os,!1);S(this,Ji,null);S(this,Cc,0);S(this,kc,0);S(this,ei,null);S(this,wa,null);j(this,"isSelected",!1);j(this,"_isCopy",!1);j(this,"_editToolbar",null);j(this,"_initialOptions",Object.create(null));j(this,"_initialData",null);j(this,"_isVisible",!0);j(this,"_uiManager",null);j(this,"_focusEventsAllowed",!0);S(this,Nd,!1);S(this,_g,nt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=nt.prototype._resizeWithKeyboard,e=xl.TRANSLATE_SMALL,i=xl.TRANSLATE_BIG;return rt(this,"_resizerKeyboardManager",new np([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],nt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return rt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new f4({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(nt._l10n??(nt._l10n=t),nt._l10nResizer||(nt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),nt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);nt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){bt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Nd)}set _isDraggable(t){var e;v(this,Nd,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,_g)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):E(this,q,oh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,va)?v(this,va,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}translate(t,e){E(this,q,Uv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,En)||v(this,En,[this.x,this.y,this.width,this.height]),E(this,q,Uv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){c(this,En)||v(this,En,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,u]=this.getBaseTranslation();o+=l,a+=u;const{style:h}=i;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!c(this,En)&&(c(this,En)[0]!==this.x||c(this,En)[1]!==this.y)}get _hasBeenResized(){return!!c(this,En)&&(c(this,En)[2]!==this.width||c(this,En)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=nt,s=i/t,r=i/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=i,l*=s,r*=i,o*=s,this._mustFixPosition)switch(t){case 0:r=Je(r,0,i-a),o=Je(o,0,s-l);break;case 90:r=Je(r,0,i-l),o=Je(o,a,s);break;case 180:r=Je(r,a,i),o=Je(o,l,s);break;case 270:r=Je(r,l,i),o=Je(o,0,s-a);break}this.x=r/=i,this.y=o/=s;const[u,h]=this.getBaseTranslation();r+=u,o+=h,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return E(i=nt,Ld,Wv).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return E(i=nt,Ld,Wv).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/i).toFixed(2)}%`,c(this,ga)||(r.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),r=!c(this,ga)&&e.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!c(this,ga)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=c(this,Mt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,xa))return this._editToolbar;this._editToolbar=new Dv(this),this.div.append(this._editToolbar.render()),this._editToolbar.addButton("comment",this.addCommentButton());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,Mt))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Mt)||(pg.initialize(nt._l10n),v(this,Mt,new pg(this)),c(this,ma)&&(c(this,Mt).data=c(this,ma),v(this,ma,null))),c(this,Mt)}get altTextData(){var t;return(t=c(this,Mt))==null?void 0:t.data}set altTextData(t){c(this,Mt)&&(c(this,Mt).data=t)}get guessedAltText(){var t;return(t=c(this,Mt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Mt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Mt))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Mt)&&!c(this,Mt).isEmpty()}hasAltTextData(){var t;return((t=c(this,Mt))==null?void 0:t.hasData())??!1}addCommentButton(){return c(this,Ae)?c(this,Ae):v(this,Ae,new Rp(this))}get commentColor(){return null}get comment(){const t=c(this,Ae);return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){c(this,Ae)||v(this,Ae,new Rp(this)),c(this,Ae).data=t}setCommentData(t){c(this,Ae)||v(this,Ae,new Rp(this)),c(this,Ae).setInitialText(t)}get hasEditedComment(){var t;return(t=c(this,Ae))==null?void 0:t.hasBeenEdited()}async editComment(){c(this,Ae)||v(this,Ae,new Rp(this)),c(this,Ae).edit()}addComment(t){this.hasEditedComment&&(t.popup={contents:this.comment.text,deleted:this.comment.deleted})}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=c(this,Ec)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),E(this,q,qv).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),M_(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,wa)||v(this,wa,new mg({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,q,X_).bind(this),onPinching:E(this,q,K_).bind(this),onPinchEnd:E(this,q,q_).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Le.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(v(this,va,!0),this._isDraggable){E(this,q,Y_).call(this,t);return}E(this,q,Kv).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Ji)&&clearTimeout(c(this,Ji)),v(this,Ji,setTimeout(()=>{var t;v(this,Ji,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=t/s,h=e/s,d=this.x*r,f=this.y*o,p=this.width*r,y=this.height*o;switch(i){case 0:return[d+u+a,o-f-h-y+l,d+u+p+a,o-f-h+l];case 90:return[d+h+a,o-f+u+l,d+h+y+a,o-f+u+p+l];case 180:return[d-u-p+a,o-f+h+l,d-u+a,o-f+h+y+l];case 270:return[d-h-y+a,o-f-u-p+l,d-h+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,r,o]=t,a=r-i,l=o-s;switch(this.rotation){case 0:return[i,e-o,a,l];case 90:return[i,e-s,l,a];case 180:return[r,e-s,a,l];case 270:return[r,e-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),v(this,xa,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),v(this,xa,!1),!0):!1}isInEditMode(){return c(this,xa)}shouldGetKeyboardEvents(){return c(this,Os)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&i>0}rebuild(){E(this,q,qv).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){bt("An editor must be serializable")}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});s.rotation=t.rotation,v(s,ma,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[a,l,u,h]=s.getRectInCurrentCoords(t.rect,o);return s.x=a/r,s.y=l/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=c(this,Xr))==null||t.abort(),v(this,Xr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Ji)&&(clearTimeout(c(this,Ji)),v(this,Ji,null)),E(this,q,oh).call(this),this.removeEditToolbar(),c(this,ei)){for(const i of c(this,ei).values())clearTimeout(i);v(this,ei,null)}this.parent=null,(e=c(this,wa))==null||e.destroy(),v(this,wa,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,q,W_).call(this),c(this,Se).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),v(this,Fs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,Se).children;if(!c(this,Si)){v(this,Si,Array.from(e));const o=E(this,q,Q_).bind(this),a=E(this,q,Z_).bind(this),l=this._uiManager._signal;for(const u of c(this,Si)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",E(this,q,J_).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",nt._l10nResizer[h])}}const i=c(this,Si)[0];let s=0;for(const o of e){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,Si).length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)c(this,Se).append(c(this,Se).firstChild);else if(r>s)for(let a=0;a<r-s;a++)c(this,Se).firstChild.before(c(this,Se).lastChild);let o=0;for(const a of e){const u=c(this,Si)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",nt._l10nResizer[u])}}E(this,q,Yv).call(this,0),v(this,Os,!0),c(this,Se).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Os)&&E(this,q,Xv).call(this,c(this,Md),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,q,oh).call(this),this.div.focus()}select(){var t,e,i;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(i=c(this,Mt))==null||i.toggleAltTextBadge(!1)}}unselect(){var t,e,i,s,r;this.isSelected&&(this.isSelected=!1,(t=c(this,Se))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=c(this,Mt))==null||r.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,Rd)}set isEditing(t){v(this,Rd,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){v(this,ga,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,ei)||v(this,ei,new Map);const{action:i}=t;let s=c(this,ei).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),c(this,ei).delete(i),c(this,ei).size===0&&v(this,ei,null)},nt._telemetryTimeout),c(this,ei).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),v(this,Ec,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,Ec,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ma=new WeakMap,Si=new WeakMap,Mt=new WeakMap,Ae=new WeakMap,Ec=new WeakMap,Gr=new WeakMap,Pd=new WeakMap,ga=new WeakMap,Se=new WeakMap,ya=new WeakMap,Fs=new WeakMap,Xr=new WeakMap,Md=new WeakMap,va=new WeakMap,En=new WeakMap,Rd=new WeakMap,xa=new WeakMap,Os=new WeakMap,Ji=new WeakMap,Cc=new WeakMap,kc=new WeakMap,ei=new WeakMap,wa=new WeakMap,Nd=new WeakMap,_g=new WeakMap,q=new WeakSet,Uv=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ld=new WeakSet,Wv=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},lm=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},W_=function(){if(c(this,Se))return;v(this,Se,document.createElement("div")),c(this,Se).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");c(this,Se).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",E(this,q,G_).bind(this,i),{signal:e}),s.addEventListener("contextmenu",mi,{signal:e}),s.tabIndex=-1}this.div.prepend(c(this,Se))},G_=function(t,e){var h;e.preventDefault();const{isMac:i}=Le.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=c(this,Mt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,v(this,ya,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,q,Xv).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",te,{passive:!1,signal:o}),window.addEventListener("contextmenu",mi,{signal:o}),v(this,Fs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=c(this,Mt))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=l,E(this,q,cm).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Gv=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*i,o*s),this.fixAndSetPosition(),this._onResized()},cm=function(){if(!c(this,Fs))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=c(this,Fs);v(this,Fs,null);const r=this.x,o=this.y,a=this.width,l=this.height;r===t&&o===e&&a===i&&l===s||this.addCommands({cmd:E(this,q,Gv).bind(this,r,o,a,l),undo:E(this,q,Gv).bind(this,t,e,i,s),mustExec:!0})},Xv=function(t,e){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,u=nt.MIN_SIZE/i,h=nt.MIN_SIZE/s,d=E(this,q,lm).call(this,this.rotation),f=($,O)=>[d[0]*$+d[2]*O,d[1]*$+d[3]*O],p=E(this,q,lm).call(this,360-this.rotation),y=($,O)=>[p[0]*$+p[2]*O,p[1]*$+p[3]*O];let x,A,m=!1,w=!1;switch(t){case"topLeft":m=!0,x=($,O)=>[0,0],A=($,O)=>[$,O];break;case"topMiddle":x=($,O)=>[$/2,0],A=($,O)=>[$/2,O];break;case"topRight":m=!0,x=($,O)=>[$,0],A=($,O)=>[0,O];break;case"middleRight":w=!0,x=($,O)=>[$,O/2],A=($,O)=>[0,O/2];break;case"bottomRight":m=!0,x=($,O)=>[$,O],A=($,O)=>[0,0];break;case"bottomMiddle":x=($,O)=>[$/2,O],A=($,O)=>[$/2,0];break;case"bottomLeft":m=!0,x=($,O)=>[0,O],A=($,O)=>[$,0];break;case"middleLeft":w=!0,x=($,O)=>[0,O/2],A=($,O)=>[$,O/2];break}const b=x(a,l),C=A(a,l);let k=f(...C);const _=nt._round(r+k[0]),T=nt._round(o+k[1]);let M=1,R=1,N,I;if(e.fromKeyboard)({deltaX:N,deltaY:I}=e);else{const{screenX:$,screenY:O}=e,[F,W]=c(this,ya);[N,I]=this.screenToPageTranslation($-F,O-W),c(this,ya)[0]=$,c(this,ya)[1]=O}if([N,I]=y(N/i,I/s),m){const $=Math.hypot(a,l);M=R=Math.max(Math.min(Math.hypot(C[0]-b[0]-N,C[1]-b[1]-I)/$,1/a,1/l),u/a,h/l)}else w?M=Je(Math.abs(C[0]-b[0]-N),u,1)/a:R=Je(Math.abs(C[1]-b[1]-I),h,1)/l;const et=nt._round(a*M),lt=nt._round(l*R);k=f(...A(et,lt));const J=_-k[0],Yt=T-k[1];c(this,En)||v(this,En,[this.x,this.y,this.width,this.height]),this.width=et,this.height=lt,this.x=J,this.y=Yt,this.setDims(i*et,s*lt),this.fixAndSetPosition(),this._onResizing()},X_=function(){var t;v(this,Fs,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=c(this,Mt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},K_=function(t,e,i){let r=.7*(i/e)+1-.7;if(r===1)return;const o=E(this,q,lm).call(this,this.rotation),a=(_,T)=>[o[0]*_+o[2]*T,o[1]*_+o[3]*T],[l,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,p=this.height,y=nt.MIN_SIZE/l,x=nt.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/p),y/f,x/p);const A=nt._round(f*r),m=nt._round(p*r);if(A===f&&m===p)return;c(this,En)||v(this,En,[h,d,f,p]);const w=a(f/2,p/2),b=nt._round(h+w[0]),C=nt._round(d+w[1]),k=a(A/2,m/2);this.x=b-k[0],this.y=C-k[1],this.width=A,this.height=m,this.setDims(l*A,u*m),this.fixAndSetPosition(),this._onResizing()},q_=function(){var t;(t=c(this,Mt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),E(this,q,cm).call(this)},Kv=function(t){const{isMac:e}=Le.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Y_=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},a=u=>{s.abort(),v(this,Gr,null),v(this,va,!1),this._uiManager.endDragSession()||E(this,q,Kv).call(this,u),i&&this._onStopDragging()};e&&(v(this,Cc,t.clientX),v(this,kc,t.clientY),v(this,Gr,t.pointerId),v(this,Pd,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==c(this,Gr)){te(u);return}const[p,y]=this.screenToPageTranslation(h-c(this,Cc),d-c(this,kc));v(this,Cc,h),v(this,kc,d),this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",te,o),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,Pd)&&(c(this,wa)||u.isPrimary)&&a(u),te(u)},o));const l=u=>{if(!c(this,Gr)||c(this,Gr)===u.pointerId){a(u);return}te(u)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})},qv=function(){if(c(this,Xr)||!this.div)return;v(this,Xr,new AbortController);const t=this._uiManager.combinedSignal(c(this,Xr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},Q_=function(t){nt._resizerKeyboardManager.exec(this,t)},Z_=function(t){var e;c(this,Os)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,Se)&&E(this,q,oh).call(this)},J_=function(t){v(this,Md,c(this,Os)?t:"")},Yv=function(t){if(c(this,Si))for(const e of c(this,Si))e.tabIndex=t},oh=function(){v(this,Os,!1),E(this,q,Yv).call(this,-1),E(this,q,cm).call(this)},S(nt,Ld),j(nt,"_l10n",null),j(nt,"_l10nResizer",null),j(nt,"_borderLineWidth",-1),j(nt,"_colorManager",new Fv),j(nt,"_zIndex",1),j(nt,"_telemetryTimeout",1e3);let kt=nt;class f4 extends kt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const MS=3285377520,qn=4294901760,Vi=65535;class tT{constructor(t){this.h1=t?t&4294967295:MS,this.h2=t?t&4294967295:MS}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,A=t.length;x<A;x++){const m=t.charCodeAt(x);m<=255?e[i++]=m:(e[i++]=m>>>8,e[i++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(e.buffer,0,s);let a=0,l=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,p=d&Vi,y=f&Vi;for(let x=0;x<s;x++)x&1?(a=o[x],a=a*d&qn|a*p&Vi,a=a<<15|a>>>17,a=a*f&qn|a*y&Vi,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[x],l=l*d&qn|l*p&Vi,l=l<<15|l>>>17,l=l*f&qn|l*y&Vi,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,r){case 3:a^=e[s*4+2]<<16;case 2:a^=e[s*4+1]<<8;case 1:a^=e[s*4],a=a*d&qn|a*p&Vi,a=a<<15|a>>>17,a=a*f&qn|a*y&Vi,s&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&qn|t*36045&Vi,e=e*4283543511&qn|((e<<16|t>>>16)*2950163797&qn)>>>16,t^=e>>>1,t=t*444984403&qn|t*60499&Vi,e=e*3301882366&qn|((e<<16|t>>>16)*3120437893&qn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Qv=Object.freeze({map:null,hash:"",transfer:void 0});var ba,Aa,Ee,Tg,eT;class Iw{constructor(){S(this,Tg);S(this,ba,!1);S(this,Aa,null);S(this,Ee,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=c(this,Ee).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return c(this,Ee).get(t)}remove(t){if(c(this,Ee).delete(t),c(this,Ee).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,Ee).values())if(e instanceof kt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=c(this,Ee).get(t);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(e))i[r]!==o&&(s=!0,i[r]=o);else s=!0,c(this,Ee).set(t,e);s&&E(this,Tg,eT).call(this),e instanceof kt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,Ee).has(t)}get size(){return c(this,Ee).size}resetModified(){c(this,ba)&&(v(this,ba,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new nT(this)}get serializable(){if(c(this,Ee).size===0)return Qv;const t=new Map,e=new tT,i=[],s=Object.create(null);let r=!1;for(const[o,a]of c(this,Ee)){const l=a instanceof kt?a.serialize(!1,s):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Qv}get editorStats(){let t=null;const e=new Map;for(const i of c(this,Ee).values()){if(!(i instanceof kt))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){v(this,Aa,null)}get modifiedIds(){if(c(this,Aa))return c(this,Aa);const t=[];for(const e of c(this,Ee).values())!(e instanceof kt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return v(this,Aa,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return c(this,Ee).entries()}}ba=new WeakMap,Aa=new WeakMap,Ee=new WeakMap,Tg=new WeakSet,eT=function(){c(this,ba)||(v(this,ba,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Id;class nT extends Iw{constructor(e){super();S(this,Id);const{map:i,hash:s,transfer:r}=e.serializable,o=structuredClone(i,r?{transfer:r}:null);v(this,Id,{map:o,hash:s,transfer:r})}get print(){bt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,Id)}get modifiedIds(){return rt(this,"modifiedIds",{ids:new Set,hash:""})}}Id=new WeakMap;var _c;class p4{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){S(this,_c,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,_c).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||c(this,_c).has(t.loadedName))){if(ne(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,a=new FontFace(s,r,o);this.addNativeFontFace(a);try{await a.load(),c(this,_c).add(s),i==null||i(t)}catch{Z(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}bt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw Z(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return rt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return rt(this,"isSyncFontLoadingSupported",Ze||Le.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ne(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return rt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(C,k){return C.charCodeAt(k)<<24|C.charCodeAt(k+1)<<16|C.charCodeAt(k+2)<<8|C.charCodeAt(k+3)&255}function s(C,k,_,T){const M=C.substring(0,k),R=C.substring(k+_);return M+T+R}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function h(C,k){if(++u>30){Z("Load test font never loaded."),k();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(h.bind(null,C,k))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const y=16,x=1482184792;let A=i(f,y);for(r=0,o=d.length-3;r<o;r+=4)A=A-x+i(d,r)|0;r<d.length&&(A=A-x+i(d+"XXX",r)|0),f=s(f,y,4,ZF(A));const m=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(w);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const C of[t.loadedName,d]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=C,b.append(k)}this._document.body.append(b),h(d,()=>{b.remove(),e.complete()})}}_c=new WeakMap;class m4{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${S_(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(o){Z(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=r}}function g4(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Ze)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function y4(n){if(Ze&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Jf(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Np(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Zv=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,v4=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",x4=i4.bind(null,Zv,v4);var Bs,Pg;class w4{constructor(){S(this,Bs,new Map);S(this,Pg,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};c(this,Pg).then(()=>{for(const[s]of c(this,Bs))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){Z("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}c(this,Bs).set(e,s)}removeEventListener(t,e){const i=c(this,Bs).get(e);i==null||i(),c(this,Bs).delete(e)}terminate(){for(const[,t]of c(this,Bs))t==null||t();c(this,Bs).clear()}}Bs=new WeakMap,Pg=new WeakMap;const Lp={DATA:1,ERROR:2},Qt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function RS(){}function cn(n){if(n instanceof Io||n instanceof Nv||n instanceof _S||n instanceof dg||n instanceof cy)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||bt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Io(n.message);case"InvalidPDFException":return new Nv(n.message);case"PasswordException":return new _S(n.message,n.code);case"ResponseException":return new dg(n.message,n.status,n.missing);case"UnknownErrorException":return new cy(n.message,n.details)}return new cy(n.message,n.toString())}var Tc,di,iT,sT,rT,um;class ah{constructor(t,e,i){S(this,di);S(this,Tc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",E(this,di,iT).bind(this),{signal:c(this,Tc).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,l.postMessage({sourceName:o,targetName:a,stream:Qt.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ne(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Qt.CANCEL,streamId:r,reason:cn(u)}),h.promise}},i)}destroy(){var t;(t=c(this,Tc))==null||t.abort(),v(this,Tc,null)}}Tc=new WeakMap,di=new WeakSet,iT=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){E(this,di,rT).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Lp.DATA)s.resolve(t.data);else if(t.callback===Lp.ERROR)s.reject(cn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:Lp.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:Lp.ERROR,callbackId:t.callbackId,reason:cn(o)})});return}if(t.streamId){E(this,di,sT).call(this,t);return}e(t.data)},sT=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:Qt.ENQUEUE,streamId:e,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Qt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(u){ne(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:Qt.ERROR,streamId:e,reason:cn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Qt.START_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Qt.START_COMPLETE,streamId:e,reason:cn(u)})})},rT=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Qt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(cn(t.reason));break;case Qt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(cn(t.reason));break;case Qt.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:Qt.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||RS).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Qt.PULL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Qt.PULL_COMPLETE,streamId:e,reason:cn(u)})});break;case Qt.ENQUEUE:if(ne(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Qt.CLOSE:if(ne(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),E(this,di,um).call(this,o,e);break;case Qt.ERROR:ne(o,"error should have stream controller"),o.controller.error(cn(t.reason)),E(this,di,um).call(this,o,e);break;case Qt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(cn(t.reason)),E(this,di,um).call(this,o,e);break;case Qt.CANCEL:if(!a)break;const l=cn(t.reason);Promise.try(a.onCancel||RS,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:Qt.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:Qt.CANCEL_COMPLETE,streamId:e,reason:cn(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},um=async function(t,e){var i,s,r;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Dd;class oT{constructor({enableHWA:t=!1}){S(this,Dd,!1);v(this,Dd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!c(this,Dd)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){bt("Abstract method `_createCanvas` called.")}}Dd=new WeakMap;class b4 extends oT{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class aT{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class NS extends aT{async _fetch(t){const e=await tp(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Jf(e)}}class lT{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,r){return"none"}destroy(t=!1){}}var Sa,Pc,zs,Vs,Ve,Ea,Ca,z,Be,lh,Pl,hm,Ml,cT,Jv,Rl,ch,uh,tx,hh;class A4 extends lT{constructor({docId:e,ownerDocument:i=globalThis.document}){super();S(this,z);S(this,Sa);S(this,Pc);S(this,zs);S(this,Vs);S(this,Ve);S(this,Ea);S(this,Ca,0);v(this,Vs,e),v(this,Ve,i)}addFilter(e){if(!e)return"none";let i=c(this,z,Be).get(e);if(i)return i;const[s,r,o]=E(this,z,hm).call(this,e),a=e.length===1?s:`${s}${r}${o}`;if(i=c(this,z,Be).get(a),i)return c(this,z,Be).set(e,i),i;const l=`g_${c(this,Vs)}_transfer_map_${Ge(this,Ca)._++}`,u=E(this,z,Ml).call(this,l);c(this,z,Be).set(e,u),c(this,z,Be).set(a,u);const h=E(this,z,Rl).call(this,l);return E(this,z,uh).call(this,s,r,o,h),u}addHCMFilter(e,i){var y;const s=`${e}-${i}`,r="base";let o=c(this,z,lh).get(r);if((o==null?void 0:o.key)===s||(o?((y=o.filter)==null||y.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},c(this,z,lh).set(r,o)),!e||!i))return o.url;const a=E(this,z,hh).call(this,e);e=X.makeHexColor(...a);const l=E(this,z,hh).call(this,i);if(i=X.makeHexColor(...l),c(this,z,Pl).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return o.url;const u=new Array(256);for(let x=0;x<=255;x++){const A=x/255;u[x]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=u.join(","),d=`g_${c(this,Vs)}_hcm_filter`,f=o.filter=E(this,z,Rl).call(this,d);E(this,z,uh).call(this,h,h,h,f),E(this,z,Jv).call(this,f);const p=(x,A)=>{const m=a[x]/255,w=l[x]/255,b=new Array(A+1);for(let C=0;C<=A;C++)b[C]=m+C/A*(w-m);return b.join(",")};return E(this,z,uh).call(this,p(0,5),p(1,5),p(2,5),f),o.url=E(this,z,Ml).call(this,d),o.url}addAlphaFilter(e){let i=c(this,z,Be).get(e);if(i)return i;const[s]=E(this,z,hm).call(this,[e]),r=`alpha_${s}`;if(i=c(this,z,Be).get(r),i)return c(this,z,Be).set(e,i),i;const o=`g_${c(this,Vs)}_alpha_map_${Ge(this,Ca)._++}`,a=E(this,z,Ml).call(this,o);c(this,z,Be).set(e,a),c(this,z,Be).set(r,a);const l=E(this,z,Rl).call(this,o);return E(this,z,tx).call(this,s,l),a}addLuminosityFilter(e){let i=c(this,z,Be).get(e||"luminosity");if(i)return i;let s,r;if(e?([s]=E(this,z,hm).call(this,[e]),r=`luminosity_${s}`):r="luminosity",i=c(this,z,Be).get(r),i)return c(this,z,Be).set(e,i),i;const o=`g_${c(this,Vs)}_luminosity_map_${Ge(this,Ca)._++}`,a=E(this,z,Ml).call(this,o);c(this,z,Be).set(e,a),c(this,z,Be).set(r,a);const l=E(this,z,Rl).call(this,o);return E(this,z,cT).call(this,l),e&&E(this,z,tx).call(this,s,l),a}addHighlightHCMFilter(e,i,s,r,o){var w;const a=`${i}-${s}-${r}-${o}`;let l=c(this,z,lh).get(e);if((l==null?void 0:l.key)===a||(l?((w=l.filter)==null||w.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,z,lh).set(e,l)),!i||!s))return l.url;const[u,h]=[i,s].map(E(this,z,hh).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[p,y]=[r,o].map(E(this,z,hh).bind(this));f<d&&([d,f,p,y]=[f,d,y,p]),c(this,z,Pl).style.color="";const x=(b,C,k)=>{const _=new Array(256),T=(f-d)/k,M=b/255,R=(C-b)/(255*k);let N=0;for(let I=0;I<=k;I++){const et=Math.round(d+I*T),lt=M+I*R;for(let J=N;J<=et;J++)_[J]=lt;N=et+1}for(let I=N;I<256;I++)_[I]=_[N-1];return _.join(",")},A=`g_${c(this,Vs)}_hcm_${e}_filter`,m=l.filter=E(this,z,Rl).call(this,A);return E(this,z,Jv).call(this,m),E(this,z,uh).call(this,x(p[0],y[0],5),x(p[1],y[1],5),x(p[2],y[2],5),m),l.url=E(this,z,Ml).call(this,A),l.url}destroy(e=!1){var i,s,r,o;e&&((i=c(this,Ea))!=null&&i.size)||((s=c(this,zs))==null||s.parentNode.parentNode.remove(),v(this,zs,null),(r=c(this,Pc))==null||r.clear(),v(this,Pc,null),(o=c(this,Ea))==null||o.clear(),v(this,Ea,null),v(this,Ca,0))}}Sa=new WeakMap,Pc=new WeakMap,zs=new WeakMap,Vs=new WeakMap,Ve=new WeakMap,Ea=new WeakMap,Ca=new WeakMap,z=new WeakSet,Be=function(){return c(this,Pc)||v(this,Pc,new Map)},lh=function(){return c(this,Ea)||v(this,Ea,new Map)},Pl=function(){if(!c(this,zs)){const e=c(this,Ve).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=c(this,Ve).createElementNS(bs,"svg");s.setAttribute("width",0),s.setAttribute("height",0),v(this,zs,c(this,Ve).createElementNS(bs,"defs")),e.append(s),s.append(c(this,zs)),c(this,Ve).body.append(e)}return c(this,zs)},hm=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=e,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,a[u]=s[u]/255,l[u]=r[u]/255;return[o.join(","),a.join(","),l.join(",")]},Ml=function(e){if(c(this,Sa)===void 0){v(this,Sa,"");const i=c(this,Ve).URL;i!==c(this,Ve).baseURI&&(d0(i)?Z('#createUrl: ignore "data:"-URL for performance reasons.'):v(this,Sa,w_(i,"")))}return`url(${c(this,Sa)}#${e})`},cT=function(e){const i=c(this,Ve).createElementNS(bs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},Jv=function(e){const i=c(this,Ve).createElementNS(bs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Rl=function(e){const i=c(this,Ve).createElementNS(bs,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),c(this,z,Pl).append(i),i},ch=function(e,i,s){const r=c(this,Ve).createElementNS(bs,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},uh=function(e,i,s,r){const o=c(this,Ve).createElementNS(bs,"feComponentTransfer");r.append(o),E(this,z,ch).call(this,o,"feFuncR",e),E(this,z,ch).call(this,o,"feFuncG",i),E(this,z,ch).call(this,o,"feFuncB",s)},tx=function(e,i){const s=c(this,Ve).createElementNS(bs,"feComponentTransfer");i.append(s),E(this,z,ch).call(this,s,"feFuncA",e)},hh=function(e){return c(this,z,Pl).style.color=e,f0(getComputedStyle(c(this,z,Pl)).getPropertyValue("color"))};class uT{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class LS extends uT{async _fetch(t){const e=await tp(t,"arraybuffer");return new Uint8Array(e)}}class hT{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){bt("Abstract method `_fetch` called.")}}class IS extends hT{async _fetch(t){const e=await tp(t,"arraybuffer");return new Uint8Array(e)}}Ze&&Z("Please use the `legacy` build in Node.js environments.");async function Dw(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class S4 extends lT{}class E4 extends oT{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class C4 extends aT{async _fetch(t){return Dw(t)}}class k4 extends uT{async _fetch(t){return Dw(t)}}class _4 extends hT{async _fetch(t){return Dw(t)}}const Pe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ex(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class jw{isModifyingCurrentTransform(){return!1}getPattern(){bt("Abstract method `getPattern` called.")}}class T4 extends jw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let r;if(s===Pe.STROKE||s===Pe.FILL){const o=e.current.getClippedPathBoundingBox(s,jt(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=X.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),ex(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=t.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else ex(t,this._bbox),r=this._createGradient(t);return r}}function dy(n,t,e,i,s,r,o,a){const l=t.coords,u=t.colors,h=n.data,d=n.width*4;let f;l[e+1]>l[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f),l[i+1]>l[s+1]&&(f=i,i=s,s=f,f=o,o=a,a=f),l[e+1]>l[i+1]&&(f=e,e=i,i=f,f=r,r=o,o=f);const p=(l[e]+t.offsetX)*t.scaleX,y=(l[e+1]+t.offsetY)*t.scaleY,x=(l[i]+t.offsetX)*t.scaleX,A=(l[i+1]+t.offsetY)*t.scaleY,m=(l[s]+t.offsetX)*t.scaleX,w=(l[s+1]+t.offsetY)*t.scaleY;if(y>=w)return;const b=u[r],C=u[r+1],k=u[r+2],_=u[o],T=u[o+1],M=u[o+2],R=u[a],N=u[a+1],I=u[a+2],et=Math.round(y),lt=Math.round(w);let J,Yt,$,O,F,W,K,ut;for(let ot=et;ot<=lt;ot++){if(ot<A){const At=ot<y?0:(y-ot)/(y-A);J=p-(p-x)*At,Yt=b-(b-_)*At,$=C-(C-T)*At,O=k-(k-M)*At}else{let At;ot>w?At=1:A===w?At=0:At=(A-ot)/(A-w),J=x-(x-m)*At,Yt=_-(_-R)*At,$=T-(T-N)*At,O=M-(M-I)*At}let St;ot<y?St=0:ot>w?St=1:St=(y-ot)/(y-w),F=p-(p-m)*St,W=b-(b-R)*St,K=C-(C-N)*St,ut=k-(k-I)*St;const ln=Math.round(Math.min(J,F)),Xn=Math.round(Math.max(J,F));let De=d*ot+ln*4;for(let At=ln;At<=Xn;At++)St=(J-At)/(J-F),St<0?St=0:St>1&&(St=1),h[De++]=Yt-(Yt-W)*St|0,h[De++]=$-($-K)*St|0,h[De++]=O-(O-ut)*St|0,h[De++]=255}}function P4(n,t,e){const i=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,u=a-1;for(r=0;r<l;r++){let h=r*a;for(let d=0;d<u;d++,h++)dy(n,e,i[h],i[h+1],i[h+a],s[h],s[h+1],s[h+a]),dy(n,e,i[h+a+1],i[h+1],i[h+a],s[h+a+1],s[h+1],s[h+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)dy(n,e,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class M4 extends jw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),p=u/d,y=h/f,x={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/y},A=d+2*2,m=f+2*2,w=i.getCanvas("mesh",A,m),b=w.context,C=b.createImageData(d,f);if(e){const _=C.data;for(let T=0,M=_.length;T<M;T+=4)_[T]=e[0],_[T+1]=e[1],_[T+2]=e[2],_[T+3]=255}for(const _ of this._figures)P4(C,_,x);return b.putImageData(C,2,2),{canvas:w.canvas,offsetX:a-2*p,offsetY:l-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){ex(t,this._bbox);const r=new Float32Array(2);if(s===Pe.SHADING)X.singularValueDecompose2dScale(jt(t),r);else if(this.matrix){X.singularValueDecompose2dScale(this.matrix,r);const[a,l]=r;X.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=l}else X.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===Pe.SHADING?null:this._background,e.cachedCanvases);return s!==Pe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class R4 extends jw{getPattern(){return"hotpink"}}function N4(n){switch(n[0]){case"RadialAxial":return new T4(n);case"Mesh":return new M4(n);case"Dummy":return new R4}throw new Error(`Unknown IR type: ${n[0]}`)}const DS={COLORED:1,UNCOLORED:2},Mg=class Mg{constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),h0("TilingType: "+r);const h=e[0],d=e[1],f=e[2],p=e[3],y=f-h,x=p-d,A=new Float32Array(2);X.singularValueDecompose2dScale(this.matrix,A);const[m,w]=A;X.singularValueDecompose2dScale(this.baseTransform,A);const b=m*A[0],C=w*A[1];let k=y,_=x,T=!1,M=!1;const R=Math.ceil(l*b),N=Math.ceil(u*C),I=Math.ceil(y*b),et=Math.ceil(x*C);R>=I?k=l:T=!0,N>=et?_=u:M=!0;const lt=this.getSizeAndScale(k,this.ctx.canvas.width,b),J=this.getSizeAndScale(_,this.ctx.canvas.height,C),Yt=t.cachedCanvases.getCanvas("pattern",lt.size,J.size),$=Yt.context,O=a.createCanvasGraphics($);if(O.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(O,s,o),$.translate(-lt.scale*h,-J.scale*d),O.transform(lt.scale,0,0,J.scale,0,0),$.save(),this.clipBbox(O,h,d,f,p),O.baseTransform=jt(O.ctx),O.executeOperatorList(i),O.endDrawing(),$.restore(),T||M){const F=Yt.canvas;T&&(k=l),M&&(_=u);const W=this.getSizeAndScale(k,this.ctx.canvas.width,b),K=this.getSizeAndScale(_,this.ctx.canvas.height,C),ut=W.size,ot=K.size,St=t.cachedCanvases.getCanvas("pattern-workaround",ut,ot),ln=St.context,Xn=T?Math.floor(y/l):0,De=M?Math.floor(x/u):0;for(let At=0;At<=Xn;At++)for(let ju=0;ju<=De;ju++)ln.drawImage(F,ut*At,ot*ju,ut,ot,0,0,ut,ot);return{canvas:St.canvas,scaleX:W.scale,scaleY:K.scale,offsetX:h,offsetY:d}}return{canvas:Yt.canvas,scaleX:lt.scale,scaleY:J.scale,offsetX:h,offsetY:d}}getSizeAndScale(t,e,i){const s=Math.max(Mg.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*i);return r>=s?r=s:i=r/t,{scale:i,size:r}}clipBbox(t,e,i,s,r){const o=s-e,a=r-i;t.ctx.rect(e,i,o,a),X.axialAlignedBoundingBox([e,i,s,r],jt(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,r=t.current;switch(e){case DS.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=a;break;case DS.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new QF(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s){let r=i;s!==Pe.SHADING&&(r=X.transform(r,e.baseTransform),this.matrix&&(r=X.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=t.createPattern(o.canvas,"repeat");return l.setTransform(a),l}};j(Mg,"MAX_PATTERN_SIZE",3e3);let nx=Mg;function L4({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Le.isLittleEndian?4278190080:255,[l,u]=o?[r,a]:[a,r],h=i>>3,d=i&7,f=n.length;e=new Uint32Array(e.buffer);let p=0;for(let y=0;y<s;y++){for(const A=t+h;t<A;t++){const m=t<f?n[t]:255;e[p++]=m&128?u:l,e[p++]=m&64?u:l,e[p++]=m&32?u:l,e[p++]=m&16?u:l,e[p++]=m&8?u:l,e[p++]=m&4?u:l,e[p++]=m&2?u:l,e[p++]=m&1?u:l}if(d===0)continue;const x=t<f?n[t++]:255;for(let A=0;A<d;A++)e[p++]=x&1<<7-A?u:l}return{srcPos:t,destPos:p}}const jS=16,FS=100,I4=15,OS=10,pn=16,fy=new DOMMatrix,Bn=new Float32Array(2),Zl=new Float32Array([1/0,1/0,-1/0,-1/0]);function D4(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,s,r,o,a){t.transform(e,i,s,r,o,a),this.__originalTransform(e,i,s,r,o,a)},n.setTransform=function(e,i,s,r,o,a){t.setTransform(e,i,s,r,o,a),this.__originalSetTransform(e,i,s,r,o,a)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,r,o,a){t.bezierCurveTo(e,i,s,r,o,a),this.__originalBezierCurveTo(e,i,s,r,o,a)},n.rect=function(e,i,s,r){t.rect(e,i,s,r),this.__originalRect(e,i,s,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class j4{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ip(n,t,e,i,s,r,o,a,l,u){const[h,d,f,p,y,x]=jt(n);if(d===0&&f===0){const w=o*h+y,b=Math.round(w),C=a*p+x,k=Math.round(C),_=(o+l)*h+y,T=Math.abs(Math.round(_)-b)||1,M=(a+u)*p+x,R=Math.abs(Math.round(M)-k)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(p),b,k),n.drawImage(t,e,i,s,r,0,0,T,R),n.setTransform(h,d,f,p,y,x),[T,R]}if(h===0&&p===0){const w=a*f+y,b=Math.round(w),C=o*d+x,k=Math.round(C),_=(a+u)*f+y,T=Math.abs(Math.round(_)-b)||1,M=(o+l)*d+x,R=Math.abs(Math.round(M)-k)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,b,k),n.drawImage(t,e,i,s,r,0,0,R,T),n.setTransform(h,d,f,p,y,x),[R,T]}n.drawImage(t,e,i,s,r,o,a,l,u);const A=Math.hypot(h,d),m=Math.hypot(f,p);return[A*l,m*u]}class BS{constructor(t,e){j(this,"alphaIsShape",!1);j(this,"fontSize",0);j(this,"fontSizeScale",1);j(this,"textMatrix",null);j(this,"textMatrixScale",1);j(this,"fontMatrix",Rv);j(this,"leading",0);j(this,"x",0);j(this,"y",0);j(this,"lineX",0);j(this,"lineY",0);j(this,"charSpacing",0);j(this,"wordSpacing",0);j(this,"textHScale",1);j(this,"textRenderingMode",Oe.FILL);j(this,"textRise",0);j(this,"fillColor","#000000");j(this,"strokeColor","#000000");j(this,"patternFill",!1);j(this,"patternStroke",!1);j(this,"fillAlpha",1);j(this,"strokeAlpha",1);j(this,"lineWidth",1);j(this,"activeSMask",null);j(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Zl.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Pe.FILL,e=null){const i=this.minMax.slice();if(t===Pe.STROKE){e||bt("Stroke bounding box must include transform."),X.singularValueDecompose2dScale(e,Bn);const s=Bn[0]*this.lineWidth/2,r=Bn[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const t=X.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Zl,0)}getClippedPathBoundingBox(t=Pe.FILL,e=null){return X.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function zS(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%pn,r=(e-s)/pn,o=s===0?r:r+1,a=n.createImageData(i,pn);let l=0,u;const h=t.data,d=a.data;let f,p,y,x;if(t.kind===nm.GRAYSCALE_1BPP){const A=h.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),w=m.length,b=i+7>>3,C=4294967295,k=Le.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?pn:s,u=0,p=0;p<y;p++){const _=A-l;let T=0;const M=_>b?i:_*8-7,R=M&-8;let N=0,I=0;for(;T<R;T+=8)I=h[l++],m[u++]=I&128?C:k,m[u++]=I&64?C:k,m[u++]=I&32?C:k,m[u++]=I&16?C:k,m[u++]=I&8?C:k,m[u++]=I&4?C:k,m[u++]=I&2?C:k,m[u++]=I&1?C:k;for(;T<M;T++)N===0&&(I=h[l++],N=128),m[u++]=I&N?C:k,N>>=1}for(;u<w;)m[u++]=0;n.putImageData(a,0,f*pn)}}else if(t.kind===nm.RGBA_32BPP){for(p=0,x=i*pn*4,f=0;f<r;f++)d.set(h.subarray(l,l+x)),l+=x,n.putImageData(a,0,p),p+=pn;f<o&&(x=i*s*4,d.set(h.subarray(l,l+x)),n.putImageData(a,0,p))}else if(t.kind===nm.RGB_24BPP)for(y=pn,x=i*y,f=0;f<o;f++){for(f>=r&&(y=s,x=i*y),u=0,p=x;p--;)d[u++]=h[l++],d[u++]=h[l++],d[u++]=h[l++],d[u++]=255;n.putImageData(a,0,f*pn)}else throw new Error(`bad image kind: ${t.kind}`)}function VS(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%pn,r=(e-s)/pn,o=s===0?r:r+1,a=n.createImageData(i,pn);let l=0;const u=t.data,h=a.data;for(let d=0;d<o;d++){const f=d<r?pn:s;({srcPos:l}=L4({src:u,srcPos:l,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(a,0,d*pn)}}function Xu(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Dp(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function $S(n,t){if(t)return!0;X.singularValueDecompose2dScale(n,Bn);const e=Math.fround(ys.pixelRatio*Do.PDF_TO_CSS_UNITS);return Bn[0]<=e&&Bn[1]<=e}const F4=["butt","round","square"],O4=["miter","round","bevel"],B4={},HS={};var Oi,ix,sx,rx;const Hw=class Hw{constructor(t,e,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},l,u){S(this,Oi);this.ctx=t,this.current=new BS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new j4(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...jt(this.compositeCtx))}this.ctx.save(),Dp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=jt(this.ctx)}executeOperatorList(t,e,i,s){const r=t.argsArray,o=t.fnArray;let a=e||0;const l=r.length;if(l===a)return a;const u=l-a>OS&&typeof i=="function",h=u?Date.now()+I4:0;let d=0;const f=this.commonObjs,p=this.objs;let y;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(y=o[a],y!==hg.dependency)this[y].apply(this,r[a]);else for(const x of r[a]){const A=x.startsWith("g_")?f:p;if(!A.has(x))return A.get(x,i),a}if(a++,a===l)return a;if(u&&++d>OS){if(Date.now()>h)return i(),a;d=0}}}endDrawing(){E(this,Oi,ix).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),E(this,Oi,sx).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=i,l=s,u="prescale1",h,d;for(;r>2&&a>1||o>2&&l>1;){let f=a,p=l;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),h=this.cachedCanvases.getCanvas(u,f,p),d=h.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,a,l,0,0,f,p),t=h.canvas,a=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,r=this.current.fillColor,o=this.current.patternFill,a=jt(e);let l,u,h,d;if((t.bitmap||t.data)&&t.count>1){const R=t.bitmap||t.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(R),l||(l=new Map,this._cachedBitmapsMap.set(R,l));const N=l.get(u);if(N&&!o){const I=Math.round(Math.min(a[0],a[2])+a[4]),et=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:N,offsetX:I,offsetY:et}}h=N}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,s),VS(d.context,t));let f=X.transform(a,[1/i,0,0,-1/s,0,0]);f=X.transform(f,[1,0,0,1,0,-s]);const p=Zl.slice();X.axialAlignedBoundingBox([0,0,i,s],f,p);const[y,x,A,m]=p,w=Math.round(A-y)||1,b=Math.round(m-x)||1,C=this.cachedCanvases.getCanvas("fillCanvas",w,b),k=C.context,_=y,T=x;k.translate(-_,-T),k.transform(...f),h||(h=this._scaleImage(d.canvas,zi(k)),h=h.img,l&&o&&l.set(u,h)),k.imageSmoothingEnabled=$S(jt(k),t.interpolate),Ip(k,h,0,0,h.width,h.height,0,0,i,s),k.globalCompositeOperation="source-in";const M=X.transform(zi(k),[1,0,0,1,-_,-T]);return k.fillStyle=o?r.getPattern(e,this,M,Pe.FILL):r,k.fillRect(0,0,i,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,C.canvas)),{canvas:C.canvas,offsetX:Math.round(_),offsetY:Math.round(T)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=F4[t]}setLineJoin(t){this.ctx.lineJoin=O4[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=s.context;r.setTransform(this.suspendedCtx.getTransform()),Xu(this.suspendedCtx,r),D4(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xu(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const r=s[0],o=s[1],a=s[2]-r,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,i,a,l,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,r,o,a,l,u,h,d){let f=t.canvas,p=l-h,y=u-d;if(o)if(p<0||y<0||p+i>f.width||y+s>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",i,s),m=A.context;m.drawImage(f,-p,-y),m.globalCompositeOperation="destination-atop",m.fillStyle=o,m.fillRect(0,0,i,s),m.globalCompositeOperation="source-over",f=A.canvas,p=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(p,y,i,s),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(p,y,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const x=new Path2D;x.rect(l,u,i,s),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(f,p,y,i,s,l,u,i,s),e.restore()}save(){this.inSMaskMode&&Xu(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Xu(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,r,o){this.ctx.transform(t,e,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let[s]=e;if(!i){s||(s=e[0]=new Path2D),this[t](s);return}if(!(s instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,a=s.length;o<a;)switch(s[o++]){case Mp.moveTo:r.moveTo(s[o++],s[o++]);break;case Mp.lineTo:r.lineTo(s[o++],s[o++]);break;case Mp.curveTo:r.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case Mp.closePath:r.closePath();break;default:Z(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=r}X.axialAlignedBoundingBox(i,jt(this.ctx),this.current.minMax),this[t](s)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const r=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,zi(i),Pe.STROKE),r){const o=new Path2D;o.addPath(t,i.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Pe.STROKE,jt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const l=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=s.getPattern(i,this,zi(i),Pe.FILL),l){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=u}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),o&&i.restore(),e&&this.consumePath(t,a)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=B4}eoClip(){this.pendingClip=HS}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const i=new Path2D,s=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:u}of t)u&&i.addPath(u,new DOMMatrix(r).preMultiplySelf(s).translate(o,a).scale(l,-l));e.clip(i),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||Rv,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Z("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=((h=i.systemFontInfo)==null?void 0:h.css)||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let u=e;e<jS?u=jS:e>FS&&(u=FS),this.current.fontSizeScale=e/u,this.ctx.font=`${l} ${a} ${u}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s,r){const o=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,d=u&Oe.FILL_STROKE_MASK,f=!!(u&Oe.ADD_TO_PATH_FLAG),p=a.patternFill&&!l.missingFile,y=a.patternStroke&&!l.missingFile;let x;if((l.disableFontFace||f||p||y)&&!l.missingFile&&(x=l.getPathGenerator(this.commonObjs,t)),x&&(l.disableFontFace||p||y)){o.save(),o.translate(e,i),o.scale(h,-h);let A;if((d===Oe.FILL||d===Oe.FILL_STROKE)&&(s?(A=o.getTransform(),o.setTransform(...s),o.fill(E(this,Oi,rx).call(this,x,A,s))):o.fill(x)),d===Oe.STROKE||d===Oe.FILL_STROKE)if(r){A||(A=o.getTransform()),o.setTransform(...r);const{a:m,b:w,c:b,d:C}=A,k=X.inverseTransform(r),_=X.transform([m,w,b,C,0,0],k);X.singularValueDecompose2dScale(_,Bn),o.lineWidth*=Math.max(Bn[0],Bn[1])/h,o.stroke(E(this,Oi,rx).call(this,x,A,r))}else o.lineWidth/=h,o.stroke(x);o.restore()}else(d===Oe.FILL||d===Oe.FILL_STROKE)&&o.fillText(t,e,i),(d===Oe.STROKE||d===Oe.FILL_STROKE)&&o.strokeText(t,e,i);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:jt(o),x:e,y:i,fontSize:h,path:x})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return rt(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,d=t.length,f=i.vertical,p=f?1:-1,y=i.defaultVMetrics,x=s*e.fontMatrix[0],A=e.textRenderingMode===Oe.FILL&&!i.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),u>0?r.scale(h,-1):r.scale(h,1);let m,w;if(e.patternFill){r.save();const T=e.fillColor.getPattern(r,this,zi(r),Pe.FILL);m=jt(r),r.restore(),r.fillStyle=T}if(e.patternStroke){r.save();const T=e.strokeColor.getPattern(r,this,zi(r),Pe.STROKE);w=jt(r),r.restore(),r.strokeStyle=T}let b=e.lineWidth;const C=e.textMatrixScale;if(C===0||b===0){const T=e.textRenderingMode&Oe.FILL_STROKE_MASK;(T===Oe.STROKE||T===Oe.FILL_STROKE)&&(b=this.getSinglePixelWidth())}else b/=C;if(o!==1&&(r.scale(o,o),b/=o),r.lineWidth=b,i.isInvalidPDFjsFont){const T=[];let M=0;for(const R of t)T.push(R.unicode),M+=R.width;r.fillText(T.join(""),0,0),e.x+=M*x*h,r.restore(),this.compose();return}let k=0,_;for(_=0;_<d;++_){const T=t[_];if(typeof T=="number"){k+=p*T*s/1e3;continue}let M=!1;const R=(T.isSpace?l:0)+a,N=T.fontChar,I=T.accent;let et,lt,J=T.width;if(f){const $=T.vmetric||y,O=-(T.vmetric?$[1]:J*.5)*x,F=$[2]*x;J=$?-$[0]:J,et=O/o,lt=(k+F)/o}else et=k/o,lt=0;if(i.remeasure&&J>0){const $=r.measureText(N).width*1e3/s*o;if(J<$&&this.isFontSubpixelAAEnabled){const O=J/$;M=!0,r.save(),r.scale(O,1),et/=O}else J!==$&&(et+=(J-$)/2e3*s/o)}if(this.contentVisible&&(T.isInFont||i.missingFile)){if(A&&!I)r.fillText(N,et,lt);else if(this.paintChar(N,et,lt,m,w),I){const $=et+s*I.offset.x/o,O=lt-s*I.offset.y/o;this.paintChar(I.fontChar,$,O,m,w)}}const Yt=f?J*x-R*u:J*x+R*u;k+=Yt,M&&r.restore()}f?e.y-=k:e.x+=k*h,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||Rv,f=t.length,p=i.textRenderingMode===Oe.INVISIBLE;let y,x,A,m;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),i.textMatrix&&e.transform(...i.textMatrix),e.translate(i.x,i.y+i.textRise),e.scale(h,o),y=0;y<f;++y){if(x=t[y],typeof x=="number"){m=a*x*r/1e3,this.ctx.translate(m,0),i.x+=m*h;continue}const w=(x.isSpace?u:0)+l,b=s.charProcOperatorList[x.operatorListId];b?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(b),this.restore()):Z(`Type3 character "${x.operatorListId}" is not available.`);const C=[x.width,0];X.applyTransform(C,d),A=C[0]*r+w,e.translate(A,0),i.x+=A*h}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,r,o){const a=new Path2D;a.rect(i,s,r-i,o-s),this.ctx.clip(a),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=this.baseTransform||jt(this.ctx),s={createCanvasGraphics:r=>new Hw(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new nx(t,this.ctx,s,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=N4(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,zi(e),Pe.SHADING);const s=zi(e);if(s){const{width:r,height:o}=e.canvas,a=Zl.slice();X.axialAlignedBoundingBox([0,0,r,o],s,a);const[l,u,h,d]=a;this.ctx.fillRect(l,u,h-l,d-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){bt("Should not call beginInlineImage")}beginImageData(){bt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=jt(this.ctx),e)){X.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[i,s,r,o]=e,a=new Path2D;a.rect(i,s,r-i,o-s),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||h0("TODO: Support non-isolated groups."),t.knockout&&Z("Knockout groups not supported.");const i=jt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=Zl.slice();X.axialAlignedBoundingBox(t.bbox,jt(e),s);const r=[0,0,e.canvas.width,e.canvas.height];s=X.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,l,u),f=d.context;f.translate(-o,-a),f.transform(...i);let p=new Path2D;const[y,x,A,m]=t.bbox;if(p.rect(y,x,A-y,m-x),t.matrix){const w=new Path2D;w.addPath(p,new DOMMatrix(t.matrix)),p=w}f.clip(p),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Xu(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=jt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=Zl.slice();X.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,i,s,r){if(E(this,Oi,ix).call(this),Dp(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a,X.singularValueDecompose2dScale(jt(this.ctx),Bn);const{viewportScale:l}=this,u=Math.ceil(o*this.outputScaleX*l),h=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(u,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(Bn[0],0,0,-Bn[1],0,a*Bn[1]),Dp(this.ctx)}else{Dp(this.ctx),this.endPath();const l=new Path2D;l.rect(e[0],e[1],o,a),this.ctx.clip(l)}}this.current=new BS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,Oi,sx).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this._createMaskCanvas(t),r=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(r,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=jt(a);a.transform(e,i,s,r,0,0);const u=this._createMaskCanvas(t);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,d=o.length;h<d;h+=2){const f=X.transform(l,[e,i,s,r,o[h],o[h+1]]);a.drawImage(u.canvas,f[4],f[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:o,width:a,height:l,transform:u}=r,h=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=h.context;d.save();const f=this.getObject(o,r);VS(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?i.getPattern(d,this,zi(e),Pe.FILL):i,d.fillRect(0,0,a,l),d.restore(),e.save(),e.transform(...u),e.scale(1,-1),Ip(e,h.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Z("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){Z("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let u=0,h=s.length;u<h;u+=2)l.push({transform:[e,0,0,i,s[u],s[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;this.save();const{filter:r}=s;r!=="none"&&r!==""&&(s.filter="none"),s.scale(1/e,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,i).context;zS(u,t),o=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(o,zi(s));s.imageSmoothingEnabled=$S(jt(s),t.interpolate),Ip(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,o=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;zS(l,t),s=this.applyTransferMapsToCanvas(l)}for(const r of e)i.save(),i.transform(...r.transform),i.scale(1,-1),Ip(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(i||(this.pendingClip===HS?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=jt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const l=Math.abs(e),u=Math.abs(r);if(l===u)if(t===0)o=a=1/l;else{const h=l*t;o=a=h<1?1/h:1}else if(t===0)o=1/l,a=1/u;else{const h=l*t,d=u*t;o=h<1?1/h:1,a=d<1?1/d:1}}else{const l=Math.abs(e*r-i*s),u=Math.hypot(e,i),h=Math.hypot(s,r);if(t===0)o=h/l,a=u/l;else{const d=t*l;o=h>d?h/d:1,a=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){i.lineWidth=(s||1)*r,i.stroke(t);return}const a=i.getLineDash();e&&i.save(),i.scale(r,o),fy.a=1/r,fy.d=1/o;const l=new Path2D;if(l.addPath(t,fy),a.length>0){const u=Math.max(r,o);i.setLineDash(a.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(l),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Oi=new WeakSet,ix=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},sx=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},rx=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let lc=Hw;for(const n in hg)lc.prototype[n]!==void 0&&(lc.prototype[hg[n]]=lc.prototype[n]);var jd,Fd;class Li{static get workerPort(){return c(this,jd)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");v(this,jd,t)}static get workerSrc(){return c(this,Fd)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");v(this,Fd,t)}}jd=new WeakMap,Fd=new WeakMap,S(Li,jd,null),S(Li,Fd,"");var Mc,Od;class z4{constructor({parsedData:t,rawData:e}){S(this,Mc);S(this,Od);v(this,Mc,t),v(this,Od,e)}getRaw(){return c(this,Od)}get(t){return c(this,Mc).get(t)??null}[Symbol.iterator](){return c(this,Mc).entries()}}Mc=new WeakMap,Od=new WeakMap;const Nl=Symbol("INTERNAL");var Bd,zd,Vd,Rc;class V4{constructor(t,{name:e,intent:i,usage:s,rbGroups:r}){S(this,Bd,!1);S(this,zd,!1);S(this,Vd,!1);S(this,Rc,!0);v(this,Bd,!!(t&Fn.DISPLAY)),v(this,zd,!!(t&Fn.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(c(this,Vd))return c(this,Rc);if(!c(this,Rc))return!1;const{print:t,view:e}=this.usage;return c(this,Bd)?(e==null?void 0:e.viewState)!=="OFF":c(this,zd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Nl&&bt("Internal method `_setVisible` called."),v(this,Vd,i),v(this,Rc,e)}}Bd=new WeakMap,zd=new WeakMap,Vd=new WeakMap,Rc=new WeakMap;var Kr,xt,Nc,Lc,$d,ox;class $4{constructor(t,e=Fn.DISPLAY){S(this,$d);S(this,Kr,null);S(this,xt,new Map);S(this,Nc,null);S(this,Lc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,v(this,Lc,t.order);for(const i of t.groups)c(this,xt).set(i.id,new V4(e,i));if(t.baseState==="OFF")for(const i of c(this,xt).values())i._setVisible(Nl,!1);for(const i of t.on)c(this,xt).get(i)._setVisible(Nl,!0);for(const i of t.off)c(this,xt).get(i)._setVisible(Nl,!1);v(this,Nc,this.getHash())}}isVisible(t){if(c(this,xt).size===0)return!0;if(!t)return h0("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,xt).has(t.id)?c(this,xt).get(t.id).visible:(Z(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return E(this,$d,ox).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,xt).has(e))return Z(`Optional content group not found: ${e}`),!0;if(c(this,xt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,xt).has(e))return Z(`Optional content group not found: ${e}`),!0;if(!c(this,xt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,xt).has(e))return Z(`Optional content group not found: ${e}`),!0;if(!c(this,xt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,xt).has(e))return Z(`Optional content group not found: ${e}`),!0;if(c(this,xt).get(e).visible)return!1}return!0}return Z(`Unknown optional content policy ${t.policy}.`),!0}return Z(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var r;const s=c(this,xt).get(t);if(!s){Z(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==t&&((r=c(this,xt).get(a))==null||r._setVisible(Nl,!1,!0));s._setVisible(Nl,!!e,!0),v(this,Kr,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=c(this,xt).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}v(this,Kr,null)}get hasInitialVisibility(){return c(this,Nc)===null||this.getHash()===c(this,Nc)}getOrder(){return c(this,xt).size?c(this,Lc)?c(this,Lc).slice():[...c(this,xt).keys()]:null}getGroup(t){return c(this,xt).get(t)||null}getHash(){if(c(this,Kr)!==null)return c(this,Kr);const t=new tT;for(const[e,i]of c(this,xt))t.update(`${e}:${i.visible}`);return v(this,Kr,t.hexdigest())}[Symbol.iterator](){return c(this,xt).entries()}}Kr=new WeakMap,xt=new WeakMap,Nc=new WeakMap,Lc=new WeakMap,$d=new WeakSet,ox=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=E(this,$d,ox).call(this,r);else if(c(this,xt).has(r))o=c(this,xt).get(r).visible;else return Z(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class H4{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ne(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),t.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(i),!0)});ne(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,r;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ne(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new U4(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new W4(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class U4{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=Lw(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class W4{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function G4(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=a(e);return h=unescape(h),h=l(h),h=u(h),r(h)}if(e=o(n),e){const h=u(e);return r(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=a(e);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),p=Jf(d);d=f.decode(p),t=!1}catch{}}return d}function r(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const p=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(h))!==null;){let[,x,A,m]=f;if(x=parseInt(x,10),x in d){if(x===0)break;continue}d[x]=[A,m]}const y=[];for(let x=0;x<d.length&&x in d;++x){let[A,m]=d[x];m=a(m),A&&(m=unescape(m),x===0&&(m=l(m))),y.push(m)}return y.join("")}function a(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function l(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),y=h.slice(d+1).replace(/^[^']*'/,"");return s(f,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,A){return String.fromCharCode(parseInt(A,16))}),s(f,y);try{y=atob(y)}catch{}return s(f,y)})}return""}function dT(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function p0(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function fT({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function pT(n){const t=n.get("Content-Disposition");if(t){let e=G4(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Lw(e))return e}return null}function ip(n,t){return new dg(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function mT(n){return n===200||n===206}function gT(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function yT(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Z(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class X4{constructor(t){j(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=dT(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ne(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new K4(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new q4(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class K4{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,gT(i,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=p0(r.url),!mT(r.status))throw ip(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=fT({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=pT(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Io("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:yT(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class q4{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${i-1}`);const o=s.url;fetch(o,gT(r,this._withCredentials,this._abortController)).then(a=>{const l=p0(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!mT(a.status))throw ip(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:yT(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const py=200,my=206;function Y4(n){const t=n.response;return typeof t!="string"?t:Jf(t).buffer}class Q4{constructor({url:t,httpHeaders:e,withCredentials:i}){j(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=dT(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=my):s.expectedStatus=py,e.responseType="arraybuffer",ne(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||py;if(!(r===py&&i.expectedStatus===my)&&r!==i.expectedStatus){i.onError(s.status);return}const a=Y4(s);if(r===my){const l=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?i.onDone({begin:parseInt(u[1],10),chunk:a}):(Z('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class Z4{constructor(t){this._source=t,this._manager=new Q4(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ne(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new J4(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new tO(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class J4{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=p0(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=fT({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=pT(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=ip(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tO{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=p0((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=ip(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const eO=/^[a-z][a-z0-9\-+.]+:/i;function nO(n){if(eO.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class iO{constructor(t){this.source=t,this.url=nO(t.url),ne(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ne(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new sO(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new rO(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class sO{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=ip(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Io("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class rO{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ku=Symbol("INITIAL_DATA");var Cn,Hd,ax;class vT{constructor(){S(this,Hd);S(this,Cn,Object.create(null))}get(t,e=null){if(e){const s=E(this,Hd,ax).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=c(this,Cn)[t];if(!i||i.data===Ku)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=c(this,Cn)[t];return!!e&&e.data!==Ku}delete(t){const e=c(this,Cn)[t];return!e||e.data===Ku?!1:(delete c(this,Cn)[t],!0)}resolve(t,e=null){const i=E(this,Hd,ax).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in c(this,Cn)){const{data:i}=c(this,Cn)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}v(this,Cn,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,Cn)){const{data:e}=c(this,Cn)[t];e!==Ku&&(yield[t,e])}}}Cn=new WeakMap,Hd=new WeakSet,ax=function(t){var e;return(e=c(this,Cn))[t]||(e[t]={...Promise.withResolvers(),data:Ku})};const oO=1e5,US=30;var KS,qr,dn,Ud,Wd,ka,$s,Gd,Xd,_a,Ic,Dc,Yr,jc,Kd,Fc,Ta,qd,Yd,Oc,Pa,Qd,Qr,Bc,wr,xT,wT,lx,Hn,dm,cx,bT,AT;const re=class re{constructor({textContentSource:t,container:e,viewport:i}){S(this,wr);S(this,qr,Promise.withResolvers());S(this,dn,null);S(this,Ud,!1);S(this,Wd,!!((KS=globalThis.FontInspector)!=null&&KS.enabled));S(this,ka,null);S(this,$s,null);S(this,Gd,0);S(this,Xd,0);S(this,_a,null);S(this,Ic,null);S(this,Dc,0);S(this,Yr,0);S(this,jc,Object.create(null));S(this,Kd,[]);S(this,Fc,null);S(this,Ta,[]);S(this,qd,new WeakMap);S(this,Yd,null);var l;if(t instanceof ReadableStream)v(this,Fc,t);else if(typeof t=="object")v(this,Fc,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,dn,v(this,Ic,e)),v(this,Yr,i.scale*ys.pixelRatio),v(this,Dc,i.rotation),v(this,$s,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;v(this,Yd,[1,0,0,-1,-o,a+r]),v(this,Xd,s),v(this,Gd,r),E(l=re,Hn,bT).call(l),vl(e,i),c(this,qr).promise.finally(()=>{c(re,Bc).delete(this),v(this,$s,null),v(this,jc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Le.platform;return rt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,_a).read().then(({value:e,done:i})=>{if(i){c(this,qr).resolve();return}c(this,ka)??v(this,ka,e.lang),Object.assign(c(this,jc),e.styles),E(this,wr,xT).call(this,e.items),t()},c(this,qr).reject)};return v(this,_a,c(this,Fc).getReader()),c(re,Bc).add(this),t(),c(this,qr).promise}update({viewport:t,onBefore:e=null}){var r;const i=t.scale*ys.pixelRatio,s=t.rotation;if(s!==c(this,Dc)&&(e==null||e(),v(this,Dc,s),vl(c(this,Ic),{rotation:s})),i!==c(this,Yr)){e==null||e(),v(this,Yr,i);const o={div:null,properties:null,ctx:E(r=re,Hn,dm).call(r,c(this,ka))};for(const a of c(this,Ta))o.properties=c(this,qd).get(a),o.div=a,E(this,wr,lx).call(this,o)}}cancel(){var e;const t=new Io("TextLayer task cancelled.");(e=c(this,_a))==null||e.cancel(t).catch(()=>{}),v(this,_a,null),c(this,qr).reject(t)}get textDivs(){return c(this,Ta)}get textContentItemsStr(){return c(this,Kd)}static cleanup(){if(!(c(this,Bc).size>0)){c(this,Oc).clear();for(const{canvas:t}of c(this,Pa).values())t.remove();c(this,Pa).clear()}}};qr=new WeakMap,dn=new WeakMap,Ud=new WeakMap,Wd=new WeakMap,ka=new WeakMap,$s=new WeakMap,Gd=new WeakMap,Xd=new WeakMap,_a=new WeakMap,Ic=new WeakMap,Dc=new WeakMap,Yr=new WeakMap,jc=new WeakMap,Kd=new WeakMap,Fc=new WeakMap,Ta=new WeakMap,qd=new WeakMap,Yd=new WeakMap,Oc=new WeakMap,Pa=new WeakMap,Qd=new WeakMap,Qr=new WeakMap,Bc=new WeakMap,wr=new WeakSet,xT=function(t){var s,r;if(c(this,Ud))return;(r=c(this,$s)).ctx??(r.ctx=E(s=re,Hn,dm).call(s,c(this,ka)));const e=c(this,Ta),i=c(this,Kd);for(const o of t){if(e.length>oO){Z("Ignoring additional textDivs for performance reasons."),v(this,Ud,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,dn);v(this,dn,document.createElement("span")),c(this,dn).classList.add("markedContent"),o.id&&c(this,dn).setAttribute("id",`${o.id}`),a.append(c(this,dn))}else o.type==="endMarkedContent"&&v(this,dn,c(this,dn).parentNode);continue}i.push(o.str),E(this,wr,wT).call(this,o)}},wT=function(t){var x;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,Ta).push(e);const s=X.transform(c(this,Yd),t.transform);let r=Math.atan2(s[1],s[0]);const o=c(this,jc)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=c(this,Wd)&&o.fontSubstitution||o.fontFamily;a=re.fontFamilyMap.get(a)||a;const l=Math.hypot(s[2],s[3]),u=l*E(x=re,Hn,AT).call(x,a,o,c(this,ka));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",p=e.style;c(this,dn)===c(this,Ic)?(p.left=`${(100*h/c(this,Xd)).toFixed(2)}%`,p.top=`${(100*d/c(this,Gd)).toFixed(2)}%`):(p.left=`${f}${h.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(c(re,Qr)*l).toFixed(2)}px)`,p.fontFamily=a,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,Wd)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(i.angle=r*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);A!==m&&Math.max(A,m)/Math.min(A,m)>1.5&&(y=!0)}if(y&&(i.canvasWidth=o.vertical?t.height:t.width),c(this,qd).set(e,i),c(this,$s).div=e,c(this,$s).properties=i,E(this,wr,lx).call(this,c(this,$s)),i.hasText&&c(this,dn).append(e),i.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),c(this,dn).append(A)}},lx=function(t){var a;const{div:e,properties:i,ctx:s}=t,{style:r}=e;let o="";if(c(re,Qr)>1&&(o=`scale(${1/c(re,Qr)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=r,{canvasWidth:u,fontSize:h}=i;E(a=re,Hn,cx).call(a,s,h*c(this,Yr),l);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${u*c(this,Yr)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Hn=new WeakSet,dm=function(t=null){let e=c(this,Pa).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Pa).set(t,e),c(this,Qd).set(e,{size:0,family:""})}return e},cx=function(t,e,i){const s=c(this,Qd).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},bT=function(){if(c(this,Qr)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),v(this,Qr,t.getBoundingClientRect().height),t.remove()},AT=function(t,e,i){const s=c(this,Oc).get(t);if(s)return s;const r=E(this,Hn,dm).call(this,i);r.canvas.width=r.canvas.height=US,E(this,Hn,cx).call(this,r,US,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return a?u=a/(a+l):(Le.platform.isFirefox&&Z("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),c(this,Oc).set(t,u),u},S(re,Hn),S(re,Oc,new Map),S(re,Pa,new Map),S(re,Qd,new WeakMap),S(re,Qr,null),S(re,Bc,new Set);let rd=re;class od{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(r){var l;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(od.shouldBuildText(a))(l=r==null?void 0:r.attributes)!=null&&l.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const aO=100;function ST(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new ux,{docId:e}=t,i=n.url?g4(n.url):null,s=n.data?y4(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof ET?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof ad?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!d0(n.docBaseUrl)?n.docBaseUrl:null,p=Np(n.cMapUrl),y=n.cMapPacked!==!1,x=n.CMapReaderFactory||(Ze?C4:NS),A=Np(n.iccUrl),m=Np(n.standardFontDataUrl),w=n.StandardFontDataFactory||(Ze?k4:LS),b=Np(n.wasmUrl),C=n.WasmFactory||(Ze?_4:IS),k=n.stopAtErrors!==!0,_=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,M=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Ze,R=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Ze&&(Le.platform.isFirefox||!globalThis.chrome),N=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:Ze,et=n.fontExtraProperties===!0,lt=n.enableXfa===!0,J=n.ownerDocument||globalThis.document,Yt=n.disableRange===!0,$=n.disableStream===!0,O=n.disableAutoFetch===!0,F=n.pdfBug===!0,W=n.CanvasFactory||(Ze?E4:b4),K=n.FilterFactory||(Ze?S4:A4),ut=n.enableHWA===!0,ot=n.useWasm!==!1,St=l?l.length:n.length??NaN,ln=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Ze&&!I,Xn=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(x===NS&&w===LS&&C===IS&&p&&m&&b&&nh(p,document.baseURI)&&nh(m,document.baseURI)&&nh(b,document.baseURI)),De=null;KF(d);const At={canvasFactory:new W({ownerDocument:J,enableHWA:ut}),filterFactory:new K({docId:e,ownerDocument:J}),cMapReaderFactory:Xn?null:new x({baseUrl:p,isCompressed:y}),standardFontDataFactory:Xn?null:new w({baseUrl:m}),wasmFactory:Xn?null:new C({baseUrl:b})};h||(h=ad.create({verbosity:d,port:Li.workerPort}),t._worker=h);const ju={docId:e,apiVersion:"5.4.54",data:s,password:a,disableAutoFetch:O,rangeChunkSize:u,length:St,docBaseUrl:f,enableXfa:lt,evaluatorOptions:{maxImageSize:_,disableFontFace:I,ignoreErrors:k,isEvalSupported:T,isOffscreenCanvasSupported:M,isImageDecoderSupported:R,canvasMaxAreaInBytes:N,fontExtraProperties:et,useSystemFonts:ln,useWasm:ot,useWorkerFetch:Xn,cMapUrl:p,iccUrl:A,standardFontDataUrl:m,wasmUrl:b}},TP={ownerDocument:J,pdfBug:F,styleElement:De,loadingParams:{disableAutoFetch:O,enableXfa:lt}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const PP=h.messageHandler.sendWithPromise("GetDocRequest",ju,s?[s.buffer]:null);let g0;if(l)g0=new H4(l,{disableRange:Yt,disableStream:$});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const y0=nh(i)?X4:Ze?iO:Z4;g0=new y0({url:i,length:St,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:Yt,disableStream:$})}return PP.then(y0=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Gw=new ah(e,y0,h.port),MP=new uO(Gw,t,g0,TP,At,ut);t._transport=MP,Gw.send("Ready",null)})}).catch(t._capability.reject),t}var Rg;const Ng=class Ng{constructor(){j(this,"_capability",Promise.withResolvers());j(this,"_transport",null);j(this,"_worker",null);j(this,"docId",`d${Ge(Ng,Rg)._++}`);j(this,"destroyed",!1);j(this,"onPassword",null);j(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Rg=new WeakMap,S(Ng,Rg,0);let ux=Ng;var Ma,Zd,Jd,tf,ef;class ET{constructor(t,e,i=!1,s=null){S(this,Ma,Promise.withResolvers());S(this,Zd,[]);S(this,Jd,[]);S(this,tf,[]);S(this,ef,[]);this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){c(this,ef).push(t)}addProgressListener(t){c(this,tf).push(t)}addProgressiveReadListener(t){c(this,Jd).push(t)}addProgressiveDoneListener(t){c(this,Zd).push(t)}onDataRange(t,e){for(const i of c(this,ef))i(t,e)}onDataProgress(t,e){c(this,Ma).promise.then(()=>{for(const i of c(this,tf))i(t,e)})}onDataProgressiveRead(t){c(this,Ma).promise.then(()=>{for(const e of c(this,Jd))e(t)})}onDataProgressiveDone(){c(this,Ma).promise.then(()=>{for(const t of c(this,Zd))t()})}transportReady(){c(this,Ma).resolve()}requestDataRange(t,e){bt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Ma=new WeakMap,Zd=new WeakMap,Jd=new WeakMap,tf=new WeakMap,ef=new WeakMap;class lO{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Hs,Ra,dh;class cO{constructor(t,e,i,s=!1){S(this,Ra);S(this,Hs,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new PS:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new vT,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new ep({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:s="display",annotationMode:r=Mr.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1}){var k,_;(k=this._stats)==null||k.time("Overall");const p=this._transport.getRenderingIntent(s,r,d,f),{renderingIntent:y,cacheKey:x}=p;v(this,Hs,!1),l||(l=this._transport.getOptionalContentConfig(y));let A=this._intentStates.get(x);A||(A=Object.create(null),this._intentStates.set(x,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const m=!!(y&Fn.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_=this._stats)==null||_.time("Page Request"),this._pumpOperatorList(p));const w=T=>{var M;A.renderTasks.delete(b),m&&v(this,Hs,!0),E(this,Ra,dh).call(this),T?(b.capability.reject(T),this._abortOperatorList({intentState:A,reason:T instanceof Error?T:new Error(T)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(M=globalThis.Stats)!=null&&M.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new hx({callback:w,params:{canvas:e,canvasContext:t,viewport:i,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA});(A.renderTasks||(A.renderTasks=new Set)).add(b);const C=b.task;return Promise.all([A.displayReadyCapability.promise,l]).then(([T,M])=>{var R;if(this.destroyed){w();return}if((R=this._stats)==null||R.time("Rendering"),!(M.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:T,optionalContentConfig:M}),b.operatorListChanged()}).catch(w),C}getOperatorList({intent:t="display",annotationMode:e=Mr.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(t,e,i,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>od.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function r(){o.read().then(function({value:l,done:u}){if(u){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},s)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),v(this,Hs,!1),Promise.all(t)}cleanup(t=!1){v(this,Hs,!0);const e=E(this,Ra,dh).call(this);return t&&e&&this._stats&&(this._stats=new PS),e}_startRenderPage(t,e){var s,r;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&E(this,Ra,dh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(e);u.streamReader=l;const h=()=>{l.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();E(this,Ra,dh).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Nw){let s=aO;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Io(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Hs=new WeakMap,Ra=new WeakSet,dh=function(){if(!c(this,Hs)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,Hs,!1),!0};var Zr,Ei,Us,Na,Lg,La,Ia,nn,fm,CT,kT,fh,zc,pm;const Pt=class Pt{constructor({name:t=null,port:e=null,verbosity:i=qF()}={}){S(this,nn);S(this,Zr,Promise.withResolvers());S(this,Ei,null);S(this,Us,null);S(this,Na,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(c(Pt,Ia).has(e))throw new Error("Cannot use more than one PDFWorker per port.");c(Pt,Ia).set(e,this),E(this,nn,CT).call(this,e)}else E(this,nn,kT).call(this)}get promise(){return c(this,Zr).promise}get port(){return c(this,Us)}get messageHandler(){return c(this,Ei)}destroy(){var t,e;this.destroyed=!0,(t=c(this,Na))==null||t.terminate(),v(this,Na,null),c(Pt,Ia).delete(c(this,Us)),v(this,Us,null),(e=c(this,Ei))==null||e.destroy(),v(this,Ei,null)}static create(t){const e=c(this,Ia).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Pt(t)}static get workerSrc(){if(Li.workerSrc)return Li.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return rt(this,"_setupFakeWorkerGlobal",(async()=>c(this,zc,pm)?c(this,zc,pm):(await import(this.workerSrc)).WorkerMessageHandler)())}};Zr=new WeakMap,Ei=new WeakMap,Us=new WeakMap,Na=new WeakMap,Lg=new WeakMap,La=new WeakMap,Ia=new WeakMap,nn=new WeakSet,fm=function(){c(this,Zr).resolve(),c(this,Ei).send("configure",{verbosity:this.verbosity})},CT=function(t){v(this,Us,t),v(this,Ei,new ah("main","worker",t)),c(this,Ei).on("ready",()=>{}),E(this,nn,fm).call(this)},kT=function(){if(c(Pt,La)||c(Pt,zc,pm)){E(this,nn,fh).call(this);return}let{workerSrc:t}=Pt;try{Pt._isSameOrigin(window.location,t)||(t=Pt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new ah("main","worker",e),s=()=>{r.abort(),i.destroy(),e.terminate(),this.destroyed?c(this,Zr).reject(new Error("Worker was destroyed")):E(this,nn,fh).call(this)},r=new AbortController;e.addEventListener("error",()=>{c(this,Na)||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}v(this,Ei,i),v(this,Us,e),v(this,Na,e),E(this,nn,fm).call(this)}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{E(this,nn,fh).call(this)}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{h0("The worker has been disabled.")}E(this,nn,fh).call(this)},fh=function(){c(Pt,La)||(Z("Setting up fake worker."),v(Pt,La,!0)),Pt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){c(this,Zr).reject(new Error("Worker was destroyed"));return}const e=new w4;v(this,Us,e);const i=`fake${Ge(Pt,Lg)._++}`,s=new ah(i+"_worker",i,e);t.setup(s,e),v(this,Ei,new ah(i,i+"_worker",e)),E(this,nn,fm).call(this)}).catch(t=>{c(this,Zr).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},zc=new WeakSet,pm=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},S(Pt,zc),S(Pt,Lg,0),S(Pt,La,!1),S(Pt,Ia,new WeakMap),Ze&&(v(Pt,La,!0),Li.workerSrc||(Li.workerSrc="./pdf.worker.mjs")),Pt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},Pt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Pt.fromPort=t=>{if(a4("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Pt.create(t)};let ad=Pt;var Ws,ts,Vc,$c,Gs,Da,ph;class uO{constructor(t,e,i,s,r,o){S(this,Da);S(this,Ws,new Map);S(this,ts,new Map);S(this,Vc,new Map);S(this,$c,new Map);S(this,Gs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new vT,this.fontLoader=new p4({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return rt(this,"annotationStorage",new Iw)}getRenderingIntent(t,e=Mr.ENABLE,i=null,s=!1,r=!1){let o=Fn.DISPLAY,a=Qv;switch(t){case"any":o=Fn.ANY;break;case"display":break;case"print":o=Fn.PRINT;break;default:Z(`getRenderingIntent - invalid intent: ${t}`)}const l=o&Fn.PRINT&&i instanceof nT?i:this.annotationStorage;switch(e){case Mr.DISABLE:o+=Fn.ANNOTATIONS_DISABLE;break;case Mr.ENABLE:break;case Mr.ENABLE_FORMS:o+=Fn.ANNOTATIONS_FORMS;break;case Mr.ENABLE_STORAGE:o+=Fn.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Z(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=Fn.IS_EDITING),r&&(o+=Fn.OPLIST);const{ids:u,hash:h}=l.modifiedIds,d=[o,a.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=c(this,Gs))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of c(this,ts).values())t.push(s._destroy());c(this,ts).clear(),c(this,Vc).clear(),c(this,$c).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Ws).clear(),this.filterFactory.destroy(),rd.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Io("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{ne(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}ne(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(i,s)=>{ne(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}ne(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new lO(i,this))}),t.on("DocException",i=>{e._capability.reject(cn(i))}),t.on("PasswordRequest",i=>{v(this,Gs,Promise.withResolvers());try{if(!e.onPassword)throw cn(i);const s=r=>{r instanceof Error?c(this,Gs).reject(r):c(this,Gs).resolve({password:r})};e.onPassword(s,i.code)}catch(s){c(this,Gs).reject(s)}return c(this,Gs).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;c(this,ts).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const h=r.error;Z(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,d)=>globalThis.FontInspector.fontAdded(h,d):null,l=new m4(r,a);this.fontLoader.bind(l).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":const{imageRef:u}=r;ne(u,"The imageRef must be defined.");for(const h of c(this,ts).values())for(const[,d]of h.objs)if((d==null?void 0:d.ref)===u)return d.dataLen?(this.commonObjs.resolve(i,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,r,o])=>{var l;if(this.destroyed)return;const a=c(this,ts).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&Z("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=c(this,Vc).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,$c).set(r.refStr,t);const o=new cO(e,r,this,this._params.pdfBug);return c(this,ts).set(e,o),o});return c(this,Vc).set(e,s),s}getPageIndex(t){return Zv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return E(this,Da,ph).call(this,"GetFieldObjects")}hasJSActions(){return E(this,Da,ph).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,Da,ph).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return E(this,Da,ph).call(this,"GetOptionalContentConfig").then(e=>new $4(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,Ws).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new z4(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,Ws).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,ts).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,Ws).clear(),this.filterFactory.destroy(!0),rd.cleanup()}}cachedPageNumber(t){if(!Zv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,$c).get(e)??null}}Ws=new WeakMap,ts=new WeakMap,Vc=new WeakMap,$c=new WeakMap,Gs=new WeakMap,Da=new WeakSet,ph=function(t,e=null){const i=c(this,Ws).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return c(this,Ws).set(t,s),s};var Jr;class hO{constructor(t){S(this,Jr,null);j(this,"onContinue",null);j(this,"onError",null);v(this,Jr,t)}get promise(){return c(this,Jr).capability.promise}cancel(t=0){c(this,Jr).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,Jr).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,Jr);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Jr=new WeakMap;var to,ja;const Qo=class Qo{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:p=!1}){S(this,to,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new hO(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,l;if(this.cancelled)return;if(this._canvas){if(c(Qo,ja).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(Qo,ja).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:r}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new lc(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:i,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var i,s,r;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),c(this,to)&&(window.cancelAnimationFrame(c(this,to)),v(this,to,null)),c(Qo,ja).delete(this._canvas),t||(t=new Nw(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?v(this,to,window.requestAnimationFrame(()=>{v(this,to,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(Qo,ja).delete(this._canvas),this.callback())))}};to=new WeakMap,ja=new WeakMap,S(Qo,ja,new WeakSet);let hx=Qo;const _T="5.4.54",dO="295fb3ec4";var kn,Fa,Hc,le,nf,Uc,Xs,sf,eo,Ci,rf,wt,dx,fx,px,Xo,TT,Cr;const un=class un{constructor({editor:t=null,uiManager:e=null}){S(this,wt);S(this,kn,null);S(this,Fa,null);S(this,Hc);S(this,le,null);S(this,nf,!1);S(this,Uc,!1);S(this,Xs,null);S(this,sf);S(this,eo,null);S(this,Ci,null);var i,s;t?(v(this,Uc,!1),v(this,Xs,t)):v(this,Uc,!0),v(this,Ci,(t==null?void 0:t._uiManager)||e),v(this,sf,c(this,Ci)._eventBus),v(this,Hc,((i=t==null?void 0:t.color)==null?void 0:i.toUpperCase())||((s=c(this,Ci))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),c(un,rf)||v(un,rf,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return rt(this,"_keyboardManager",new np([[["Escape","mac+Escape"],un.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],un.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],un.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],un.prototype._moveToPrevious],[["Home","mac+Home"],un.prototype._moveToBeginning],[["End","mac+End"],un.prototype._moveToEnd]]))}renderButton(){const t=v(this,kn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",c(this,Xs)&&(t.ariaControls=`${c(this,Xs).id}_colorpicker_dropdown`);const e=c(this,Ci)._signal;t.addEventListener("click",E(this,wt,Xo).bind(this),{signal:e}),t.addEventListener("keydown",E(this,wt,px).bind(this),{signal:e});const i=v(this,Fa,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=c(this,Hc),t.append(i),t}renderMainDropdown(){const t=v(this,le,E(this,wt,dx).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===c(this,kn)){E(this,wt,Xo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&E(this,wt,fx).call(this,e,t)}_moveToNext(t){var e,i;if(!c(this,wt,Cr)){E(this,wt,Xo).call(this,t);return}if(t.target===c(this,kn)){(e=c(this,le).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=c(this,le))==null?void 0:e.firstChild)||t.target===c(this,kn)){c(this,wt,Cr)&&this._hideDropdownFromKeyboard();return}c(this,wt,Cr)||E(this,wt,Xo).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!c(this,wt,Cr)){E(this,wt,Xo).call(this,t);return}(e=c(this,le).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,wt,Cr)){E(this,wt,Xo).call(this,t);return}(e=c(this,le).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,le))==null||t.classList.add("hidden"),c(this,kn).ariaExpanded="false",(e=c(this,eo))==null||e.abort(),v(this,eo,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,Uc)){if(!c(this,wt,Cr)){(t=c(this,Xs))==null||t.unselect();return}this.hideDropdown(),c(this,kn).focus({preventScroll:!0,focusVisible:c(this,nf)})}}updateColor(t){if(c(this,Fa)&&(c(this,Fa).style.backgroundColor=t),!c(this,le))return;const e=c(this,Ci).highlightColors.values();for(const i of c(this,le).children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=c(this,kn))==null||t.remove(),v(this,kn,null),v(this,Fa,null),(e=c(this,le))==null||e.remove(),v(this,le,null)}};kn=new WeakMap,Fa=new WeakMap,Hc=new WeakMap,le=new WeakMap,nf=new WeakMap,Uc=new WeakMap,Xs=new WeakMap,sf=new WeakMap,eo=new WeakMap,Ci=new WeakMap,rf=new WeakMap,wt=new WeakSet,dx=function(){const t=document.createElement("div"),e=c(this,Ci)._signal;t.addEventListener("contextmenu",mi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,Xs)&&(t.id=`${c(this,Xs).id}_colorpicker_dropdown`);for(const[i,s]of c(this,Ci).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",c(un,rf)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===c(this,Hc),r.addEventListener("click",E(this,wt,fx).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",E(this,wt,px).bind(this),{signal:e}),t},fx=function(t,e){e.stopPropagation(),c(this,sf).dispatch("switchannotationeditorparams",{source:this,type:ct.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},px=function(t){un._keyboardManager.exec(this,t)},Xo=function(t){if(c(this,wt,Cr)){this.hideDropdown();return}if(v(this,nf,t.detail===0),c(this,eo)||(v(this,eo,new AbortController),window.addEventListener("pointerdown",E(this,wt,TT).bind(this),{signal:c(this,Ci).combinedSignal(c(this,eo))})),c(this,kn).ariaExpanded="true",c(this,le)){c(this,le).classList.remove("hidden");return}const e=v(this,le,E(this,wt,dx).call(this));c(this,kn).append(e)},TT=function(t){var e;(e=c(this,le))!=null&&e.contains(t.target)||this.hideDropdown()},Cr=function(){return c(this,le)&&!c(this,le).classList.contains("hidden")},S(un,rf,null);let gg=un;var es,of,Wc,af;const Zo=class Zo{constructor(t){S(this,es,null);S(this,of,null);S(this,Wc,null);v(this,of,t),v(this,Wc,t._uiManager),c(Zo,af)||v(Zo,af,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,es))return c(this,es);const{editorType:t,colorType:e,colorValue:i}=c(this,of),s=v(this,es,document.createElement("input"));return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",c(Zo,af)[t]),s.addEventListener("input",()=>{c(this,Wc).updateParams(e,s.value)},{signal:c(this,Wc)._signal}),s}update(t){c(this,es)&&(c(this,es).value=t)}destroy(){var t;(t=c(this,es))==null||t.remove(),v(this,es,null)}hideDropdown(){}};es=new WeakMap,of=new WeakMap,Wc=new WeakMap,af=new WeakMap,S(Zo,af,null);let yg=Zo;function WS(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function qu(n){return Math.max(0,Math.min(255,255*n))}class GS{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=qu(t),[t,t,t]}static G_HTML([t]){const e=WS(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(qu)}static RGB_HTML(t){return`#${t.map(WS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[qu(1-Math.min(1,t+s)),qu(1-Math.min(1,i+s)),qu(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,r=1-e,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class fO{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){bt("Abstract method `_createSVG` called.")}}class vg extends fO{_createSVG(t){return document.createElementNS(bs,t)}}class PT{static setupStorage(t,e,i,s,r){const o=s.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{s.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&t.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,u)}a&&r.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){var d,f;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",l=t.div;if(l.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&od.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[p,y,x]=h.at(-1);if(y+1===p.children.length){h.pop();continue}const A=p.children[++h.at(-1)[1]];if(A===null)continue;const{name:m}=A;if(m==="#text"){const b=document.createTextNode(A.value);u.push(b),x.append(b);continue}const w=(d=A==null?void 0:A.attributes)!=null&&d.xmlns?document.createElementNS(A.attributes.xmlns,m):document.createElement(m);if(x.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:e,intent:r,linkService:i}),((f=A.children)==null?void 0:f.length)>0)h.push([A,-1,w]);else if(A.value){const b=document.createTextNode(A.value);a&&od.shouldBuildText(m)&&u.push(b),w.append(b)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const pO=9,wl=new WeakSet,mO=new Date().getTimezoneOffset()*60*1e3;class XS{static create(t){switch(t.data.annotationType){case Zt.LINK:return new Fw(t);case Zt.TEXT:return new gO(t);case Zt.WIDGET:switch(t.data.fieldType){case"Tx":return new yO(t);case"Btn":return t.data.radioButton?new NT(t):t.data.checkBox?new xO(t):new wO(t);case"Ch":return new bO(t);case"Sig":return new vO(t)}return new Cl(t);case Zt.POPUP:return new gx(t);case Zt.FREETEXT:return new FT(t);case Zt.LINE:return new SO(t);case Zt.SQUARE:return new EO(t);case Zt.CIRCLE:return new CO(t);case Zt.POLYLINE:return new OT(t);case Zt.CARET:return new _O(t);case Zt.INK:return new Ow(t);case Zt.POLYGON:return new kO(t);case Zt.HIGHLIGHT:return new BT(t);case Zt.UNDERLINE:return new TO(t);case Zt.SQUIGGLY:return new PO(t);case Zt.STRIKEOUT:return new MO(t);case Zt.STAMP:return new zT(t);case Zt.FILEATTACHMENT:return new RO(t);default:return new qt(t)}}}var Oa,Gc,Ks,lf,mx;const Uw=class Uw{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){S(this,lf);S(this,Oa,null);S(this,Gc,!1);S(this,Ks,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Uw._hasPopupData(this.data)}updateEdited(t){var r;if(!this.container)return;t.rect&&(c(this,Oa)||v(this,Oa,{rect:this.data.rect.slice(0)}));const{rect:e,popup:i}=t;e&&E(this,lf,mx).call(this,e);let s=((r=c(this,Ks))==null?void 0:r.popup)||this.popup;!s&&(i!=null&&i.text)&&(this._createPopup(i),s=c(this,Ks).popup),s&&(s.updateEdited(t),i!=null&&i.deleted&&(s.remove(),v(this,Ks,null),this.popup=null))}resetEdited(){var t;c(this,Oa)&&(E(this,lf,mx).call(this,c(this,Oa).rect),(t=c(this,Ks))==null||t.popup.resetEdited(),v(this,Oa,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof Cl)&&!(this instanceof Fw)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof gx){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,r),r}const{width:a,height:l}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(x>0||A>0){const w=`calc(${x}px * var(--total-scale-factor)) / calc(${A}px * var(--total-scale-factor))`;o.borderRadius=w}else if(this instanceof NT){const w=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case _l.SOLID:o.borderStyle="solid";break;case _l.DASHED:o.borderStyle="dashed";break;case _l.BEVELED:Z("Unimplemented border style: beveled");break;case _l.INSET:Z("Unimplemented border style: inset");break;case _l.UNDERLINE:o.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(v(this,Gc,!0),o.borderColor=X.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}const u=X.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-p)/d}%`;const{rotation:y}=e;return e.hasOwnCanvas||y===0?(o.width=`${100*a/h}%`,o.height=`${100*l/d}%`):this.setRotation(y,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/i}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const r=s.detail[e],o=r[0],a=r.slice(1);s.target.style[i]=GS[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:GS[`${o}_rgb`](a)})};return rt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||i[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,r]of Object.entries(e)){const o=i[s];if(o){const a={detail:{[s]:r},target:t};o(a),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,r]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,A,m,w]=t.subarray(2,6);if(s===x&&r===A&&e===m&&i===w)return}const{style:o}=this.container;let a;if(c(this,Gc)){const{borderColor:x,borderWidth:A}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const l=s-e,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const p=h.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let x=2,A=t.length;x<A;x+=8){const m=t[x],w=t[x+1],b=t[x+2],C=t[x+3],k=h.createElement("rect"),_=(b-e)/l,T=(r-w)/u,M=(m-b)/l,R=(w-C)/u;k.setAttribute("x",_),k.setAttribute("y",T),k.setAttribute("width",M),k.setAttribute("height",R),p.append(k),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${T}" width="${M}" height="${R}"/>`)}c(this,Gc)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(t=null){const{data:e}=this;let i,s;t?(i={str:t.text},s=t.date):(i=e.contentsObj,s=e.modificationDate);const r=v(this,Ks,new gx({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}get hasPopupElement(){return!!(c(this,Ks)||this.popup||this.data.popupRef)}render(){bt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===e)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!wl.has(u)){Z(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&wl.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Oa=new WeakMap,Gc=new WeakMap,Ks=new WeakMap,lf=new WeakSet,mx=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+l)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let qt=Uw;var zn,Ko,MT,RT;class Fw extends qt{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});S(this,zn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(E(this,zn,MT).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(E(this,zn,RT).call(this,s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,i,s=""){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&E(this,zn,Ko).call(this),s&&(e.title=s)}_bindNamedAction(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(e.title=s),E(this,zn,Ko).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}i.overlaidText&&(e.title=i.overlaidText),e.onclick||(e.onclick=()=>!1),E(this,zn,Ko).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),E(this,zn,Ko).call(this),!this._fieldObjects){Z('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:a}=i,l=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const y=this._fieldObjects[p]||[];for(const{id:x}of y)f.add(x)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===a&&l.push(y)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,h=[];for(const f of l){const{id:p}=f;switch(h.push(p),f.type){case"text":{const x=f.defaultValue||"";u.setValue(p,{value:x});break}case"checkbox":case"radiobutton":{const x=f.defaultValue===f.exportValues;u.setValue(p,{value:x});break}case"combobox":case"listbox":{const x=f.defaultValue||"";u.setValue(p,{value:x});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!wl.has(y)){Z(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}zn=new WeakSet,Ko=function(){this.container.setAttribute("data-internal-link","")},MT=function(e,i,s="",r=null){e.href=this.linkService.getAnchorUrl(""),i.description?e.title=i.description:s&&(e.title=s),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},E(this,zn,Ko).call(this)},RT=function(e,i,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(e.title=s),E(this,zn,Ko).call(this)};class gO extends qt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Cl extends qt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Le.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,r){i.includes("mouse")?t.addEventListener(i,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{var a;if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,i,s){var r,o,a;for(const[l,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":X.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||pO,r=t.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(ly*s))||1,d=u/h;o=Math.min(s,l(d/ly))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(u/ly))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=X.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class yO extends Cl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),wl.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:p}=this.data,y=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(i,"value",A.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",A=>{const m=this.data.defaultFieldValue??"";i.value=h.userValue=m,h.formattedValue=null});let x=A=>{const{formattedValue:m}=h;m!=null&&(A.target.value=m),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",m=>{var b;if(h.focused)return;const{target:w}=m;if(y&&(w.type=f,p&&(w.step=p)),h.userValue){const C=h.userValue;if(y)if(f==="time"){const k=new Date(C),_=[k.getHours(),k.getMinutes(),k.getSeconds()];w.value=_.map(T=>T.toString().padStart(2,"0")).join(":")}else w.value=new Date(C-mO).toISOString().split(f==="date"?"T":".",1)[0];else w.value=C}h.lastCommittedValue=w.value,h.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const w={value(b){h.userValue=b.detail.value??"",y||t.setValue(e,{value:h.userValue.toString()}),b.target.value=h.userValue},formattedValue(b){const{formattedValue:C}=b.detail;h.formattedValue=C,C!=null&&b.target!==document.activeElement&&(b.target.value=C);const k={formattedValue:C};y&&(k.value=C),t.setValue(e,k)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var T;const{charLimit:C}=b.detail,{target:k}=b;if(C===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",C);let _=h.userValue;!_||_.length<=C||(_=_.slice(0,C),k.value=h.userValue=_,t.setValue(e,{value:_}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(w,m)}),i.addEventListener("keydown",m=>{var C;h.commitKey=1;let w=-1;if(m.key==="Escape"?w=0:m.key==="Enter"&&!this.data.multiLine?w=2:m.key==="Tab"&&(h.commitKey=3),w===-1)return;const{value:b}=m.target;h.lastCommittedValue!==b&&(h.lastCommittedValue=b,h.userValue=b,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:w,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const A=x;x=null,i.addEventListener("blur",m=>{var C,k;if(!h.focused||!m.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(h.focused=!1);const{target:w}=m;let{value:b}=w;if(y){if(b&&f==="time"){const _=b.split(":").map(T=>parseInt(T,10));b=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),w.step=""}else b=new Date(b).valueOf();w.type="text"}h.userValue=b,h.lastCommittedValue!==b&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:b,willCommit:!0,commitKey:h.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),A(m)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",m=>{var R;h.lastCommittedValue=null;const{data:w,target:b}=m,{value:C,selectionStart:k,selectionEnd:_}=b;let T=k,M=_;switch(m.inputType){case"deleteWordBackward":{const N=C.substring(0,k).match(/\w*[^\w]*$/);N&&(T-=N[0].length);break}case"deleteWordForward":{const N=C.substring(k).match(/^[^\w]*\w*/);N&&(M+=N[0].length);break}case"deleteContentBackward":k===_&&(T-=1);break;case"deleteContentForward":k===_&&(M+=1);break}m.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:w||"",willCommit:!1,selStart:T,selEnd:M}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(x&&i.addEventListener("blur",x),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class vO extends Cl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class xO extends Cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return wl.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i)){const h=l&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class NT extends Cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(wl.add(r),r.setAttribute("data-element-id",i),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wO extends Fw{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class bO extends Cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");wl.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=h=>{const d=h?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=a(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const x of s.options)x.selected=y.has(x.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,y=f.detail.remove;p[y].selected=!1,s.remove(y),p.length>0&&Array.prototype.findIndex.call(p,A=>A.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:y,exportValue:x}=f.detail.insert,A=s.children[p],m=document.createElement("option");m.textContent=y,m.value=x,A?A.before(m):s.append(m),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const y of p){const{displayValue:x,exportValue:A}=y,m=document.createElement("option");m.textContent=x,m.value=A,s.append(m)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var p;const d=a(!0),f=a(!1);t.setValue(e,{value:d}),h.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class gx extends qt{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:qt._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new AO({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${Rw}${s}`).join(",")),this.container}}var Xc,Ig,Dg,Kc,qc,$t,qs,no,Yc,cf,Qc,ns,_n,io,Ys,uf,Qs,Zc,Ba,so,pt,mm,gm,yx,LT,IT,DT,jT,ym,vm,vx;class AO{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:u,parentRect:h,open:d}){S(this,pt);S(this,Xc,E(this,pt,DT).bind(this));S(this,Ig,E(this,pt,vx).bind(this));S(this,Dg,E(this,pt,vm).bind(this));S(this,Kc,E(this,pt,ym).bind(this));S(this,qc,null);S(this,$t,null);S(this,qs,null);S(this,no,null);S(this,Yc,null);S(this,cf,null);S(this,Qc,null);S(this,ns,!1);S(this,_n,null);S(this,io,null);S(this,Ys,null);S(this,uf,null);S(this,Qs,null);S(this,Zc,null);S(this,Ba,null);S(this,so,!1);v(this,$t,t),v(this,Zc,s),v(this,qs,o),v(this,Qs,a),v(this,cf,l),v(this,qc,e),v(this,uf,u),v(this,Qc,h),v(this,Yc,i),v(this,no,fg.toDateObject(r)),this.trigger=i.flatMap(f=>f.getElementsToTriggerPopup()),E(this,pt,mm).call(this),c(this,$t).hidden=!0,d&&E(this,pt,ym).call(this)}render(){var s;if(c(this,_n))return;const t=v(this,_n,document.createElement("div"));if(t.className="popup",c(this,qc)){const r=t.style.outlineColor=X.makeHexColor(...c(this,qc));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(s=c(this,Zc))!=null&&s.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=c(this,Zc)}if(t.append(e),c(this,no)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,no).valueOf()})),r.dateTime=c(this,no).toISOString(),e.append(r)}const i=c(this,pt,gm);if(i)PT.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,qs));t.append(r)}c(this,$t).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popup:e,deleted:i}){var s;if(i||e!=null&&e.deleted){this.remove();return}E(this,pt,mm).call(this),c(this,Ba)||v(this,Ba,{contentsObj:c(this,qs),richText:c(this,Qs)}),t&&v(this,Ys,null),e&&(v(this,Qs,E(this,pt,IT).call(this,e.text)),v(this,no,fg.toDateObject(e.date)),v(this,qs,null)),(s=c(this,_n))==null||s.remove(),v(this,_n,null)}resetEdited(){var t;c(this,Ba)&&({contentsObj:Ge(this,qs)._,richText:Ge(this,Qs)._}=c(this,Ba),v(this,Ba,null),(t=c(this,_n))==null||t.remove(),v(this,_n,null),v(this,Ys,null))}remove(){var t,e;(t=c(this,io))==null||t.abort(),v(this,io,null),(e=c(this,_n))==null||e.remove(),v(this,_n,null),v(this,so,!1),v(this,ns,!1);for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){v(this,so,this.isVisible),c(this,so)&&(c(this,$t).hidden=!0)}maybeShow(){E(this,pt,mm).call(this),c(this,so)&&(c(this,_n)||E(this,pt,vm).call(this),v(this,so,!1),c(this,$t).hidden=!1)}get isVisible(){return c(this,$t).hidden===!1}}Xc=new WeakMap,Ig=new WeakMap,Dg=new WeakMap,Kc=new WeakMap,qc=new WeakMap,$t=new WeakMap,qs=new WeakMap,no=new WeakMap,Yc=new WeakMap,cf=new WeakMap,Qc=new WeakMap,ns=new WeakMap,_n=new WeakMap,io=new WeakMap,Ys=new WeakMap,uf=new WeakMap,Qs=new WeakMap,Zc=new WeakMap,Ba=new WeakMap,so=new WeakMap,pt=new WeakSet,mm=function(){var e;if(c(this,io))return;v(this,io,new AbortController);const{signal:t}=c(this,io);for(const i of this.trigger)i.addEventListener("click",c(this,Kc),{signal:t}),i.addEventListener("mouseenter",c(this,Dg),{signal:t}),i.addEventListener("mouseleave",c(this,Ig),{signal:t}),i.classList.add("popupTriggerArea");for(const i of c(this,Yc))(e=i.container)==null||e.addEventListener("keydown",c(this,Xc),{signal:t})},gm=function(){const t=c(this,Qs),e=c(this,qs);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,Qs).html||null},yx=function(){var t,e,i;return((i=(e=(t=c(this,pt,gm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},LT=function(){var t,e,i;return((i=(e=(t=c(this,pt,gm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},IT=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:c(this,pt,LT),fontSize:c(this,pt,yx)?`calc(${c(this,pt,yx)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return i},DT=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,ns))&&E(this,pt,ym).call(this)},jT=function(){if(c(this,Ys)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:r}}}=c(this,cf);let o=!!c(this,Qc),a=o?c(this,Qc):c(this,uf);for(const y of c(this,Yc))if(!a||X.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=X.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),h=o?a[2]-a[0]+5:0,d=l[0]+h,f=l[1];v(this,Ys,[100*(d-s)/e,100*(f-r)/i]);const{style:p}=c(this,$t);p.left=`${c(this,Ys)[0]}%`,p.top=`${c(this,Ys)[1]}%`},ym=function(){v(this,ns,!c(this,ns)),c(this,ns)?(E(this,pt,vm).call(this),c(this,$t).addEventListener("click",c(this,Kc)),c(this,$t).addEventListener("keydown",c(this,Xc))):(E(this,pt,vx).call(this),c(this,$t).removeEventListener("click",c(this,Kc)),c(this,$t).removeEventListener("keydown",c(this,Xc)))},vm=function(){c(this,_n)||this.render(),this.isVisible?c(this,ns)&&c(this,$t).classList.add("focused"):(E(this,pt,jT).call(this),c(this,$t).hidden=!1,c(this,$t).style.zIndex=parseInt(c(this,$t).style.zIndex)+1e3)},vx=function(){c(this,$t).classList.remove("focused"),!(c(this,ns)||!this.isVisible)&&(c(this,$t).hidden=!0,c(this,$t).style.zIndex=parseInt(c(this,$t).style.zIndex)-1e3)};class FT extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Q.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var hf;class SO extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,hf,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=v(this,hf,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,hf)}addHighlightArea(){this.container.classList.add("highlightArea")}}hf=new WeakMap;var df;class EO extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,df,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,a=v(this,df,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",i-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,df)}addHighlightArea(){this.container.classList.add("highlightArea")}}df=new WeakMap;var ff;class CO extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,ff,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=e.borderStyle.width,a=v(this,ff,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ff)}addHighlightArea(){this.container.classList.add("highlightArea")}}ff=new WeakMap;var pf;class OT extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,pf,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:r},width:o,height:a}=this;if(!i)return this.container;const l=this.svgFactory.create(o,a,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const p=i[d]-e[0],y=e[3]-i[d+1];u.push(`${p},${y}`)}u=u.join(" ");const h=v(this,pf,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,pf)}addHighlightArea(){this.container.classList.add("highlightArea")}}pf=new WeakMap;class kO extends OT{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class _O extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var mf,za,gf,xx;class Ow extends qt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,gf);S(this,mf,null);S(this,za,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Q.HIGHLIGHT:Q.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:a,width:l,height:u}=E(this,gf,xx).call(this,i,e),h=this.svgFactory.create(l,u,!0),d=v(this,mf,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",a);for(let f=0,p=s.length;f<p;f++){const y=this.svgFactory.createElement(this.svgElementName);c(this,za).push(y),y.setAttribute("points",s[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:r}=e,o=c(this,mf);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let a=0,l=c(this,za).length;a<l;a++)c(this,za)[a].setAttribute("points",s[a].join(","));if(r){const{transform:a,width:l,height:u}=E(this,gf,xx).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return c(this,za)}addHighlightArea(){this.container.classList.add("highlightArea")}}mf=new WeakMap,za=new WeakMap,gf=new WeakSet,xx=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class BT extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Q.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class TO extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class PO extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class MO extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class zT extends qt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Q.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var yf,vf,wx;class RO extends qt{constructor(e){var s;super(e,{isRenderable:!0});S(this,vf);S(this,yf,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",E(this,vf,wx).bind(this)),v(this,yf,s);const{isMac:r}=Le.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&E(this,vf,wx).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return c(this,yf)}addHighlightArea(){this.container.classList.add("highlightArea")}}yf=new WeakMap,vf=new WeakSet,wx=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var xf,Va,ro,wf,Oo,Ax,Sx;const Ww=class Ww{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a}){S(this,Oo);S(this,xf,null);S(this,Va,null);S(this,ro,new Map);S(this,wf,null);this.div=t,v(this,xf,e),v(this,Va,i),v(this,wf,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(this,ro).size>0}async render(t){var o;const{annotations:e}=t,i=this.div;vl(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new vg,annotationStorage:t.annotationStorage||new Iw,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===Zt.POPUP;if(l){const d=s.get(a.id);if(!d)continue;r.elements=d}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const u=XS.create(r);if(!u.isRenderable)continue;if(!l&&a.popupRef){const d=s.get(a.popupRef);d?d.push(u):s.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await E(this,Oo,Ax).call(this,h,a.id,r.elements),u._isEditable&&(c(this,ro).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}E(this,Oo,Sx).call(this)}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new vg,parent:this};for(const s of t){s.borderStyle||(s.borderStyle=Ww._defaultBorderStyle),i.data=s;const r=XS.create(i);if(!r.isRenderable)continue;const o=r.render();await E(this,Oo,Ax).call(this,o,s.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,vl(e,{rotation:t.rotation}),E(this,Oo,Sx).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ro).values())}getEditableAnnotation(t){return c(this,ro).get(t)}static get _defaultBorderStyle(){return rt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:_l.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};xf=new WeakMap,Va=new WeakMap,ro=new WeakMap,wf=new WeakMap,Oo=new WeakSet,Ax=async function(t,e,i){var a,l;const s=t.firstChild||t,r=s.id=`${Rw}${e}`,o=await((a=c(this,wf))==null?void 0:a.getAriaAttributes(r));if(o)for(const[u,h]of o)s.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),(l=c(this,xf))==null||l.moveElementInDOM(this.div,t,s,!1))},Sx=function(){var e;if(!c(this,Va))return;const t=this.div;for(const[i,s]of c(this,Va)){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const a=c(this,ro).get(i);a&&(a._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,r.id,s),a._hasNoCanvas=!1):a.canvas=s)}c(this,Va).clear()};let bx=Ww;const jp=/\r\n?|\n/g;var ni,Tn,bf,$a,Pn,ie,VT,$T,HT,xm,dr,wm,bm,UT,Cx,WT;const Et=class Et extends kt{constructor(e){super({...e,name:"freeTextEditor"});S(this,ie);S(this,ni);S(this,Tn,"");S(this,bf,`${this.id}-editor`);S(this,$a,null);S(this,Pn);j(this,"_colorPicker",null);v(this,ni,e.color||Et._defaultColor||kt._defaultLineColor),v(this,Pn,e.fontSize||Et._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Et.prototype,i=o=>o.isEmpty(),s=xl.TRANSLATE_SMALL,r=xl.TRANSLATE_BIG;return rt(this,"_keyboardManager",new np([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(e,i){kt.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case ct.FREETEXT_SIZE:Et._defaultFontSize=i;break;case ct.FREETEXT_COLOR:Et._defaultColor=i;break}}updateParams(e,i){switch(e){case ct.FREETEXT_SIZE:E(this,ie,VT).call(this,i);break;case ct.FREETEXT_COLOR:E(this,ie,$T).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ct.FREETEXT_SIZE,Et._defaultFontSize],[ct.FREETEXT_COLOR,Et._defaultColor||kt._defaultLineColor]]}get propertiesToUpdate(){return[[ct.FREETEXT_SIZE,c(this,Pn)],[ct.FREETEXT_COLOR,c(this,ni)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new yg(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ct.FREETEXT_COLOR}get colorValue(){return c(this,ni)}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-Et._internalPadding*e,-(Et._internalPadding+c(this,Pn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),v(this,$a,new AbortController);const e=this._uiManager.combinedSignal(c(this,$a));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,bf)),this._isDraggable=!0,(e=c(this,$a))==null||e.abort(),v(this,$a,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,Tn),i=v(this,Tn,E(this,ie,HT).call(this).trimEnd());if(e===i)return;const s=r=>{if(v(this,Tn,r),!r){this.remove();return}E(this,ie,bm).call(this),this._uiManager.rebuild(this),E(this,ie,xm).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),E(this,ie,xm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Et._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,bf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${c(this,Pn)}px * var(--total-scale-factor))`,s.color=c(this,ni),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,d]=this.pageDimensions,[f,p]=this.pageTranslation;let y,x;switch(this.rotation){case 0:y=e+(a[0]-f)/h,x=i+this.height-(a[1]-p)/d;break;case 90:y=e+(a[0]-f)/h,x=i-(a[1]-p)/d,[l,u]=[u,-l];break;case 180:y=e-this.width+(a[0]-f)/h,x=i-(a[1]-p)/d,[l,u]=[-l,-u];break;case 270:y=e+(a[0]-f-this.height*d)/h,x=i+(a[1]-p-this.width*h)/d,[l,u]=[-u,l];break}this.setAt(y*r,x*o,l,u)}else this._moveAfterPaste(e,i);E(this,ie,bm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var y,x,A;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=E(y=Et,dr,Cx).call(y,i.getData("text")||"").replaceAll(jp,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,h=[],d=[];if(l.nodeType===Node.TEXT_NODE){const m=l.parentElement;if(d.push(l.nodeValue.slice(u).replaceAll(jp,"")),m!==this.editorDiv){let w=h;for(const b of this.editorDiv.childNodes){if(b===m){w=d;continue}w.push(E(x=Et,dr,wm).call(x,b))}}h.push(l.nodeValue.slice(0,u).replaceAll(jp,""))}else if(l===this.editorDiv){let m=h,w=0;for(const b of this.editorDiv.childNodes)w++===u&&(m=d),m.push(E(A=Et,dr,wm).call(A,b))}v(this,Tn,`${h.join(`
`)}${r}${d.join(`
`)}`),E(this,ie,bm).call(this);const f=new Range;let p=Math.sumPrecise(h.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const w=m.nodeValue.length;if(p<=w){f.setStart(m,p),f.setEnd(m,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,s){var a;let r=null;if(e instanceof FT){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:d,id:f,popupRef:p,contentsObj:y},textContent:x,textPosition:A,parent:{page:{pageNumber:m}}}=e;if(!x||x.length===0)return null;r=e={annotationType:Q.FREETEXT,color:Array.from(u),fontSize:l,value:x.join(`
`),position:A,pageIndex:m-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(y==null?void 0:y.str)||null}}const o=await super.deserialize(e,i,s);return v(o,Pn,e.fontSize),v(o,ni,X.makeHexColor(...e.color)),v(o,Tn,E(a=Et,dr,Cx).call(a,e.value)),o._initialData=r,e.comment&&o.setCommentData(e.comment),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Et._internalPadding*this.parentScale,s=this.getRect(i,i),r=kt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,ni)),o={annotationType:Q.FREETEXT,color:r,fontSize:c(this,Pn),value:E(this,ie,UT).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),e?(o.isCopy=!0,o):this.annotationElementId&&!E(this,ie,WT).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e),{style:s}=i;s.fontSize=`calc(${c(this,Pn)}px * var(--total-scale-factor))`,s.color=c(this,ni),i.replaceChildren();for(const a of c(this,Tn).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),i.append(l)}const r=Et._internalPadding*this.parentScale,o={rect:this.getRect(r,r)};return o.popup=this.hasEditedComment?this.comment:{text:c(this,Tn)},e.updateEdited(o),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ni=new WeakMap,Tn=new WeakMap,bf=new WeakMap,$a=new WeakMap,Pn=new WeakMap,ie=new WeakSet,VT=function(e){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-c(this,Pn))*this.parentScale),v(this,Pn,r),E(this,ie,xm).call(this)},s=c(this,Pn);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},$T=function(e){const i=r=>{var o;v(this,ni,this.editorDiv.style.color=r),(o=this._colorPicker)==null||o.update(r)},s=c(this,ni);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},HT=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(E(s=Et,dr,wm).call(s,r)),i=r);return e.join(`
`)},xm=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},dr=new WeakSet,wm=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(jp,"")},bm=function(){if(this.editorDiv.replaceChildren(),!!c(this,Tn))for(const e of c(this,Tn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},UT=function(){return c(this,Tn).replaceAll(" "," ")},Cx=function(e){return e.replaceAll(" "," ")},WT=function(e){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((a,l)=>a!==r[l])||e.pageIndex!==o},S(Et,dr),j(Et,"_freeTextDefaultContent",""),j(Et,"_internalPadding",0),j(Et,"_defaultColor",null),j(Et,"_defaultFontSize",10),j(Et,"_type","freetext"),j(Et,"_editorType",Q.FREETEXT);let Ex=Et;class V{toSVGPath(){bt("Abstract method `toSVGPath` must be implemented.")}get box(){bt("Abstract getter `box` must be implemented.")}serialize(t,e){bt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a]*s,o[a+1]=i+t[a+1]*r;return o}static _rescaleAndSwap(t,e,i,s,r,o){o||(o=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)o[a]=e+t[a+1]*s,o[a+1]=i+t[a]*r;return o}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=i+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,r){switch(r){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,r,o){return[(t+5*i)/6,(e+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}j(V,"PRECISION",1e-4);var Mn,ki,Jc,tu,is,st,Ha,Ua,Af,Sf,eu,nu,oo,Ef,jg,Fg,he,mh,GT,XT,KT,qT,YT,QT;const ks=class ks{constructor({x:t,y:e},i,s,r,o,a=0){S(this,he);S(this,Mn);S(this,ki,[]);S(this,Jc);S(this,tu);S(this,is,[]);S(this,st,new Float32Array(18));S(this,Ha);S(this,Ua);S(this,Af);S(this,Sf);S(this,eu);S(this,nu);S(this,oo,[]);v(this,Mn,i),v(this,nu,r*s),v(this,tu,o),c(this,st).set([NaN,NaN,NaN,NaN,t,e],6),v(this,Jc,a),v(this,Sf,c(ks,Ef)*s),v(this,Af,c(ks,Fg)*s),v(this,eu,s),c(this,oo).push(t,e)}isEmpty(){return isNaN(c(this,st)[8])}add({x:t,y:e}){var R;v(this,Ha,t),v(this,Ua,e);const[i,s,r,o]=c(this,Mn);let[a,l,u,h]=c(this,st).subarray(8,12);const d=t-u,f=e-h,p=Math.hypot(d,f);if(p<c(this,Af))return!1;const y=p-c(this,Sf),x=y/p,A=x*d,m=x*f;let w=a,b=l;a=u,l=h,u+=A,h+=m,(R=c(this,oo))==null||R.push(t,e);const C=-m/y,k=A/y,_=C*c(this,nu),T=k*c(this,nu);return c(this,st).set(c(this,st).subarray(2,8),0),c(this,st).set([u+_,h+T],4),c(this,st).set(c(this,st).subarray(14,18),12),c(this,st).set([u-_,h-T],16),isNaN(c(this,st)[6])?(c(this,is).length===0&&(c(this,st).set([a+_,l+T],2),c(this,is).push(NaN,NaN,NaN,NaN,(a+_-i)/r,(l+T-s)/o),c(this,st).set([a-_,l-T],14),c(this,ki).push(NaN,NaN,NaN,NaN,(a-_-i)/r,(l-T-s)/o)),c(this,st).set([w,b,a,l,u,h],6),!this.isEmpty()):(c(this,st).set([w,b,a,l,u,h],6),Math.abs(Math.atan2(b-l,w-a)-Math.atan2(m,A))<Math.PI/2?([a,l,u,h]=c(this,st).subarray(2,6),c(this,is).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/r,((l+h)/2-s)/o),[a,l,w,b]=c(this,st).subarray(14,18),c(this,ki).push(NaN,NaN,NaN,NaN,((w+a)/2-i)/r,((b+l)/2-s)/o),!0):([w,b,a,l,u,h]=c(this,st).subarray(0,6),c(this,is).push(((w+5*a)/6-i)/r,((b+5*l)/6-s)/o,((5*a+u)/6-i)/r,((5*l+h)/6-s)/o,((a+u)/2-i)/r,((l+h)/2-s)/o),[u,h,a,l,w,b]=c(this,st).subarray(12,18),c(this,ki).push(((w+5*a)/6-i)/r,((b+5*l)/6-s)/o,((5*a+u)/6-i)/r,((5*l+h)/6-s)/o,((a+u)/2-i)/r,((l+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,is),e=c(this,ki);if(isNaN(c(this,st)[6])&&!this.isEmpty())return E(this,he,GT).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);E(this,he,KT).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return E(this,he,XT).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,r,o){return new ZT(t,e,i,s,r,o)}getOutlines(){var d;const t=c(this,is),e=c(this,ki),i=c(this,st),[s,r,o,a]=c(this,Mn),l=new Float32Array((((d=c(this,oo))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(c(this,oo)[f]-s)/o,l[f+1]=(c(this,oo)[f+1]-r)/a;if(l[l.length-2]=(c(this,Ha)-s)/o,l[l.length-1]=(c(this,Ua)-r)/a,isNaN(i[6])&&!this.isEmpty())return E(this,he,qT).call(this,l);const u=new Float32Array(c(this,is).length+24+c(this,ki).length);let h=t.length;for(let f=0;f<h;f+=2){if(isNaN(t[f])){u[f]=u[f+1]=NaN;continue}u[f]=t[f],u[f+1]=t[f+1]}h=E(this,he,QT).call(this,u,h);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[f+p],u[h+1]=e[f+p+1],h+=2}return E(this,he,YT).call(this,u,h),this.newFreeDrawOutline(u,l,c(this,Mn),c(this,eu),c(this,Jc),c(this,tu))}};Mn=new WeakMap,ki=new WeakMap,Jc=new WeakMap,tu=new WeakMap,is=new WeakMap,st=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,Af=new WeakMap,Sf=new WeakMap,eu=new WeakMap,nu=new WeakMap,oo=new WeakMap,Ef=new WeakMap,jg=new WeakMap,Fg=new WeakMap,he=new WeakSet,mh=function(){const t=c(this,st).subarray(4,6),e=c(this,st).subarray(16,18),[i,s,r,o]=c(this,Mn);return[(c(this,Ha)+(t[0]-e[0])/2-i)/r,(c(this,Ua)+(t[1]-e[1])/2-s)/o,(c(this,Ha)+(e[0]-t[0])/2-i)/r,(c(this,Ua)+(e[1]-t[1])/2-s)/o]},GT=function(){const[t,e,i,s]=c(this,Mn),[r,o,a,l]=E(this,he,mh).call(this);return`M${(c(this,st)[2]-t)/i} ${(c(this,st)[3]-e)/s} L${(c(this,st)[4]-t)/i} ${(c(this,st)[5]-e)/s} L${r} ${o} L${a} ${l} L${(c(this,st)[16]-t)/i} ${(c(this,st)[17]-e)/s} L${(c(this,st)[14]-t)/i} ${(c(this,st)[15]-e)/s} Z`},XT=function(t){const e=c(this,ki);t.push(`L${e[4]} ${e[5]} Z`)},KT=function(t){const[e,i,s,r]=c(this,Mn),o=c(this,st).subarray(4,6),a=c(this,st).subarray(16,18),[l,u,h,d]=E(this,he,mh).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-i)/r} L${l} ${u} L${h} ${d} L${(a[0]-e)/s} ${(a[1]-i)/r}`)},qT=function(t){const e=c(this,st),[i,s,r,o]=c(this,Mn),[a,l,u,h]=E(this,he,mh).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-i)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-i)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-i)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,c(this,Mn),c(this,eu),c(this,Jc),c(this,tu))},YT=function(t,e){const i=c(this,ki);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},QT=function(t,e){const i=c(this,st).subarray(4,6),s=c(this,st).subarray(16,18),[r,o,a,l]=c(this,Mn),[u,h,d,f]=E(this,he,mh).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l],e),e+=24},S(ks,Ef,8),S(ks,jg,2),S(ks,Fg,c(ks,Ef)+c(ks,jg));let xg=ks;var iu,Wa,Zs,Cf,Rn,kf,Gt,Og,JT;class ZT extends V{constructor(e,i,s,r,o,a){super();S(this,Og);S(this,iu);S(this,Wa,new Float32Array(4));S(this,Zs);S(this,Cf);S(this,Rn);S(this,kf);S(this,Gt);v(this,Gt,e),v(this,Rn,i),v(this,iu,s),v(this,kf,r),v(this,Zs,o),v(this,Cf,a),this.lastPoint=[NaN,NaN],E(this,Og,JT).call(this,a);const[l,u,h,d]=c(this,Wa);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-l)/h,e[f+1]=(e[f+1]-u)/d;for(let f=0,p=i.length;f<p;f+=2)i[f]=(i[f]-l)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const e=[`M${c(this,Gt)[4]} ${c(this,Gt)[5]}`];for(let i=6,s=c(this,Gt).length;i<s;i+=6){if(isNaN(c(this,Gt)[i])){e.push(`L${c(this,Gt)[i+4]} ${c(this,Gt)[i+5]}`);continue}e.push(`C${c(this,Gt)[i]} ${c(this,Gt)[i+1]} ${c(this,Gt)[i+2]} ${c(this,Gt)[i+3]} ${c(this,Gt)[i+4]} ${c(this,Gt)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,r],o){const a=s-e,l=r-i;let u,h;switch(o){case 0:u=V._rescale(c(this,Gt),e,r,a,-l),h=V._rescale(c(this,Rn),e,r,a,-l);break;case 90:u=V._rescaleAndSwap(c(this,Gt),e,i,a,l),h=V._rescaleAndSwap(c(this,Rn),e,i,a,l);break;case 180:u=V._rescale(c(this,Gt),s,i,-a,l),h=V._rescale(c(this,Rn),s,i,-a,l);break;case 270:u=V._rescaleAndSwap(c(this,Gt),s,r,-a,-l),h=V._rescaleAndSwap(c(this,Rn),s,r,-a,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return c(this,Wa)}newOutliner(e,i,s,r,o,a=0){return new xg(e,i,s,r,o,a)}getNewOutline(e,i){const[s,r,o,a]=c(this,Wa),[l,u,h,d]=c(this,iu),f=o*h,p=a*d,y=s*h+l,x=r*d+u,A=this.newOutliner({x:c(this,Rn)[0]*f+y,y:c(this,Rn)[1]*p+x},c(this,iu),c(this,kf),e,c(this,Cf),i??c(this,Zs));for(let m=2;m<c(this,Rn).length;m+=2)A.add({x:c(this,Rn)[m]*f+y,y:c(this,Rn)[m+1]*p+x});return A.getOutlines()}}iu=new WeakMap,Wa=new WeakMap,Zs=new WeakMap,Cf=new WeakMap,Rn=new WeakMap,kf=new WeakMap,Gt=new WeakMap,Og=new WeakSet,JT=function(e){const i=c(this,Gt);let s=i[4],r=i[5];const o=[s,r,s,r];let a=s,l=r;const u=e?Math.max:Math.min;for(let d=6,f=i.length;d<f;d+=6){const p=i[d+4],y=i[d+5];if(isNaN(i[d]))X.pointBoundingBox(p,y,o),l<y?(a=p,l=y):l===y&&(a=u(a,p));else{const x=[1/0,1/0,-1/0,-1/0];X.bezierBoundingBox(s,r,...i.slice(d,d+6),x),X.rectBoundingBox(...x,o),l<x[3]?(a=x[2],l=x[3]):l===x[3]&&(a=u(a,x[2]))}s=p,r=y}const h=c(this,Wa);h[0]=o[0]-c(this,Zs),h[1]=o[1]-c(this,Zs),h[2]=o[2]-o[0]+2*c(this,Zs),h[3]=o[3]-o[1]+2*c(this,Zs),this.lastPoint=[a,l]};var _f,Tf,ao,_i,rn,tP,Am,eP,nP,_x;class kx{constructor(t,e=0,i=0,s=!0){S(this,rn);S(this,_f);S(this,Tf);S(this,ao,[]);S(this,_i,[]);const r=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:y,y:x,width:A,height:m}of t){const w=Math.floor((y-e)/a)*a,b=Math.ceil((y+A+e)/a)*a,C=Math.floor((x-e)/a)*a,k=Math.ceil((x+m+e)/a)*a,_=[w,C,k,!0],T=[b,C,k,!1];c(this,ao).push(_,T),X.rectBoundingBox(w,C,b,k,r)}const l=r[2]-r[0]+2*i,u=r[3]-r[1]+2*i,h=r[0]-i,d=r[1]-i,f=c(this,ao).at(s?-1:-2),p=[f[0],f[2]];for(const y of c(this,ao)){const[x,A,m]=y;y[0]=(x-h)/l,y[1]=(A-d)/u,y[2]=(m-d)/u}v(this,_f,new Float32Array([h,d,l,u])),v(this,Tf,p)}getOutlines(){c(this,ao).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of c(this,ao))e[3]?(t.push(...E(this,rn,_x).call(this,e)),E(this,rn,eP).call(this,e)):(E(this,rn,nP).call(this,e),t.push(...E(this,rn,_x).call(this,e)));return E(this,rn,tP).call(this,t)}}_f=new WeakMap,Tf=new WeakMap,ao=new WeakMap,_i=new WeakMap,rn=new WeakSet,tP=function(t){const e=[],i=new Set;for(const o of t){const[a,l,u]=o;e.push([a,l,o],[a,u,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const l=e[o][2],u=e[o+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,l,u,h,d]=o;i.delete(o);let f=a,p=l;for(r=[a,u],s.push(r);;){let y;if(i.has(h))y=h;else if(i.has(d))y=d;else break;i.delete(y),[a,l,u,h,d]=y,f!==a&&(r.push(f,p,a,p===l?l:u),f=a),p=p===l?u:l}r.push(f,p)}return new NO(s,c(this,_f),c(this,Tf))},Am=function(t){const e=c(this,_i);let i=0,s=e.length-1;for(;i<=s;){const r=i+s>>1,o=e[r][0];if(o===t)return r;o<t?i=r+1:s=r-1}return s+1},eP=function([,t,e]){const i=E(this,rn,Am).call(this,t);c(this,_i).splice(i,0,[t,e])},nP=function([,t,e]){const i=E(this,rn,Am).call(this,t);for(let s=i;s<c(this,_i).length;s++){const[r,o]=c(this,_i)[s];if(r!==t)break;if(r===t&&o===e){c(this,_i).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=c(this,_i)[s];if(r!==t)break;if(r===t&&o===e){c(this,_i).splice(s,1);return}}},_x=function(t){const[e,i,s]=t,r=[[e,i,s]],o=E(this,rn,Am).call(this,s);for(let a=0;a<o;a++){const[l,u]=c(this,_i)[a];for(let h=0,d=r.length;h<d;h++){const[,f,p]=r[h];if(!(u<=f||p<=l)){if(f>=l){if(p>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=l,p>u&&r.push([e,u,p])}}}return r};var Pf,su;class NO extends V{constructor(e,i,s){super();S(this,Pf);S(this,su);v(this,su,e),v(this,Pf,i),this.lastPoint=s}toSVGPath(){const e=[];for(const i of c(this,su)){let[s,r]=i;e.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const a=i[o],l=i[o+1];a===s?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${a}`),s=a)}e.push("Z")}return e.join(" ")}serialize([e,i,s,r],o){const a=[],l=s-e,u=r-i;for(const h of c(this,su)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=e+h[f]*l,d[f+1]=r-h[f+1]*u;a.push(d)}return a}get box(){return c(this,Pf)}get classNamesForOutlining(){return["highlightOutline"]}}Pf=new WeakMap,su=new WeakMap;class Tx extends xg{newFreeDrawOutline(t,e,i,s,r,o){return new LO(t,e,i,s,r,o)}}class LO extends ZT{newOutliner(t,e,i,s,r,o=0){return new Tx(t,e,i,s,r,o)}}var ru,Mf,Js,Ga,Rf,fn,Nf,Lf,Xa,ii,Nn,Ce,ou,tr,$e,au,si,If,tt,Px,Sm,iP,sP,rP,Mx,qo,li,Ll,oP,Em,gh,aP,lP,cP,uP,hP;const mt=class mt extends kt{constructor(e){super({...e,name:"highlightEditor"});S(this,tt);S(this,ru,null);S(this,Mf,0);S(this,Js);S(this,Ga,null);S(this,Rf,null);S(this,fn,null);S(this,Nf,null);S(this,Lf,0);S(this,Xa,null);S(this,ii,null);S(this,Nn,null);S(this,Ce,!1);S(this,ou,null);S(this,tr);S(this,$e,null);S(this,au,"");S(this,si);S(this,If,"");this.color=e.color||mt._defaultColor,v(this,si,e.thickness||mt._defaultThickness),v(this,tr,e.opacity||mt._defaultOpacity),v(this,Js,e.boxes||null),v(this,If,e.methodOfCreation||""),v(this,au,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(v(this,Ce,!0),E(this,tt,Sm).call(this,e),E(this,tt,qo).call(this)):c(this,Js)&&(v(this,ru,e.anchorNode),v(this,Mf,e.anchorOffset),v(this,Nf,e.focusNode),v(this,Lf,e.focusOffset),E(this,tt,Px).call(this),E(this,tt,qo).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=mt.prototype;return rt(this,"_keyboardManager",new np([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Ce)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,si),methodOfCreation:c(this,If)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;kt.initialize(e,i),mt._defaultColor||(mt._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case ct.HIGHLIGHT_COLOR:mt._defaultColor=i;break;case ct.HIGHLIGHT_THICKNESS:mt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return c(this,ou)}updateParams(e,i){switch(e){case ct.HIGHLIGHT_COLOR:E(this,tt,iP).call(this,i);break;case ct.HIGHLIGHT_THICKNESS:E(this,tt,sP).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,mt._defaultColor],[ct.HIGHLIGHT_THICKNESS,mt._defaultThickness]]}get propertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,this.color||mt._defaultColor],[ct.HIGHLIGHT_THICKNESS,c(this,si)||mt._defaultThickness],[ct.HIGHLIGHT_FREE,c(this,Ce)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",v(this,Rf,new gg({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,tt,gh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,E(this,tt,gh).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){E(this,tt,Mx).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,tt,qo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?E(this,tt,Mx).call(this):e&&(E(this,tt,qo).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var r,o,a;const{drawLayer:i}=this.parent;let s;c(this,Ce)?(e=(e-this.rotation+360)%360,s=E(r=mt,li,Ll).call(r,c(this,ii).box,e)):s=E(o=mt,li,Ll).call(o,[this.x,this.y,this.width,this.height],e),i.updateProperties(c(this,Nn),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(c(this,$e),{bbox:E(a=mt,li,Ll).call(a,c(this,fn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();c(this,au)&&(e.setAttribute("aria-label",c(this,au)),e.setAttribute("role","mark")),c(this,Ce)?e.classList.add("free"):this.div.addEventListener("keydown",E(this,tt,oP).bind(this),{signal:this._uiManager._signal});const i=v(this,Xa,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=c(this,Ga);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),M_(this,c(this,Xa),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,$e),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(c(this,$e),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:E(this,tt,Em).call(this,!0);break;case 1:case 3:E(this,tt,Em).call(this,!1);break}}select(){var e;super.select(),c(this,$e)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,$e),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),c(this,$e)&&((e=this.parent)==null||e.drawLayer.updateProperties(c(this,$e),{rootClass:{selected:!1}}),c(this,Ce)||E(this,tt,Em).call(this,!1))}get _mustFixPosition(){return!c(this,Ce)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(c(this,Nn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(c(this,$e),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:r,y:o}){const{x:a,y:l,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=y=>{d.abort(),E(this,li,uP).call(this,e,y)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",te,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",mi,{signal:f}),s.addEventListener("pointermove",E(this,li,cP).bind(this,e),{signal:f}),this._freeHighlight=new Tx({x:r,y:o},[a,l,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var x,A,m,w;let r=null;if(e instanceof BT){const{data:{quadPoints:b,rect:C,rotation:k,id:_,color:T,opacity:M,popupRef:R,contentsObj:N},parent:{page:{pageNumber:I}}}=e;r=e={annotationType:Q.HIGHLIGHT,color:Array.from(T),opacity:M,quadPoints:b,boxes:null,pageIndex:I-1,rect:C.slice(0),rotation:k,annotationElementId:_,id:_,deleted:!1,popupRef:R,comment:(N==null?void 0:N.str)||null}}else if(e instanceof Ow){const{data:{inkLists:b,rect:C,rotation:k,id:_,color:T,borderStyle:{rawWidth:M},popupRef:R,contentsObj:N},parent:{page:{pageNumber:I}}}=e;r=e={annotationType:Q.HIGHLIGHT,color:Array.from(T),thickness:M,inkLists:b,boxes:null,pageIndex:I-1,rect:C.slice(0),rotation:k,annotationElementId:_,id:_,deleted:!1,popupRef:R,comment:(N==null?void 0:N.str)||null}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=e,h=await super.deserialize(e,i,s);h.color=X.makeHexColor(...o),v(h,tr,u||1),l&&v(h,si,e.thickness),h._initialData=r,e.comment&&h.setCommentData(e.comment);const[d,f]=h.pageDimensions,[p,y]=h.pageTranslation;if(a){const b=v(h,Js,[]);for(let C=0;C<a.length;C+=8)b.push({x:(a[C]-p)/d,y:1-(a[C+1]-y)/f,width:(a[C+2]-a[C])/d,height:(a[C+1]-a[C+5])/f});E(x=h,tt,Px).call(x),E(A=h,tt,qo).call(A),h.rotate(h.rotation)}else if(l){v(h,Ce,!0);const b=l[0],C={x:b[0]-p,y:f-(b[1]-y)},k=new Tx(C,[0,0,d,f],1,c(h,si)/2,!0,.001);for(let M=0,R=b.length;M<R;M+=2)C.x=b[M]-p,C.y=f-(b[M+1]-y),k.add(C);const{id:_,clipPathId:T}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);E(m=h,tt,Sm).call(m,{highlightOutlines:k.getOutlines(),highlightId:_,clipPathId:T}),E(w=h,tt,qo).call(w),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=kt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r={annotationType:Q.HIGHLIGHT,color:s,opacity:c(this,tr),thickness:c(this,si),quadPoints:E(this,tt,aP).call(this),outlines:E(this,tt,lP).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:E(this,tt,gh).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(r),this.annotationElementId&&!E(this,tt,hP).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const i={rect:this.getRect(0,0)};return this.hasEditedComment&&(i.popup=this.comment),e.updateEdited(i),null}static canCreateNewEmptyEditor(){return!1}};ru=new WeakMap,Mf=new WeakMap,Js=new WeakMap,Ga=new WeakMap,Rf=new WeakMap,fn=new WeakMap,Nf=new WeakMap,Lf=new WeakMap,Xa=new WeakMap,ii=new WeakMap,Nn=new WeakMap,Ce=new WeakMap,ou=new WeakMap,tr=new WeakMap,$e=new WeakMap,au=new WeakMap,si=new WeakMap,If=new WeakMap,tt=new WeakSet,Px=function(){const e=new kx(c(this,Js),.001);v(this,ii,e.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ii).box;const i=new kx(c(this,Js),.0025,.001,this._uiManager.direction==="ltr");v(this,fn,i.getOutlines());const{lastPoint:s}=c(this,fn);v(this,ou,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Sm=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var d,f;if(v(this,ii,e),v(this,fn,e.getNewOutline(c(this,si)/2+1.5,.0025)),i>=0)v(this,Nn,i),v(this,Ga,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),v(this,$e,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,fn).box,path:{d:c(this,fn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,Nn),{bbox:E(d=mt,li,Ll).call(d,c(this,ii).box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,$e),{bbox:E(f=mt,li,Ll).call(f,c(this,fn).box,p),path:{d:c(this,fn).toSVGPath()}})}const[o,a,l,u]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[p,y]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*y/p,this.height=u*p/y;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*y/p,this.height=u*p/y;break}}const{lastPoint:h}=c(this,fn);v(this,ou,[(h[0]-o)/l,(h[1]-a)/u])},iP=function(e){const i=(o,a)=>{var l,u;this.color=o,v(this,tr,a),(l=this.parent)==null||l.drawLayer.updateProperties(c(this,Nn),{root:{fill:o,"fill-opacity":a}}),(u=c(this,Rf))==null||u.updateColor(o)},s=this.color,r=c(this,tr);this.addCommands({cmd:i.bind(this,e,mt._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},sP=function(e){const i=c(this,si),s=r=>{v(this,si,r),E(this,tt,rP).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},rP=function(e){if(!c(this,Ce))return;E(this,tt,Sm).call(this,{highlightOutlines:c(this,ii).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},Mx=function(){c(this,Nn)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Nn)),v(this,Nn,null),this.parent.drawLayer.remove(c(this,$e)),v(this,$e,null))},qo=function(e=this.parent){c(this,Nn)===null&&({id:Ge(this,Nn)._,clipPathId:Ge(this,Ga)._}=e.drawLayer.draw({bbox:c(this,ii).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":c(this,tr)},rootClass:{highlight:!0,free:c(this,Ce)},path:{d:c(this,ii).toSVGPath()}},!1,!0),v(this,$e,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Ce)},bbox:c(this,fn).box,path:{d:c(this,fn).toSVGPath()}},c(this,Ce))),c(this,Xa)&&(c(this,Xa).style.clipPath=c(this,Ga)))},li=new WeakSet,Ll=function([e,i,s,r],o){switch(o){case 90:return[1-i-r,e,r,s];case 180:return[1-e-s,1-i-r,s,r];case 270:return[i,1-e-s,r,s]}return[e,i,s,r]},oP=function(e){mt._keyboardManager.exec(this,e)},Em=function(e){if(!c(this,ru))return;const i=window.getSelection();e?i.setPosition(c(this,ru),c(this,Mf)):i.setPosition(c(this,Nf),c(this,Lf))},gh=function(){return c(this,Ce)?this.rotation:0},aP=function(){if(c(this,Ce))return null;const[e,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=c(this,Js),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:h,width:d,height:f}of o){const p=u*e+s,y=(1-h)*i+r;a[l]=a[l+4]=p,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=p+d*e,a[l+5]=a[l+7]=y-f*i,l+=8}return a},lP=function(e){return c(this,ii).serialize(e,E(this,tt,gh).call(this))},cP=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},uP=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hP=function(e){const{color:i}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==i[r])},S(mt,li),j(mt,"_defaultColor",null),j(mt,"_defaultOpacity",1),j(mt,"_defaultThickness",12),j(mt,"_type","highlight"),j(mt,"_editorType",Q.HIGHLIGHT),j(mt,"_freeHighlightId",-1),j(mt,"_freeHighlight",null),j(mt,"_freeHighlightClipId","");let wg=mt;var Ka;class dP{constructor(){S(this,Ka,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){c(this,Ka)[t]=e}toSVGProperties(){const t=c(this,Ka);return v(this,Ka,Object.create(null)),{root:t}}reset(){v(this,Ka,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){bt("Not implemented")}}Ka=new WeakMap;var Ln,lu,pe,qa,Ya,lo,co,uo,Qa,dt,Rx,Nx,Lx,yh,fP,Cm,vh,Il;const U=class U extends kt{constructor(e){super(e);S(this,dt);S(this,Ln,null);S(this,lu);j(this,"_colorPicker",null);j(this,"_drawId",null);v(this,lu,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(E(this,dt,Rx).call(this,e),E(this,dt,yh).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){bt("Not implemented")}static get typesMap(){bt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(c(U,pe).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,i[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,i[r]]);return e}_updateProperty(e,i,s){const r=this._drawingOptions,o=r[i],a=l=>{var h,d;r.updateProperty(i,l);const u=c(this,Ln).updateProperty(i,l);u&&E(this,dt,vh).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&((d=this._colorPicker)==null||d.update(l))};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(c(this,Ln).getPathResizingSVGProperties(E(this,dt,Cm).call(this)),{bbox:E(this,dt,Il).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(c(this,Ln).getPathResizedSVGProperties(E(this,dt,Cm).call(this)),{bbox:E(this,dt,Il).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:E(this,dt,Il).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties(c(this,Ln).getPathTranslatedSVGProperties(E(this,dt,Cm).call(this),this.parentDimensions),{bbox:E(this,dt,Il).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,lu)&&(v(this,lu,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){E(this,dt,Lx).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,dt,yh).call(this),E(this,dt,vh).call(this,c(this,Ln).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),E(this,dt,Lx).call(this)):e&&(this._uiManager.addShouldRescale(this),E(this,dt,yh).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,U._mergeSVGProperties({bbox:E(this,dt,Il).call(this)},c(this,Ln).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,dt,vh).call(this,c(this,Ln).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),s}static createDrawerInstance(e,i,s,r,o){bt("Not implemented")}static startDrawing(e,i,s,r){var A;const{target:o,offsetX:a,offsetY:l,pointerId:u,pointerType:h}=r;if(c(U,co)&&c(U,co)!==h)return;const{viewport:{rotation:d}}=e,{width:f,height:p}=o.getBoundingClientRect(),y=v(U,qa,new AbortController),x=e.combinedSignal(y);if(c(U,lo)||v(U,lo,u),c(U,co)??v(U,co,h),window.addEventListener("pointerup",m=>{var w;c(U,lo)===m.pointerId?this._endDraw(m):(w=c(U,uo))==null||w.delete(m.pointerId)},{signal:x}),window.addEventListener("pointercancel",m=>{var w;c(U,lo)===m.pointerId?this._currentParent.endDrawingSession():(w=c(U,uo))==null||w.delete(m.pointerId)},{signal:x}),window.addEventListener("pointerdown",m=>{c(U,co)===m.pointerType&&((c(U,uo)||v(U,uo,new Set)).add(m.pointerId),c(U,pe).isCancellable()&&(c(U,pe).removeLastElement(),c(U,pe).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",mi,{signal:x}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),o.addEventListener("touchmove",m=>{m.timeStamp===c(U,Qa)&&te(m)},{signal:x}),e.toggleDrawing(),(A=i._editorUndoBar)==null||A.hide(),c(U,pe)){e.drawLayer.updateProperties(this._currentDrawId,c(U,pe).startNew(a,l,f,p,d));return}i.updateUIForDefaultProperties(this),v(U,pe,this.createDrawerInstance(a,l,f,p,d)),v(U,Ya,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(c(U,Ya).toSVGProperties(),c(U,pe).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(v(U,Qa,-1),!c(U,pe))return;const{offsetX:i,offsetY:s,pointerId:r}=e;if(c(U,lo)===r){if(((o=c(U,uo))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(U,pe).add(i,s)),v(U,Qa,e.timeStamp),te(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,v(U,pe,null),v(U,Ya,null),v(U,co,null),v(U,Qa,NaN)),c(U,qa)&&(c(U,qa).abort(),v(U,qa,null),v(U,lo,NaN),v(U,uo,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,c(U,pe).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=c(U,pe),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(ct.DRAW_STEP),!c(U,pe).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,a=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(U,pe).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:c(U,Ya),mustBeCommitted:!e});return this._cleanup(!0),a}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,r,o,a){bt("Not implemented")}static async deserialize(e,i,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}=i.viewport,u=this.deserializeDraw(a,l,r,o,this._INNER_MARGIN,e),h=await super.deserialize(e,i,s);return h.createDrawingOptions(e),E(d=h,dt,Rx).call(d,{drawOutlines:u}),E(f=h,dt,yh).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return c(this,Ln).serialize([i,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Ln=new WeakMap,lu=new WeakMap,pe=new WeakMap,qa=new WeakMap,Ya=new WeakMap,lo=new WeakMap,co=new WeakMap,uo=new WeakMap,Qa=new WeakMap,dt=new WeakSet,Rx=function({drawOutlines:e,drawId:i,drawingOptions:s}){v(this,Ln,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=E(this,dt,Nx).call(this,e,this.parent),E(this,dt,vh).call(this,e.box)},Nx=function(e,i){const{id:s}=i.drawLayer.draw(U._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},Lx=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},yh=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,dt,Nx).call(this,c(this,Ln),e)}},fP=function([e,i,s,r]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[i,1-e,s*(a/o),r*(o/a)];case 180:return[1-e,1-i,s,r];case 270:return[1-i,e,s*(a/o),r*(o/a)];default:return[e,i,s,r]}},Cm=function(){const{x:e,y:i,width:s,height:r,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-i,e,s*(o/a),r*(a/o)];case 180:return[1-e,1-i,s,r];case 270:return[i,1-e,s*(o/a),r*(a/o)];default:return[e,i,s,r]}},vh=function(e){if([this.x,this.y,this.width,this.height]=E(this,dt,fP).call(this,e),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()},Il=function(){const{x:e,y:i,width:s,height:r,rotation:o,parentRotation:a,parentDimensions:[l,u]}=this;switch((o*4+a)/90){case 1:return[1-i-r,e,r,s];case 2:return[1-e-s,1-i-r,s,r];case 3:return[i,1-e-s,r,s];case 4:return[e,i-s*(l/u),r*(u/l),s*(l/u)];case 5:return[1-i,e,s*(l/u),r*(u/l)];case 6:return[1-e-r*(u/l),1-i,r*(u/l),s*(l/u)];case 7:return[i-s*(l/u),1-e-r*(u/l),s*(l/u),r*(u/l)];case 8:return[e-s,i-r,s,r];case 9:return[1-i,e-s,r,s];case 10:return[1-e,1-i,s,r];case 11:return[i-r,1-e,r,s];case 12:return[e-r*(u/l),i,r*(u/l),s*(l/u)];case 13:return[1-i-s*(l/u),e-r*(u/l),s*(l/u),r*(u/l)];case 14:return[1-e,1-i-s*(l/u),r*(u/l),s*(l/u)];case 15:return[i,1-e,s*(l/u),r*(u/l)];default:return[e,i,s,r]}},j(U,"_currentDrawId",-1),j(U,"_currentParent",null),S(U,pe,null),S(U,qa,null),S(U,Ya,null),S(U,lo,NaN),S(U,co,null),S(U,uo,null),S(U,Qa,NaN),j(U,"_INNER_MARGIN",3);let bg=U;var ss,me,ge,Za,cu,qe,ke,ri,Ja,tl,el,uu,km;class IO{constructor(t,e,i,s,r,o){S(this,uu);S(this,ss,new Float64Array(6));S(this,me);S(this,ge);S(this,Za);S(this,cu);S(this,qe);S(this,ke,"");S(this,ri,0);S(this,Ja,new sp);S(this,tl);S(this,el);v(this,tl,i),v(this,el,s),v(this,Za,r),v(this,cu,o),[t,e]=E(this,uu,km).call(this,t,e);const a=v(this,me,[NaN,NaN,NaN,NaN,t,e]);v(this,qe,[t,e]),v(this,ge,[{line:a,points:c(this,qe)}]),c(this,ss).set(a,0)}updateProperty(t,e){t==="stroke-width"&&v(this,cu,e)}isEmpty(){return!c(this,ge)||c(this,ge).length===0}isCancellable(){return c(this,qe).length<=10}add(t,e){[t,e]=E(this,uu,km).call(this,t,e);const[i,s,r,o]=c(this,ss).subarray(2,6),a=t-r,l=e-o;return Math.hypot(c(this,tl)*a,c(this,el)*l)<=2?null:(c(this,qe).push(t,e),isNaN(i)?(c(this,ss).set([r,o,t,e],2),c(this,me).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(c(this,ss)[0])&&c(this,me).splice(6,6),c(this,ss).set([i,s,r,o,t,e],0),c(this,me).push(...V.createBezierPoints(i,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(c(this,qe).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,r){v(this,tl,i),v(this,el,s),v(this,Za,r),[t,e]=E(this,uu,km).call(this,t,e);const o=v(this,me,[NaN,NaN,NaN,NaN,t,e]);v(this,qe,[t,e]);const a=c(this,ge).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),c(this,ge).push({line:o,points:c(this,qe)}),c(this,ss).set(o,0),v(this,ri,0),this.toSVGPath(),null}getLastElement(){return c(this,ge).at(-1)}setLastElement(t){return c(this,ge)?(c(this,ge).push(t),v(this,me,t.line),v(this,qe,t.points),v(this,ri,0),{path:{d:this.toSVGPath()}}):c(this,Ja).setLastElement(t)}removeLastElement(){if(!c(this,ge))return c(this,Ja).removeLastElement();c(this,ge).pop(),v(this,ke,"");for(let t=0,e=c(this,ge).length;t<e;t++){const{line:i,points:s}=c(this,ge)[t];v(this,me,i),v(this,qe,s),v(this,ri,0),this.toSVGPath()}return{path:{d:c(this,ke)}}}toSVGPath(){const t=V.svgRound(c(this,me)[4]),e=V.svgRound(c(this,me)[5]);if(c(this,qe).length===2)return v(this,ke,`${c(this,ke)} M ${t} ${e} Z`),c(this,ke);if(c(this,qe).length<=6){const s=c(this,ke).lastIndexOf("M");v(this,ke,`${c(this,ke).slice(0,s)} M ${t} ${e}`),v(this,ri,6)}if(c(this,qe).length===4){const s=V.svgRound(c(this,me)[10]),r=V.svgRound(c(this,me)[11]);return v(this,ke,`${c(this,ke)} L ${s} ${r}`),v(this,ri,12),c(this,ke)}const i=[];c(this,ri)===0&&(i.push(`M ${t} ${e}`),v(this,ri,6));for(let s=c(this,ri),r=c(this,me).length;s<r;s+=6){const[o,a,l,u,h,d]=c(this,me).slice(s,s+6).map(V.svgRound);i.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}return v(this,ke,c(this,ke)+i.join(" ")),v(this,ri,c(this,me).length),c(this,ke)}getOutlines(t,e,i,s){const r=c(this,ge).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),c(this,Ja).build(c(this,ge),t,e,i,c(this,Za),c(this,cu),s),v(this,ss,null),v(this,me,null),v(this,ge,null),v(this,ke,null),c(this,Ja)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ss=new WeakMap,me=new WeakMap,ge=new WeakMap,Za=new WeakMap,cu=new WeakMap,qe=new WeakMap,ke=new WeakMap,ri=new WeakMap,Ja=new WeakMap,tl=new WeakMap,el=new WeakMap,uu=new WeakSet,km=function(t,e){return V._normalizePoint(t,e,c(this,tl),c(this,el),c(this,Za))};var Ye,Df,jf,In,rs,os,hu,du,nl,Me,Ss,pP,mP,gP;class sp extends V{constructor(){super(...arguments);S(this,Me);S(this,Ye);S(this,Df,0);S(this,jf);S(this,In);S(this,rs);S(this,os);S(this,hu);S(this,du);S(this,nl)}build(e,i,s,r,o,a,l){v(this,rs,i),v(this,os,s),v(this,hu,r),v(this,du,o),v(this,nl,a),v(this,jf,l??0),v(this,In,e),E(this,Me,mP).call(this)}get thickness(){return c(this,nl)}setLastElement(e){return c(this,In).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,In).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of c(this,In)){if(e.push(`M${V.svgRound(i[4])} ${V.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${V.svgRound(i[10])} ${V.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,a,l,u,h,d]=i.subarray(s,s+6).map(V.svgRound);e.push(`C${o} ${a} ${l} ${u} ${h} ${d}`)}}return e.join("")}serialize([e,i,s,r],o){const a=[],l=[],[u,h,d,f]=E(this,Me,pP).call(this);let p,y,x,A,m,w,b,C,k;switch(c(this,du)){case 0:k=V._rescale,p=e,y=i+r,x=s,A=-r,m=e+u*s,w=i+(1-h-f)*r,b=e+(u+d)*s,C=i+(1-h)*r;break;case 90:k=V._rescaleAndSwap,p=e,y=i,x=s,A=r,m=e+h*s,w=i+u*r,b=e+(h+f)*s,C=i+(u+d)*r;break;case 180:k=V._rescale,p=e+s,y=i,x=-s,A=r,m=e+(1-u-d)*s,w=i+h*r,b=e+(1-u)*s,C=i+(h+f)*r;break;case 270:k=V._rescaleAndSwap,p=e+s,y=i+r,x=-s,A=-r,m=e+(1-h-f)*s,w=i+(1-u-d)*r,b=e+(1-h)*s,C=i+(1-u)*r;break}for(const{line:_,points:T}of c(this,In))a.push(k(_,p,y,x,A,o?new Array(_.length):null)),l.push(k(T,p,y,x,A,o?new Array(T.length):null));return{lines:a,points:l,rect:[m,w,b,C]}}static deserialize(e,i,s,r,o,{paths:{lines:a,points:l},rotation:u,thickness:h}){const d=[];let f,p,y,x,A;switch(u){case 0:A=V._rescale,f=-e/s,p=i/r+1,y=1/s,x=-1/r;break;case 90:A=V._rescaleAndSwap,f=-i/r,p=-e/s,y=1/r,x=1/s;break;case 180:A=V._rescale,f=e/s+1,p=-i/r,y=-1/s,x=1/r;break;case 270:A=V._rescaleAndSwap,f=i/r+1,p=e/s+1,y=-1/r,x=-1/s;break}if(!a){a=[];for(const w of l){const b=w.length;if(b===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1]]));continue}if(b===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,w[0],w[1],NaN,NaN,NaN,NaN,w[2],w[3]]));continue}const C=new Float32Array(3*(b-2));a.push(C);let[k,_,T,M]=w.subarray(0,4);C.set([NaN,NaN,NaN,NaN,k,_],0);for(let R=4;R<b;R+=2){const N=w[R],I=w[R+1];C.set(V.createBezierPoints(k,_,T,M,N,I),(R-2)*3),[k,_,T,M]=[T,M,N,I]}}}for(let w=0,b=a.length;w<b;w++)d.push({line:A(a[w].map(C=>C??NaN),f,p,y,x),points:A(l[w].map(C=>C??NaN),f,p,y,x)});const m=new this.prototype.constructor;return m.build(d,s,r,1,u,h,o),m}get box(){return c(this,Ye)}updateProperty(e,i){return e==="stroke-width"?E(this,Me,gP).call(this,i):null}updateParentDimensions([e,i],s){const[r,o]=E(this,Me,Ss).call(this);v(this,rs,e),v(this,os,i),v(this,hu,s);const[a,l]=E(this,Me,Ss).call(this),u=a-r,h=l-o,d=c(this,Ye);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(e){return v(this,Df,e),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,Ye).map(V.svgRound).join(" ")}get defaultProperties(){const[e,i]=c(this,Ye);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${V.svgRound(e)} ${V.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=c(this,Ye);let s=0,r=0,o=0,a=0,l=0,u=0;switch(c(this,Df)){case 90:r=i/e,o=-e/i,l=e;break;case 180:s=-1,a=-1,l=e,u=i;break;case 270:r=-i/e,o=e/i,u=i;break;default:return""}return`matrix(${s} ${r} ${o} ${a} ${V.svgRound(l)} ${V.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,r]){const[o,a]=E(this,Me,Ss).call(this),[l,u,h,d]=c(this,Ye);if(Math.abs(h-o)<=V.PRECISION||Math.abs(d-a)<=V.PRECISION){const A=e+s/2-(l+h/2),m=i+r/2-(u+d/2);return{path:{"transform-origin":`${V.svgRound(e)} ${V.svgRound(i)}`,transform:`${this.rotationTransform} translate(${A} ${m})`}}}const f=(s-2*o)/(h-2*o),p=(r-2*a)/(d-2*a),y=h/s,x=d/r;return{path:{"transform-origin":`${V.svgRound(l)} ${V.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${x}) translate(${V.svgRound(o)} ${V.svgRound(a)}) scale(${f} ${p}) translate(${V.svgRound(-o)} ${V.svgRound(-a)})`}}}getPathResizedSVGProperties([e,i,s,r]){const[o,a]=E(this,Me,Ss).call(this),l=c(this,Ye),[u,h,d,f]=l;if(l[0]=e,l[1]=i,l[2]=s,l[3]=r,Math.abs(d-o)<=V.PRECISION||Math.abs(f-a)<=V.PRECISION){const m=e+s/2-(u+d/2),w=i+r/2-(h+f/2);for(const{line:b,points:C}of c(this,In))V._translate(b,m,w,b),V._translate(C,m,w,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${V.svgRound(e)} ${V.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(d-2*o),y=(r-2*a)/(f-2*a),x=-p*(u+o)+e+o,A=-y*(h+a)+i+a;if(p!==1||y!==1||x!==0||A!==0)for(const{line:m,points:w}of c(this,In))V._rescale(m,x,A,p,y,m),V._rescale(w,x,A,p,y,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${V.svgRound(e)} ${V.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[r,o]=s,a=c(this,Ye),l=e-a[0],u=i-a[1];if(c(this,rs)===r&&c(this,os)===o)for(const{line:h,points:d}of c(this,In))V._translate(h,l,u,h),V._translate(d,l,u,d);else{const h=c(this,rs)/r,d=c(this,os)/o;v(this,rs,r),v(this,os,o);for(const{line:f,points:p}of c(this,In))V._rescale(f,l,u,h,d,f),V._rescale(p,l,u,h,d,p);a[2]*=h,a[3]*=d}return a[0]=e,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${V.svgRound(e)} ${V.svgRound(i)}`}}}get defaultSVGProperties(){const e=c(this,Ye);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${V.svgRound(e[0])} ${V.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Ye=new WeakMap,Df=new WeakMap,jf=new WeakMap,In=new WeakMap,rs=new WeakMap,os=new WeakMap,hu=new WeakMap,du=new WeakMap,nl=new WeakMap,Me=new WeakSet,Ss=function(e=c(this,nl)){const i=c(this,jf)+e/2*c(this,hu);return c(this,du)%180===0?[i/c(this,rs),i/c(this,os)]:[i/c(this,os),i/c(this,rs)]},pP=function(){const[e,i,s,r]=c(this,Ye),[o,a]=E(this,Me,Ss).call(this,0);return[e+o,i+a,s-2*o,r-2*a]},mP=function(){const e=v(this,Ye,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of c(this,In)){if(r.length<=12){for(let l=4,u=r.length;l<u;l+=6)X.pointBoundingBox(r[l],r[l+1],e);continue}let o=r[4],a=r[5];for(let l=6,u=r.length;l<u;l+=6){const[h,d,f,p,y,x]=r.subarray(l,l+6);X.bezierBoundingBox(o,a,h,d,f,p,y,x,e),o=y,a=x}}const[i,s]=E(this,Me,Ss).call(this);e[0]=Je(e[0]-i,0,1),e[1]=Je(e[1]-s,0,1),e[2]=Je(e[2]+i,0,1),e[3]=Je(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},gP=function(e){const[i,s]=E(this,Me,Ss).call(this);v(this,nl,e);const[r,o]=E(this,Me,Ss).call(this),[a,l]=[r-i,o-s],u=c(this,Ye);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};class m0 extends dP{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:kt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new m0(this._viewParameters);return t.updateAll(this),t}}var Bg,yP;const tc=class tc extends bg{constructor(e){super({...e,name:"inkEditor"});S(this,Bg);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){kt.initialize(e,i),this._defaultDrawingOptions=new m0(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return rt(this,"typesMap",new Map([[ct.INK_THICKNESS,"stroke-width"],[ct.INK_COLOR,"stroke"],[ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,r,o){return new IO(e,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,r,o,a){return sp.deserialize(e,i,s,r,o,a)}static async deserialize(e,i,s){let r=null;if(e instanceof Ow){const{data:{inkLists:a,rect:l,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:p},popupRef:y,contentsObj:x},parent:{page:{pageNumber:A}}}=e;r=e={annotationType:Q.INK,color:Array.from(d),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:A-1,rect:l.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,comment:(x==null?void 0:x.str)||null}}const o=await super.deserialize(e,i,s);return o._initialData=r,e.comment&&o.setCommentData(e.comment),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new yg(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ct.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=tc.getDefaultDrawingOptions({stroke:X.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":l}}=this,u={annotationType:Q.INK,color:kt._colorManager.convert(o),opacity:a,thickness:l,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!E(this,Bg,yP).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:i,rect:s}=this.serializeDraw(!1),r={rect:s,thickness:this._drawingOptions["stroke-width"],points:i};return this.hasEditedComment&&(r.popup=this.comment),e.updateEdited(r),null}};Bg=new WeakSet,yP=function(e){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==i[l])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},j(tc,"_type","ink"),j(tc,"_editorType",Q.INK),j(tc,"_defaultDrawingOptions",null);let Ix=tc;class Dx extends sp{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Fp=8,Yu=3;var il,gt,jx,Ti,vP,xP,Fx,_m,wP,bP,AP,Ox,Bx,SP;class or{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},r,o,a,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${i} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:x,actualBoundingBoxDescent:A,fontBoundingBoxAscent:m,fontBoundingBoxDescent:w,width:b}=h.measureText(t),C=1.5,k=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,b)*C),_=Math.ceil(Math.max(Math.abs(x)+Math.abs(A)||d,Math.abs(m)+Math.abs(w)||d)*C);u=new OffscreenCanvas(k,_),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,k,_),h.fillStyle="black",h.fillText(t,k*(C-1)/2,_*(3-C)/2);const T=E(this,gt,Ox).call(this,h.getImageData(0,0,k,_).data),M=E(this,gt,AP).call(this,T),R=E(this,gt,Bx).call(this,M),N=E(this,gt,Fx).call(this,T,k,_,R);return this.processDrawnLines({lines:{curves:N,width:k,height:_},pageWidth:r,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,r){const[o,a,l]=E(this,gt,SP).call(this,t),[u,h]=E(this,gt,bP).call(this,o,a,l,Math.hypot(a,l)*c(this,il).sigmaSFactor,c(this,il).sigmaR,c(this,il).kernelSize),d=E(this,gt,Bx).call(this,h),f=E(this,gt,Fx).call(this,u,a,l,d);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:o,areContours:a}){s%180!==0&&([e,i]=[i,e]);const{curves:l,width:u,height:h}=t,d=t.thickness??0,f=[],p=Math.min(e/u,i/h),y=p/e,x=p/i,A=[];for(const{points:w}of l){const b=o?E(this,gt,wP).call(this,w):w;if(!b)continue;A.push(b);const C=b.length,k=new Float32Array(C),_=new Float32Array(3*(C===2?2:C-2));if(f.push({line:_,points:k}),C===2){k[0]=b[0]*y,k[1]=b[1]*x,_.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[T,M,R,N]=b;T*=y,M*=x,R*=y,N*=x,k.set([T,M,R,N],0),_.set([NaN,NaN,NaN,NaN,T,M],0);for(let I=4;I<C;I+=2){const et=k[I]=b[I]*y,lt=k[I+1]=b[I+1]*x;_.set(V.createBezierPoints(T,M,R,N,et,lt),(I-2)*3),[T,M,R,N]=[R,N,et,lt]}}if(f.length===0)return null;const m=a?new Dx:new sp;return m.build(f,e,i,1,s,a?0:d,r),{outline:m,newCurves:A,areContours:a,thickness:d,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:r}){let o=1/0,a=-1/0,l=0;for(const b of t){l+=b.length;for(let C=2,k=b.length;C<k;C++){const _=b[C]-b[C-2];o=Math.min(o,_),a=Math.max(a,_)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const h=t.length,d=Fp+Yu*h,f=new Uint32Array(d);let p=0;f[p++]=d*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=r,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(i??0)),f[p++]=h,f[p++]=u.BYTES_PER_ELEMENT;for(const b of t)f[p++]=b.length-2,f[p++]=b[0],f[p++]=b[1];const y=new CompressionStream("deflate-raw"),x=y.writable.getWriter();await x.ready,x.write(f);const A=u.prototype.constructor;for(const b of t){const C=new A(b.length-2);for(let k=2,_=b.length;k<_;k++)C[k-2]=b[k]-b[k-2];x.write(C)}x.close();const m=await new Response(y.readable).arrayBuffer(),w=new Uint8Array(m);return S_(w)}static async decompressSignature(t){try{const e=s4(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const b of i)o||(o=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),o.set(b,a),a+=b.length;const l=new Uint32Array(o.buffer,0,o.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],d=l[3],f=l[4]===0,p=l[5],y=l[6],x=l[7],A=[],m=(Fp+Yu*y)*Uint32Array.BYTES_PER_ELEMENT;let w;switch(x){case Int8Array.BYTES_PER_ELEMENT:w=new Int8Array(o.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:w=new Int16Array(o.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:w=new Int32Array(o.buffer,m);break}a=0;for(let b=0;b<y;b++){const C=l[Yu*b+Fp],k=new Float32Array(C+2);A.push(k);for(let _=0;_<Yu-1;_++)k[_]=l[Yu*b+Fp+_+1];for(let _=0;_<C;_++)k[_+2]=k[_]+w[a++]}return{areContours:f,thickness:p,outlines:A,width:h,height:d}}catch(e){return Z(`decompressSignature: ${e}`),null}}}il=new WeakMap,gt=new WeakSet,jx=function(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s},Ti=new WeakMap,vP=function(t,e,i,s,r,o,a){const l=E(this,gt,jx).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(-u+l-a+16)%8,d=c(this,Ti)[2*h],f=c(this,Ti)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},xP=function(t,e,i,s,r,o,a){const l=E(this,gt,jx).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(u+l+a+16)%8,d=c(this,Ti)[2*h],f=c(this,Ti)[2*h+1];if(t[(i+d)*e+(s+f)]!==0)return h}return-1},Fx=function(t,e,i,s){const r=t.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=t[h]<=s?1:0;for(let h=1;h<i-1;h++)o[h*e]=o[h*e+e-1]=0;for(let h=0;h<e;h++)o[h]=o[e*i-1-h]=0;let a=1,l;const u=[];for(let h=1;h<i-1;h++){l=1;for(let d=1;d<e-1;d++){const f=h*e+d,p=o[f];if(p===0)continue;let y=h,x=d;if(p===1&&o[f-1]===0)a+=1,x-=1;else if(p>=1&&o[f+1]===0)a+=1,x+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const A=[d,h],m=x===d+1,w={isHole:m,points:A,id:a,parent:0};u.push(w);let b;for(const I of u)if(I.id===l){b=I;break}b?b.isHole?w.parent=m?b.parent:l:w.parent=m?l:b.parent:w.parent=m?l:0;const C=E(this,gt,vP).call(this,o,e,h,d,y,x,0);if(C===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let k=c(this,Ti)[2*C],_=c(this,Ti)[2*C+1];const T=h+k,M=d+_;y=T,x=M;let R=h,N=d;for(;;){const I=E(this,gt,xP).call(this,o,e,R,N,y,x,1);k=c(this,Ti)[2*I],_=c(this,Ti)[2*I+1];const et=R+k,lt=N+_;A.push(lt,et);const J=R*e+N;if(o[J+1]===0?o[J]=-a:o[J]===1&&(o[J]=a),et===h&&lt===d&&R===T&&N===M){o[f]!==1&&(l=Math.abs(o[f]));break}else y=R,x=N,R=et,N=lt}}}return u},_m=function(t,e,i,s){if(i-e<=4){for(let T=e;T<i-2;T+=2)s.push(t[T],t[T+1]);return}const r=t[e],o=t[e+1],a=t[i-4]-r,l=t[i-3]-o,u=Math.hypot(a,l),h=a/u,d=l/u,f=h*o-d*r,p=l/a,y=1/u,x=Math.atan(p),A=Math.cos(x),m=Math.sin(x),w=y*(Math.abs(A)+Math.abs(m)),b=y*(1-w+w**2),C=Math.max(Math.atan(Math.abs(m+A)*b),Math.atan(Math.abs(m-A)*b));let k=0,_=e;for(let T=e+2;T<i-2;T+=2){const M=Math.abs(f-h*t[T+1]+d*t[T]);M>k&&(_=T,k=M)}k>(u*C)**2?(E(this,gt,_m).call(this,t,e,_+2,s),E(this,gt,_m).call(this,t,_,i,s)):s.push(r,o)},wP=function(t){const e=[],i=t.length;return E(this,gt,_m).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},bP=function(t,e,i,s,r,o){const a=new Float32Array(o**2),l=-2*s**2,u=o>>1;for(let x=0;x<o;x++){const A=(x-u)**2;for(let m=0;m<o;m++)a[x*o+m]=Math.exp((A+(m-u)**2)/l)}const h=new Float32Array(256),d=-2*r**2;for(let x=0;x<256;x++)h[x]=Math.exp(x**2/d);const f=t.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let x=0;x<i;x++)for(let A=0;A<e;A++){const m=x*e+A,w=t[m];let b=0,C=0;for(let _=0;_<o;_++){const T=x+_-u;if(!(T<0||T>=i))for(let M=0;M<o;M++){const R=A+M-u;if(R<0||R>=e)continue;const N=t[T*e+R],I=a[_*o+M]*h[Math.abs(N-w)];b+=N*I,C+=I}}const k=p[m]=Math.round(b/C);y[k]++}return[p,y]},AP=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},Ox=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let a=0,l=i.length;a<l;a++){const u=i[a]=t[a<<2];s=Math.max(s,u),r=Math.min(r,u)}const o=255/(s-r);for(let a=0,l=i.length;a<l;a++)i[a]=(i[a]-r)*o;return i},Bx=function(t){let e,i=-1/0,s=-1/0;const r=t.findIndex(l=>l!==0);let o=r,a=r;for(e=r;e<256;e++){const l=t[e];l>i&&(e-o>s&&(s=e-o,a=e-1),i=l,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},SP=function(t){const e=t,{width:i,height:s}=t,{maxDim:r}=c(this,il);let o=i,a=s;if(i>r||s>r){let f=i,p=s,y=Math.log2(Math.max(i,s)/r);const x=Math.floor(y);y=y===x?x-1:x;for(let m=0;m<y;m++){o=Math.ceil(f/2),a=Math.ceil(p/2);const w=new OffscreenCanvas(o,a);w.getContext("2d").drawImage(t,0,0,f,p,0,0,o,a),f=o,p=a,t!==e&&t.close(),t=w.transferToImageBitmap()}const A=Math.min(r/o,r/a);o=Math.round(o*A),a=Math.round(a*A)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,o,a);const h=u.getImageData(0,0,o,a).data;return[E(this,gt,Ox).call(this,h),o,a]},S(or,gt),S(or,il,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(or,Ti,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Bw extends dP{constructor(){super(),super.updateProperties({fill:kt._defaultLineColor,"stroke-width":0})}clone(){const t=new Bw;return t.updateAll(this),t}}class zw extends m0{constructor(t){super(t),super.updateProperties({stroke:kt._defaultLineColor,"stroke-width":1})}clone(){const t=new zw(this._viewParameters);return t.updateAll(this),t}}var ho,as,fo,sl;const bn=class bn extends bg{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});S(this,ho,!1);S(this,as,null);S(this,fo,null);S(this,sl,null);this._willKeepAspectRatio=!0,v(this,fo,e.signatureData||null),v(this,as,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){kt.initialize(e,i),this._defaultDrawingOptions=new Bw,this._defaultDrawnSignatureOptions=new zw(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return rt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,as)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(c(this,fo)){const{lines:r,mustSmooth:o,areContours:a,description:l,uuid:u,heightInPage:h}=c(this,fo),{rawDims:{pageWidth:d,pageHeight:f},rotation:p}=this.parent.viewport,y=or.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:p,innerMargin:bn._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,h,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,as)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){v(this,sl,e),this.addEditToolbar()}getUuid(){return c(this,sl)}get description(){return c(this,as)}set description(e){v(this,as,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:s,width:r,height:o}=c(this,fo),a=Math.max(r,o),l=or.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,i,s,r){const{x:o,y:a}=this,{outline:l}=v(this,fo,e);v(this,ho,l instanceof Dx),this.description=s;let u;c(this,ho)?u=bn.getDefaultDrawingOptions():(u=bn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[h,d]=this.parentDimensions,[,f]=this.pageDimensions;let p=i/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(h*this.width,d*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return or.process(e,i,s,r,bn._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return or.extractContoursFromText(e,i,s,r,o,bn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return or.processDrawnLines({lines:e,pageWidth:i,pageHeight:s,rotation:r,innerMargin:bn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=bn.getDefaultDrawingOptions():(this._drawingOptions=bn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:Q.SIGNATURE,isSignature:!0,areContours:c(this,ho),color:[0,0,0],thickness:c(this,ho)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(a),e?(a.paths={lines:i,points:s},a.uuid=c(this,sl),a.isCopy=!0):a.lines=i,c(this,as)&&(a.accessibilityData={type:"Figure",alt:c(this,as)}),a}static deserializeDraw(e,i,s,r,o,a){return a.areContours?Dx.deserialize(e,i,s,r,o,a):sp.deserialize(e,i,s,r,o,a)}static async deserialize(e,i,s){var o;const r=await super.deserialize(e,i,s);return v(r,ho,e.areContours),r.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",v(r,sl,e.uuid),r}};ho=new WeakMap,as=new WeakMap,fo=new WeakMap,sl=new WeakMap,j(bn,"_type","signature"),j(bn,"_editorType",Q.SIGNATURE),j(bn,"_defaultDrawingOptions",null);let zx=bn;var Rt,ye,po,er,mo,fu,nr,rl,ls,Dn,pu,ft,xh,wh,Tm,Pm,Mm,$x,Rm,EP;class Vx extends kt{constructor(e){super({...e,name:"stampEditor"});S(this,ft);S(this,Rt,null);S(this,ye,null);S(this,po,null);S(this,er,null);S(this,mo,null);S(this,fu,"");S(this,nr,null);S(this,rl,!1);S(this,ls,null);S(this,Dn,!1);S(this,pu,!1);v(this,er,e.bitmapUrl),v(this,mo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){kt.initialize(e,i)}static isHandlingMimeForPasting(e){return Iv.includes(e)}static paste(e,i){i.pasteEditor({mode:Q.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;c(this,ye)&&(v(this,Rt,null),this._uiManager.imageManager.deleteId(c(this,ye)),(e=c(this,nr))==null||e.remove(),v(this,nr,null),c(this,ls)&&(clearTimeout(c(this,ls)),v(this,ls,null))),super.remove()}rebuild(){if(!this.parent){c(this,ye)&&E(this,ft,Tm).call(this);return}super.rebuild(),this.div!==null&&(c(this,ye)&&c(this,nr)===null&&E(this,ft,Tm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(c(this,po)||c(this,Rt)||c(this,er)||c(this,mo)||c(this,ye)||c(this,rl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,rl)||(c(this,Rt)?E(this,ft,Pm).call(this):E(this,ft,Tm).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(v(this,ye,s),r&&v(this,Rt,r),v(this,rl,!1),E(this,ft,Pm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,ls)!==null&&clearTimeout(c(this,ls)),v(this,ls,setTimeout(()=>{v(this,ls,null),E(this,ft,$x).call(this)},200))}copyCanvas(e,i,s=!1){var p;e||(e=224);const{width:r,height:o}=c(this,Rt),a=new ys;let l=c(this,Rt),u=r,h=o,d=null;if(i){if(r>i||o>i){const M=Math.min(i/r,i/o);u=Math.floor(r*M),h=Math.floor(o*M)}d=document.createElement("canvas");const y=d.width=Math.ceil(u*a.sx),x=d.height=Math.ceil(h*a.sy);c(this,Dn)||(l=E(this,ft,Mm).call(this,y,x));const A=d.getContext("2d");A.filter=this._uiManager.hcmFilter;let m="white",w="#cfcfd8";this._uiManager.hcmFilter!=="none"?w="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",w="#42414d");const b=15,C=b*a.sx,k=b*a.sy,_=new OffscreenCanvas(C*2,k*2),T=_.getContext("2d");T.fillStyle=m,T.fillRect(0,0,C*2,k*2),T.fillStyle=w,T.fillRect(0,0,C,k),T.fillRect(C,k,C,k),A.fillStyle=A.createPattern(_,"repeat"),A.fillRect(0,0,y,x),A.drawImage(l,0,0,l.width,l.height,0,0,y,x)}let f=null;if(s){let y,x;if(a.symmetric&&l.width<e&&l.height<e)y=l.width,x=l.height;else if(l=c(this,Rt),r>e||o>e){const w=Math.min(e/r,e/o);y=Math.floor(r*w),x=Math.floor(o*w),c(this,Dn)||(l=E(this,ft,Mm).call(this,y,x))}const m=new OffscreenCanvas(y,x).getContext("2d",{willReadFrequently:!0});m.drawImage(l,0,0,l.width,l.height,0,0,y,x),f={width:y,height:x,data:m.getImageData(0,0,y,x).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(e,i,s){var A;let r=null,o=!1;if(e instanceof zT){const{data:{rect:m,rotation:w,id:b,structParent:C,popupRef:k,contentsObj:_},container:T,parent:{page:{pageNumber:M}},canvas:R}=e;let N,I;R?(delete e.canvas,{id:N,bitmap:I}=s.imageManager.getFromCanvas(T.id,R),R.remove()):(o=!0,e._hasNoCanvas=!0);const et=((A=await i._structTree.getAriaAttributes(`${Rw}${b}`))==null?void 0:A.get("aria-label"))||"";r=e={annotationType:Q.STAMP,bitmapId:N,bitmap:I,pageIndex:M-1,rect:m.slice(0),rotation:w,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:et},isSvg:!1,structParent:C,popupRef:k,comment:(_==null?void 0:_.str)||null}}const a=await super.deserialize(e,i,s),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:p}=e;o?(s.addMissingCanvas(e.id,a),v(a,rl,!0)):d&&s.imageManager.isValidId(d)?(v(a,ye,d),u&&v(a,Rt,u)):v(a,er,h),v(a,Dn,f);const[y,x]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/x,p&&(a.altTextData=p),a._initialData=r,e.comment&&a.setCommentData(e.comment),v(a,pu,!!r),a}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Q.STAMP,bitmapId:c(this,ye),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Dn),structTreeParentId:this._structTreeParentId};if(this.addComment(s),e)return s.bitmapUrl=E(this,ft,Rm).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=E(this,ft,EP).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const a=c(this,Dn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(c(this,ye)))i.stamps.set(c(this,ye),{area:a,serialized:s}),s.bitmap=E(this,ft,Rm).call(this,!1);else if(c(this,Dn)){const l=i.stamps.get(c(this,ye));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=E(this,ft,Rm).call(this,!1))}return s}renderAnnotationElement(e){const i={rect:this.getRect(0,0)};return this.hasEditedComment&&(i.popup=this.comment),e.updateEdited(i),null}}Rt=new WeakMap,ye=new WeakMap,po=new WeakMap,er=new WeakMap,mo=new WeakMap,fu=new WeakMap,nr=new WeakMap,rl=new WeakMap,ls=new WeakMap,Dn=new WeakMap,pu=new WeakMap,ft=new WeakSet,xh=function(e,i=!1){if(!e){this.remove();return}v(this,Rt,e.bitmap),i||(v(this,ye,e.id),v(this,Dn,e.isSvg)),e.file&&v(this,fu,e.file.name),E(this,ft,Pm).call(this)},wh=function(){if(v(this,po,null),this._uiManager.enableWaiting(!1),!!c(this,nr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Rt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Rt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Tm=function(){if(c(this,ye)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,ye)).then(s=>E(this,ft,xh).call(this,s,!0)).finally(()=>E(this,ft,wh).call(this));return}if(c(this,er)){const s=c(this,er);v(this,er,null),this._uiManager.enableWaiting(!0),v(this,po,this._uiManager.imageManager.getFromUrl(s).then(r=>E(this,ft,xh).call(this,r)).finally(()=>E(this,ft,wh).call(this)));return}if(c(this,mo)){const s=c(this,mo);v(this,mo,null),this._uiManager.enableWaiting(!0),v(this,po,this._uiManager.imageManager.getFromFile(s).then(r=>E(this,ft,xh).call(this,r)).finally(()=>E(this,ft,wh).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Iv.join(",");const i=this._uiManager._signal;v(this,po,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,ft,xh).call(this,r)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>E(this,ft,wh).call(this))),e.click()},Pm=function(){var d;const{div:e}=this;let{width:i,height:s}=c(this,Rt);const[r,o]=this.pageDimensions,a=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>a*r||s>a*o){const f=Math.min(a*r/i,a*o/s);i*=f,s*=f}const[l,u]=this.parentDimensions;this.setDims(i*l/r,s*u/o),this._uiManager.enableWaiting(!1);const h=v(this,nr,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=i/r,this.height=s/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),E(this,ft,$x).call(this),c(this,pu)||(this.parent.addUndoableEditor(this),v(this,pu,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,fu)&&this.div.setAttribute("aria-description",c(this,fu)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Mm=function(e,i){const{width:s,height:r}=c(this,Rt);let o=s,a=r,l=c(this,Rt);for(;o>2*e||a>2*i;){const u=o,h=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(l,0,0,u,h,0,0,o,a),l=d.transferToImageBitmap()}return l},$x=function(){const[e,i]=this.parentDimensions,{width:s,height:r}=this,o=new ys,a=Math.ceil(s*e*o.sx),l=Math.ceil(r*i*o.sy),u=c(this,nr);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const h=c(this,Dn)?c(this,Rt):E(this,ft,Mm).call(this,a,l),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,a,l)},Rm=function(e){if(e){if(c(this,Dn)){const r=this._uiManager.imageManager.getSvgUrl(c(this,ye));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=c(this,Rt),i.getContext("2d").drawImage(c(this,Rt),0,0),i.toDataURL()}if(c(this,Dn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Do.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Do.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(c(this,Rt),0,0,c(this,Rt).width,c(this,Rt).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(c(this,Rt))},EP=function(e){var a;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===i,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},j(Vx,"_type","stamp"),j(Vx,"_editorType",Q.STAMP);var ol,mu,cs,go,ir,jn,yo,gu,al,Pi,sr,ve,rr,vo,yu,G,xo,Nt,CP,$i,Ux,Wx,Nm;const vi=class vi{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:h}){S(this,Nt);S(this,ol);S(this,mu,!1);S(this,cs,null);S(this,go,null);S(this,ir,null);S(this,jn,new Map);S(this,yo,!1);S(this,gu,!1);S(this,al,!1);S(this,Pi,null);S(this,sr,null);S(this,ve,null);S(this,rr,null);S(this,vo,null);S(this,yu,-1);S(this,G);const d=[...c(vi,xo).values()];if(!vi._initialized){vi._initialized=!0;for(const f of d)f.initialize(h,t)}t.registerEditorTypes(d),v(this,G,t),this.pageIndex=e,this.div=i,v(this,ol,r),v(this,cs,o),this.viewport=u,v(this,ve,l),this.drawLayer=a,this._structTree=s,c(this,G).addLayer(this)}get isEmpty(){return c(this,jn).size===0}get isInvisible(){return this.isEmpty&&c(this,G).getMode()===Q.NONE}updateToolbar(t){c(this,G).updateToolbar(t)}updateMode(t=c(this,G).getMode()){switch(E(this,Nt,Nm).call(this),t){case Q.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Q.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Q.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of c(vi,xo).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,ve))==null?void 0:e.div)}setEditingState(t){c(this,G).setEditingState(t)}addCommands(t){c(this,G).addCommands(t)}cleanUndoStack(t){c(this,G).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,cs))==null||e.div.classList.toggle("disabled",!t)}async enable(){var i;v(this,al,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(i=c(this,vo))==null||i.abort(),v(this,vo,null);const t=new Set;for(const s of c(this,jn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,G).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!c(this,cs)){v(this,al,!1);return}const e=c(this,cs).getEditableAnnotations();for(const s of e){if(s.hide(),c(this,G).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}v(this,al,!1)}disable(){var s;if(v(this,gu,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),c(this,ve)&&!c(this,vo)){v(this,vo,new AbortController);const r=c(this,G).combinedSignal(c(this,vo));c(this,ve).div.addEventListener("pointerdown",o=>{const{clientX:l,clientY:u,timeStamp:h}=o,d=c(this,yu);if(h-d>500){v(this,yu,h);return}v(this,yu,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(l,u);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let y;const x=new RegExp(`^${v_}[0-9]+$`);for(const m of p)if(x.test(m.id)){y=m.id;break}if(!y)return;const A=c(this,jn).get(y);(A==null?void 0:A.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),A.dblclick())},{signal:r,capture:!0})}const t=new Map,e=new Map;for(const r of c(this,jn).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(c(this,cs)){const r=c(this,cs).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(c(this,G).isDeletedAnnotationElement(a)){o.updateEdited({deleted:!0});continue}let l=e.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=t.get(a),l&&(c(this,G).addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}E(this,Nt,Nm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of c(vi,xo).values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,gu,!1)}getEditableAnnotation(t){var e;return((e=c(this,cs))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,G).getActive()!==t&&c(this,G).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,ve))!=null&&t.div&&!c(this,rr)){v(this,rr,new AbortController);const e=c(this,G).combinedSignal(c(this,rr));c(this,ve).div.addEventListener("pointerdown",E(this,Nt,CP).bind(this),{signal:e}),c(this,ve).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,ve))!=null&&t.div&&c(this,rr)&&(c(this,rr).abort(),v(this,rr,null),c(this,ve).div.classList.remove("highlighting"))}enableClick(){if(c(this,go))return;v(this,go,new AbortController);const t=c(this,G).combinedSignal(c(this,go));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=c(this,go))==null||t.abort(),v(this,go,null)}attach(t){c(this,jn).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,G).isDeletedAnnotationElement(e)&&c(this,G).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,jn).delete(t.id),(e=c(this,ol))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,gu)&&t.annotationElementId&&c(this,G).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,G).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,G).addDeletedAnnotationElement(t.annotationElementId),kt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,G).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!c(this,al)),c(this,G).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,ir)&&(t._focusEventsAllowed=!1,v(this,ir,setTimeout(()=>{v(this,ir,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,G)._signal}),e.focus())},0))),t._structTreeParentId=(i=c(this,ol))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return c(this,G).getId()}combinedSignal(t){return c(this,G).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,Nt,$i))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await c(this,G).updateMode(t.mode);const{offsetX:i,offsetY:s}=E(this,Nt,Wx).call(this),r=this.getNextId(),o=E(this,Nt,Ux).call(this,{parent:this,id:r,x:i,y:s,uiManager:c(this,G),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=c(vi,xo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,G)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),r=E(this,Nt,Ux).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:c(this,G),isCentered:e,...i});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(E(this,Nt,Wx).call(this),!0,t)}setSelected(t){c(this,G).setSelected(t)}toggleSelected(t){c(this,G).toggleSelected(t)}unselect(t){c(this,G).unselect(t)}pointerup(t){var s;const{isMac:e}=Le.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!c(this,yo)||(v(this,yo,!1),(s=c(this,Nt,$i))!=null&&s.isDrawer&&c(this,Nt,$i).supportMultipleDrawings))return;if(!c(this,mu)){v(this,mu,!0);return}const i=c(this,G).getMode();if(i===Q.STAMP||i===Q.SIGNATURE){c(this,G).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(c(this,G).getMode()===Q.HIGHLIGHT&&this.enableTextSelection(),c(this,yo)){v(this,yo,!1);return}const{isMac:e}=Le.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(v(this,yo,!0),(s=c(this,Nt,$i))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=c(this,G).getActive();v(this,mu,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),c(this,Pi)){c(this,Nt,$i).startDrawing(this,c(this,G),!1,t);return}c(this,G).setCurrentDrawingSession(this),v(this,Pi,new AbortController);const e=c(this,G).combinedSignal(c(this,Pi));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(v(this,sr,null),this.commitOrRemove())},{signal:e}),c(this,Nt,$i).startDrawing(this,c(this,G),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&v(this,sr,e);return}c(this,sr)&&setTimeout(()=>{var e;(e=c(this,sr))==null||e.focus(),v(this,sr,null)},0)}endDrawingSession(t=!1){return c(this,Pi)?(c(this,G).setCurrentDrawingSession(null),c(this,Pi).abort(),v(this,Pi,null),v(this,sr,null),c(this,Nt,$i).endDrawing(t)):null}findNewParent(t,e,i){const s=c(this,G).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return c(this,Pi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,Pi)&&c(this,Nt,$i).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=c(this,G).getActive())==null?void 0:t.parent)===this&&(c(this,G).commitOrRemove(),c(this,G).setActiveEditor(null)),c(this,ir)&&(clearTimeout(c(this,ir)),v(this,ir,null));for(const i of c(this,jn).values())(e=c(this,ol))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,c(this,jn).clear(),c(this,G).removeLayer(this)}render({viewport:t}){this.viewport=t,vl(this.div,t);for(const e of c(this,G).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,G).commitOrRemove(),E(this,Nt,Nm).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,vl(this.div,{rotation:i}),e!==i)for(const s of c(this,jn).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,G).viewParameters.realScale}};ol=new WeakMap,mu=new WeakMap,cs=new WeakMap,go=new WeakMap,ir=new WeakMap,jn=new WeakMap,yo=new WeakMap,gu=new WeakMap,al=new WeakMap,Pi=new WeakMap,sr=new WeakMap,ve=new WeakMap,rr=new WeakMap,vo=new WeakMap,yu=new WeakMap,G=new WeakMap,xo=new WeakMap,Nt=new WeakSet,CP=function(t){c(this,G).unselectAll();const{target:e}=t;if(e===c(this,ve).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,ve).div.contains(e)){const{isMac:i}=Le.platform;if(t.button!==0||t.ctrlKey&&i)return;c(this,G).showAllEditors("highlight",!0,!0),c(this,ve).div.classList.add("free"),this.toggleDrawing(),wg.startHighlighting(this,c(this,G).direction==="ltr",{target:c(this,ve).div,x:t.x,y:t.y}),c(this,ve).div.addEventListener("pointerup",()=>{c(this,ve).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,G)._signal}),t.preventDefault()}},$i=function(){return c(vi,xo).get(c(this,G).getMode())},Ux=function(t){const e=c(this,Nt,$i);return e?new e.prototype.constructor(t):null},Wx=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+s),u=(r+a)/2-t,h=(o+l)/2-e,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Nm=function(){for(const t of c(this,jn).values())t.isEmpty()&&t.remove()},j(vi,"_initialized",!1),S(vi,xo,new Map([Ex,Ix,Vx,wg,zx].map(t=>[t._editorType,t])));let Hx=vi;var Mi,Qe,ll,Ff,zg,kP,vs,Xx,_P,Kx;const oe=class oe{constructor({pageIndex:t}){S(this,vs);S(this,Mi,null);S(this,Qe,new Map);S(this,ll,new Map);this.pageIndex=t}setParent(t){if(!c(this,Mi)){v(this,Mi,t);return}if(c(this,Mi)!==t){if(c(this,Qe).size>0)for(const e of c(this,Qe).values())e.remove(),t.append(e);v(this,Mi,t)}}static get _svgFactory(){return rt(this,"_svgFactory",new vg)}draw(t,e=!1,i=!1){const s=Ge(oe,Ff)._++,r=E(this,vs,Xx).call(this),o=oe._svgFactory.createElement("defs");r.append(o);const a=oe._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&c(this,ll).set(s,a);const u=i?E(this,vs,_P).call(this,o,l):null,h=oe._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(r,t),c(this,Qe).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=Ge(oe,Ff)._++,s=E(this,vs,Xx).call(this),r=oe._svgFactory.createElement("defs");s.append(r);const o=oe._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const d=oe._svgFactory.createElement("mask");r.append(d),l=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const f=oe._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=oe._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=oe._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),c(this,Qe).set(i,s),i}finalizeDraw(t,e){c(this,ll).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var l;if(!e)return;const{root:i,bbox:s,rootClass:r,path:o}=e,a=typeof t=="number"?c(this,Qe).get(t):t;if(a){if(i&&E(this,vs,Kx).call(this,a,i),s&&E(l=oe,zg,kP).call(l,a,s),r){const{classList:u}=a;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=a.firstChild.firstChild;E(this,vs,Kx).call(this,h,o)}}}updateParent(t,e){if(e===this)return;const i=c(this,Qe).get(t);i&&(c(e,Mi).append(i),c(this,Qe).delete(t),c(e,Qe).set(t,i))}remove(t){c(this,ll).delete(t),c(this,Mi)!==null&&(c(this,Qe).get(t).remove(),c(this,Qe).delete(t))}destroy(){v(this,Mi,null);for(const t of c(this,Qe).values())t.remove();c(this,Qe).clear(),c(this,ll).clear()}};Mi=new WeakMap,Qe=new WeakMap,ll=new WeakMap,Ff=new WeakMap,zg=new WeakSet,kP=function(t,[e,i,s,r]){const{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},vs=new WeakSet,Xx=function(){const t=oe._svgFactory.create(1,1,!0);return c(this,Mi).append(t),t.setAttribute("aria-hidden",!0),t},_P=function(t,e){const i=oe._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=oe._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},Kx=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},S(oe,zg),S(oe,Ff,0);let Gx=oe;globalThis._pdfjsTestingUtils={HighlightOutliner:kx};globalThis.pdfjsLib={AbortException:Io,AnnotationEditorLayer:Hx,AnnotationEditorParamsType:ct,AnnotationEditorType:Q,AnnotationEditorUIManager:xl,AnnotationLayer:bx,AnnotationMode:Mr,AnnotationType:Zt,build:dO,ColorPicker:gg,createValidAbsoluteUrl:x_,DOMSVGFactory:vg,DrawLayer:Gx,FeatureTest:Le,fetchData:tp,getDocument:ST,getFilenameFromUrl:r4,getPdfFilenameFromUrl:o4,getRGB:f0,getUuid:A_,getXfaPageViewport:l4,GlobalWorkerOptions:Li,ImageKind:nm,InvalidPDFException:Nv,isDataScheme:d0,isPdfFile:Lw,isValidExplicitDest:x4,MathClamp:Je,noContextMenu:mi,normalizeUnicode:n4,OPS:hg,OutputScale:ys,PasswordResponses:XF,PDFDataRangeTransport:ET,PDFDateString:fg,PDFWorker:ad,PermissionFlag:GF,PixelsPerInch:Do,RenderingCancelledException:Nw,ResponseException:dg,setLayerDimensions:vl,shadow:rt,SignatureExtractor:or,stopEvent:te,SupportedImageMimeTypes:Iv,TextLayer:rd,TouchManager:mg,updateUrlHash:w_,Util:X,VerbosityLevel:c0,version:_T,XfaLayer:PT};Li.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${_T}/pdf.worker.min.js`;const DO=({pdfUrl:n,alt:t})=>{const e=P.useRef(null),[i,s]=P.useState(null);return P.useEffect(()=>{(async()=>{try{const l=await(await ST(n).promise).getPage(1),u=l.getViewport({scale:1}),h=e.current,d=h.getContext("2d");h.width=u.width,h.height=u.height,await l.render({canvasContext:d,viewport:u}).promise,s(h.toDataURL("image/png"))}catch(o){console.error("Error al renderizar thumbnail del PDF:",o)}})()},[n]),g.jsxs(g.Fragment,{children:[i?g.jsx("img",{src:i,alt:t||"PDF Thumbnail",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}):g.jsx("div",{className:"flex items-center justify-center w-full h-full bg-gray-100 text-gray-500 text-sm",children:"Cargando portada..."}),g.jsx("canvas",{ref:e,style:{display:"none"}})]})},jO="/assets/pdf.worker-DcN26wb1.mjs";Li.workerSrc=jO;const FO=()=>{const{t:n}=se(),t=[{id:1,title:"Co-culture dynamics between Lachancea cidri and Saccharomyces cerevisiae impact fermentative aroma profile",year:2025,pdfUrl:"/papers/Zavaleta-et-al.-2025.pdf",image:"https://images.pexels.com/photos/2280549/pexels-photo-2280549.jpeg?auto=compress&cs=tinysrgb&w=800"},{id:2,title:"In Vivo Monitoring of Transcriptional Activity During Metabolic Transition Using a Bioluminescent Reporter in Yeast",year:2025,pdfUrl:"/papers/Munoz-et-al.-2025.pdf"},{id:3,title:"Experimental evolution and hybridization enhance the fermentative capacity of wild Saccharomyces eubayanus strains",year:2025,pdfUrl:"/papers/Vega-et-al.-2025.pdf"},{id:4,title:"High ectomycorrhizal relative abundance during winter at the treeline",year:2025,pdfUrl:"/papers/Saona-et-al-2025.pdf"},{id:5,title:"Domestication signatures in the non-conventional yeast Lachancea cidri",year:2024,pdfUrl:"/papers/Villarreal-et-al.-2024.pdf"},{id:6,title:"Understanding brewing trait inheritance in de novo Lager yeast hybrids",year:2024,pdfUrl:"/papers/Zavaleta-et-al.-2024.pdf"},{id:7,title:"An integrative taxonomy approach reveals Saccharomyces chiloensis sp. nov. as a newly discovered species from Coastal Patagonia",year:2024,pdfUrl:"/papers/Pena-et-al-2024.pdf"},{id:8,title:"Wild Patagonian yeast improve the evolutionary potential of novel interspecific hybrid strains for lager brewing",year:2024,pdfUrl:"/papers/Molinet-et-al.-2024.pdf"},{id:9,title:"Nakazawaea atacamensis f.a., sp. nov. a novel nonconventional fermentative ascomycetous yeast species from the Atacama Desert",year:2024,pdfUrl:"/papers/Araya-et-al.-2024.pdf"},{id:10,title:"Addition of Saccharomyces eubayanus to SCOBY fermentations modulates the chemical and volatile compound profiles in kombucha ",year:2023,pdfUrl:"/papers/Venegas-et-al.-2023.pdf"},{id:11,title:"Natural Variation in Diauxic Shift between Patagonian Saccharomyces eubayanus Strains",year:2022,pdfUrl:"/papers/Molinet-et-al.-2022.pdf"},{id:12,title:"A Saccharomyces eubayanus haploid resource for research studies",year:2022,pdfUrl:"/papers/Molinet-et-al.-2022b.pdf"}];return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-16",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-3xl mb-8",children:g.jsx(o_,{size:48,className:"text-white"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-slate-800 to-blue-800 bg-clip-text text-transparent mb-6",children:n("publications.title")}),g.jsx("p",{className:"text-xl text-gray-600 mb-6 max-w-3xl mx-auto",children:n("publications.subtitle")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-500 to-cyan-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8",children:t.map((e,i)=>g.jsxs(L.article,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+i*.1},whileHover:{y:-8,scale:1.01},className:"bg-white rounded-2xl shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden group",children:[g.jsx("a",{href:e.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"block",children:g.jsxs("div",{className:"aspect-[3/4] w-full overflow-hidden relative",children:[g.jsx(DO,{pdfUrl:e.pdfUrl,alt:e.title}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"})]})}),g.jsxs("div",{className:"p-6",children:[g.jsx("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsx(_w,{size:14}),g.jsx("span",{children:e.year})]})}),g.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-3 group-hover:text-blue-700 transition-colors duration-300 line-clamp-2",children:e.title}),g.jsx("p",{className:"text-sm text-gray-600 mb-3",children:g.jsx("strong",{children:e.year})}),g.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[g.jsx("div",{}),g.jsx("a",{href:e.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-cyan-500 text-white text-sm font-semibold rounded-lg hover:shadow-lg transition-all duration-300",children:n("publications.downloadPdf")})]})]})]},e.id))})]})})},OO=()=>{const{t:n}=se(),[t,e]=P.useState(null),i=[{id:1,src:"https://images.pexels.com/photos/1181406/pexels-photo-1181406.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Congreso Internacional de Microbiología"},{id:2,src:"https://images.pexels.com/photos/2280549/pexels-photo-2280549.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Simposio de Biotecnología Aplicada"},{id:3,src:"https://images.pexels.com/photos/3735747/pexels-photo-3735747.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Conferencia de Genética Molecular"},{id:4,src:"https://images.pexels.com/photos/256490/pexels-photo-256490.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Congreso Latinoamericano de Microbiología"},{id:5,src:"https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Simposio Internacional de Fermentaciones"},{id:6,src:"https://images.pexels.com/photos/2280571/pexels-photo-2280571.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Congreso de Bioinformática"},{id:7,src:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Encuentro de Jóvenes Investigadores"},{id:8,src:"https://images.pexels.com/photos/2182970/pexels-photo-2182970.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Congreso Mundial de Biotecnología"},{id:9,src:"https://images.pexels.com/photos/3184338/pexels-photo-3184338.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Conferencia de Ecología Microbiana"},{id:10,src:"https://images.pexels.com/photos/2182975/pexels-photo-2182975.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Simposio de Genómica Comparada"},{id:11,src:"https://images.pexels.com/photos/3184339/pexels-photo-3184339.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Congreso Internacional de Fermentación"},{id:12,src:"https://images.pexels.com/photos/2182969/pexels-photo-2182969.jpeg?auto=compress&cs=tinysrgb&w=800",title:"Encuentro de Biotecnología Ambiental"}],s=u=>{e(u)},r=()=>{e(null)},o=()=>{t!==null&&e((t+1)%i.length)},a=()=>{t!==null&&e(t===0?i.length-1:t-1)},l=u=>{u.key==="Escape"&&r(),u.key==="ArrowRight"&&o(),u.key==="ArrowLeft"&&a()};return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-16",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-3xl mb-8",children:g.jsx(Qf,{size:48,className:"text-white"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-slate-800 to-purple-800 bg-clip-text text-transparent mb-6",children:n("congresses.title")}),g.jsx("p",{className:"text-xl text-gray-600 mb-6 max-w-3xl mx-auto",children:n("congresses.subtitle")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-purple-500 to-pink-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-purple-600 hover:text-purple-700 font-medium mb-8 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:i.map((u,h)=>g.jsxs(L.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+h*.05},whileHover:{y:-8,scale:1.02},onClick:()=>s(h),className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 overflow-hidden cursor-pointer group",children:[g.jsxs("div",{className:"aspect-w-4 aspect-h-3 h-48 overflow-hidden relative",children:[g.jsx("img",{src:u.src,alt:u.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),g.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500",children:g.jsx("h3",{className:"font-bold text-sm mb-1 line-clamp-2",children:u.title})})]}),g.jsx("div",{className:"p-4",children:g.jsx("h3",{className:"font-bold text-slate-800 mb-2 line-clamp-2 group-hover:text-purple-700 transition-colors duration-300",children:u.title})})]},u.id))}),g.jsx(qf,{children:t!==null&&g.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:r,onKeyDown:l,tabIndex:0,children:g.jsxs(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-[90vh] bg-white rounded-2xl overflow-hidden",onClick:u=>u.stopPropagation(),children:[g.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Zf,{size:20})}),g.jsx("button",{onClick:a,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Tw,{size:24})}),g.jsx("button",{onClick:o,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Pw,{size:24})}),g.jsx("div",{className:"aspect-w-16 aspect-h-10 h-96 md:h-[500px]",children:g.jsx("img",{src:i[t].src,alt:i[t].title,className:"w-full h-full object-cover"})}),g.jsx("div",{className:"p-6",children:g.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-3",children:i[t].title})})]})})})]})})},BO=()=>{const{t:n}=se(),[t,e]=P.useState(null),[i,s]=P.useState(null),r=Array.from({length:16},(A,m)=>({id:m+1,src:`https://images.pexels.com/photos/${["3184291","2182970","3184338","2182975","3184339","2182969","3184340","2182974","3184341","2182976","3184342","2182977","3184343","2182978","3184344","3184345"][m]}/pexels-photo-${["3184291","2182970","3184338","2182975","3184339","2182969","3184340","2182974","3184341","2182976","3184342","2182977","3184343","2182978","3184344","3184345"][m]}.jpeg?auto=compress&cs=tinysrgb&w=800`,title:`International Sampling ${m+1}`})),o=Array.from({length:22},(A,m)=>({id:m+1,src:`https://images.pexels.com/photos/${["1181406","2280549","3735747","256490","3184418","2280571","3184291","2182970","3184338","2182975","3184339","2182969","3184340","2182974","3184341","2182976","3184342","2182977","3184343","2182978","3184344","3184345"][m]}/pexels-photo-${["1181406","2280549","3735747","256490","3184418","2280571","3184291","2182970","3184338","2182975","3184339","2182969","3184340","2182974","3184341","2182976","3184342","2182977","3184343","2182978","3184344","3184345"][m]}.jpeg?auto=compress&cs=tinysrgb&w=800`,title:`Nothofagus Prospection ${m+1}`})),a=Array.from({length:9},(A,m)=>({id:m+1,src:`https://images.pexels.com/photos/${["1181406","2280549","3735747","256490","3184418","2280571","3184291","2182970","3184338"][m]}/pexels-photo-${["1181406","2280549","3735747","256490","3184418","2280571","3184291","2182970","3184338"][m]}.jpeg?auto=compress&cs=tinysrgb&w=800`,title:`Puerto Williams Sampling ${m+1}`})),l=Array.from({length:20},(A,m)=>({id:m+1,src:`https://images.pexels.com/photos/${["2182975","3184339","2182969","3184340","2182974","3184341","2182976","3184342","2182977","3184343","2182978","3184344","3184345","1181406","2280549","3735747","256490","3184418","2280571","3184291"][m]}/pexels-photo-${["2182975","3184339","2182969","3184340","2182974","3184341","2182976","3184342","2182977","3184343","2182978","3184344","3184345","1181406","2280549","3735747","256490","3184418","2280571","3184291"][m]}.jpeg?auto=compress&cs=tinysrgb&w=800`,title:`Puerto Williams Extended ${m+1}`})),u=[{id:"international",title:"Sampling with International Colleagues",description:"Our laboratory is enriched by frequent visits from our international collaborators, who are experts in the field of yeasts. We have had the honor of welcoming Gianni Litti, Daniela Delneri, Gill Fisher, Lucía Morales, Dunkan Greig, and Rike Stelkens, among others. These visits are a valuable opportunity to conduct joint sampling in the natural habitats of the yeasts we study, and also serve as a key time to discuss scientific advancements and plan new collaborative projects.",photos:r,icon:Qf,gradient:"from-blue-500 to-cyan-500"},{id:"nothofagus",title:"Nothofagus pumilio Prospection",description:"In collaboration with other research laboratories in Chile, we are part of the Millennium Nucleus LiLi. During the first year of this project, we conducted an exhaustive sampling campaign along a wide latitudinal gradient, from the Ñuble Region (36°S) to Coyhaique (45°S). This fieldwork was carried out across all four seasons to assess the diversity and dispersal of yeasts inhabiting the bark of Nothofagus pumilio (Lenga) at different altitudes. The data collected have been fundamental for the development of several undergraduate and doctoral theses, as well as for the publication of scientific articles.",photos:o,icon:Mw,gradient:"from-green-500 to-emerald-500"},{id:"puerto-williams-1",title:"Sampling in the World's Southernmost City",description:"With the objective of precisely determining the distribution of Saccharomyces yeasts and finding non-Saccharomyces strains with phenotypes of biotechnological interest, our laboratory has extended its prospecting to the southernmost reaches of Chile's temperate forests. This endeavor has led us to explore areas such as Karukinka and, more recently, the world's southernmost city: Puerto Williams. In these remote landscapes, we have identified various Nothofagus species, trees that host a rich diversity of yeasts on their bark.",photos:a,icon:ug,gradient:"from-purple-500 to-pink-500"},{id:"puerto-williams-2",title:"Sampling in the World's Southernmost City",description:"Extended documentation of our sampling activities in Puerto Williams, showcasing the diverse landscapes and research methodologies employed in this unique environment.",photos:l,icon:ug,gradient:"from-orange-500 to-red-500"}],h=A=>{e(A),s(0)},d=()=>{e(null),s(null)},f=()=>{if(t&&i!==null){const A=u.find(m=>m.id===t);A&&s((i+1)%A.photos.length)}},p=()=>{if(t&&i!==null){const A=u.find(m=>m.id===t);A&&s(i===0?A.photos.length-1:i-1)}},y=A=>{A.key==="Escape"&&d(),A.key==="ArrowRight"&&f(),A.key==="ArrowLeft"&&p()},x=t?u.find(A=>A.id===t):null;return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-16",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-3xl mb-8",children:g.jsx(d_,{size:48,className:"text-white"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-slate-800 to-emerald-800 bg-clip-text text-transparent mb-6",children:n("outreach.title")}),g.jsx("p",{className:"text-xl text-gray-600 mb-6 max-w-3xl mx-auto",children:n("outreach.subtitle")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-emerald-500 to-teal-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-emerald-600 hover:text-emerald-700 font-medium mb-12 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"space-y-16",children:u.map((A,m)=>{const w=A.icon;return g.jsxs(L.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+m*.1},className:"bg-white rounded-3xl shadow-xl p-8 md:p-12",children:[g.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[g.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br ${A.gradient} rounded-2xl shadow-lg`,children:g.jsx(w,{size:28,className:"text-white"})}),g.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:n(`outreach.${A.id}.title`)})]}),g.jsx("p",{className:"text-gray-600 leading-relaxed mb-8 text-lg",children:n(`outreach.${A.id}.description`)}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:A.photos.slice(0,6).map((b,C)=>g.jsx(L.div,{whileHover:{scale:1.05},className:"aspect-square overflow-hidden rounded-xl shadow-md cursor-pointer",onClick:()=>h(A.id),children:g.jsx("img",{src:b.src,alt:b.title,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"})},b.id))}),g.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>h(A.id),className:`px-8 py-3 bg-gradient-to-r ${A.gradient} text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300`,children:n("outreach.viewAllPhotos",{count:A.photos.length})})]},A.id)})}),g.jsx(qf,{children:t&&i!==null&&x&&g.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:d,onKeyDown:y,tabIndex:0,children:g.jsxs(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-[90vh] bg-white rounded-2xl overflow-hidden",onClick:A=>A.stopPropagation(),children:[g.jsx("button",{onClick:d,className:"absolute top-4 right-4 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Zf,{size:20})}),g.jsx("button",{onClick:p,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Tw,{size:24})}),g.jsx("button",{onClick:f,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Pw,{size:24})}),g.jsx("div",{className:"aspect-w-16 aspect-h-10 h-96 md:h-[500px]",children:g.jsx("img",{src:x.photos[i].src,alt:x.photos[i].title,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:x.photos[i].title}),g.jsx("p",{className:"text-gray-600 mb-2",children:n(`outreach.${t}.title`)}),g.jsx("p",{className:"text-sm text-gray-500",children:n("outreach.imageCounter",{current:i+1,total:x.photos.length})})]})]})})})]})})},zO=()=>{const{t:n}=se(),[t,e]=P.useState(null),[i,s]=P.useState(null),r=Array.from({length:4},(y,x)=>({id:x+1,src:`https://images.pexels.com/photos/${["3184291","2182970","3184338","2182975"][x]}/pexels-photo-${["3184291","2182970","3184338","2182975"][x]}.jpeg?auto=compress&cs=tinysrgb&w=800`,title:`Science Dissemination ${x+1}`})),o=Array.from({length:13},(y,x)=>({id:x+1,src:`https://images.pexels.com/photos/${["1181406","2280549","3735747","256490","3184418","2280571","3184291","2182970","3184338","2182975","3184339","2182969","3184340"][x]}/pexels-photo-${["1181406","2280549","3735747","256490","3184418","2280571","3184291","2182970","3184338","2182975","3184339","2182969","3184340"][x]}.jpeg?auto=compress&cs=tinysrgb&w=800`,title:`Whiskey Tasting ${x+1}`})),a=[{id:"dissemination",title:"Dissemination",description:"Our laboratory is enriched by frequent visits from our international collaborators, who are experts in the field of yeasts. We have had the honor of welcoming Gianni Litti, Daniela Delneri, Gill Fisher, Lucía Morales, Dunkan Greig, and Rike Stelkens, among others. These visits are a valuable opportunity to conduct joint sampling in the natural habitats of the yeasts we study, and also serve as a key time to discuss scientific advancements and plan new collaborative projects.",photos:r,icon:Qf,gradient:"from-blue-500 to-cyan-500"},{id:"whiskey",title:"Whiskey tasting",description:"In collaboration with other research laboratories in Chile, we are part of the Millennium Nucleus LiLi. During the first year of this project, we conducted an exhaustive sampling campaign along a wide latitudinal gradient, from the Ñuble Region (36°S) to Coyhaique (45°S). This fieldwork was carried out across all four seasons to assess the diversity and dispersal of yeasts inhabiting the bark of Nothofagus pumilio (Lenga) at different altitudes. The data collected have been fundamental for the development of several undergraduate and doctoral theses, as well as for the publication of scientific articles.",photos:o,icon:PF,gradient:"from-amber-500 to-orange-500"}],l=y=>{e(y),s(0)},u=()=>{e(null),s(null)},h=()=>{if(t&&i!==null){const y=a.find(x=>x.id===t);y&&s((i+1)%y.photos.length)}},d=()=>{if(t&&i!==null){const y=a.find(x=>x.id===t);y&&s(i===0?y.photos.length-1:i-1)}},f=y=>{y.key==="Escape"&&u(),y.key==="ArrowRight"&&h(),y.key==="ArrowLeft"&&d()},p=t?a.find(y=>y.id===t):null;return g.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white pt-16",children:g.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[g.jsxs(L.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-16",children:[g.jsx(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,delay:.2},className:"inline-block p-4 bg-gradient-to-r from-orange-500 to-red-500 rounded-3xl mb-8",children:g.jsx(m_,{size:48,className:"text-white"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-slate-800 to-orange-800 bg-clip-text text-transparent mb-6",children:n("dissemination.title")}),g.jsx("p",{className:"text-xl text-gray-600 mb-6 max-w-3xl mx-auto",children:n("dissemination.subtitle")}),g.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-orange-500 to-red-500 mx-auto rounded-full"})]}),g.jsxs(L.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.3},onClick:()=>window.location.href="/",className:"flex items-center space-x-2 text-orange-600 hover:text-orange-700 font-medium mb-12 transition-colors duration-200",children:[g.jsx(ws,{size:20}),g.jsx("span",{children:n("common.backToHome")})]}),g.jsx("div",{className:"space-y-16",children:a.map((y,x)=>{const A=y.icon;return g.jsxs(L.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+x*.1},className:"bg-white rounded-3xl shadow-xl p-8 md:p-12",children:[g.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[g.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br ${y.gradient} rounded-2xl shadow-lg`,children:g.jsx(A,{size:28,className:"text-white"})}),g.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800",children:n(`dissemination.${y.id}.title`)})]}),g.jsx("p",{className:"text-gray-600 leading-relaxed mb-8 text-lg",children:n(`dissemination.${y.id}.description`)}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 mb-6",children:y.photos.slice(0,Math.min(6,y.photos.length)).map((m,w)=>g.jsx(L.div,{whileHover:{scale:1.05},className:"aspect-square overflow-hidden rounded-xl shadow-md cursor-pointer",onClick:()=>l(y.id),children:g.jsx("img",{src:m.src,alt:m.title,className:"w-full h-full object-cover hover:scale-110 transition-transform duration-300"})},m.id))}),g.jsx(L.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(y.id),className:`px-8 py-3 bg-gradient-to-r ${y.gradient} text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-300`,children:n("dissemination.viewAllPhotos",{count:y.photos.length})})]},y.id)})}),g.jsx(qf,{children:t&&i!==null&&p&&g.jsx(L.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:u,onKeyDown:f,tabIndex:0,children:g.jsxs(L.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-[90vh] bg-white rounded-2xl overflow-hidden",onClick:y=>y.stopPropagation(),children:[g.jsx("button",{onClick:u,className:"absolute top-4 right-4 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Zf,{size:20})}),g.jsx("button",{onClick:d,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Tw,{size:24})}),g.jsx("button",{onClick:h,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors duration-200",children:g.jsx(Pw,{size:24})}),g.jsx("div",{className:"aspect-w-16 aspect-h-10 h-96 md:h-[500px]",children:g.jsx("img",{src:p.photos[i].src,alt:p.photos[i].title,className:"w-full h-full object-cover"})}),g.jsxs("div",{className:"p-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:p.photos[i].title}),g.jsx("p",{className:"text-gray-600 mb-2",children:n(`dissemination.${t}.title`)}),g.jsx("p",{className:"text-sm text-gray-500",children:n("dissemination.imageCounter",{current:i+1,total:p.photos.length})})]})]})})})]})})},VO=()=>{const{isLoading:n}=se();return n?g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):g.jsx(EL,{children:g.jsxs(eL,{children:[g.jsx(Yn,{path:"/",element:g.jsx(BF,{})}),g.jsx(Yn,{path:"/about",element:g.jsx(HF,{})}),g.jsx(Yn,{path:"/news",element:g.jsx(UF,{})}),g.jsx(Yn,{path:"/team",element:g.jsx(WF,{})}),g.jsx(Yn,{path:"/publications",element:g.jsx(FO,{})}),g.jsx(Yn,{path:"/congresses",element:g.jsx(OO,{})}),g.jsx(Yn,{path:"/outreach",element:g.jsx(BO,{})}),g.jsx(Yn,{path:"/dissemination",element:g.jsx(zO,{})}),g.jsx(Yn,{path:"/privacy",element:g.jsx(zF,{})}),g.jsx(Yn,{path:"/terms",element:g.jsx(VF,{})}),g.jsx(Yn,{path:"/cookies",element:g.jsx($F,{})})]})})};function $O(){return g.jsx(lN,{children:g.jsx(uN,{children:g.jsx(VO,{})})})}a2(document.getElementById("root")).render(g.jsx(P.StrictMode,{children:g.jsx($O,{})}));
